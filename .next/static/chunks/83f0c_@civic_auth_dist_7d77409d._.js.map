{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"file":"logger.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/lib/logger.ts"],"sourcesContent":["import debug from \"debug\";\n\nconst PACKAGE_NAME = \"@civic/auth\";\n\nexport interface Logger {\n  debug(message: string, ...args: unknown[]): void;\n  info(message: string, ...args: unknown[]): void;\n  warn(message: string, ...args: unknown[]): void;\n  error(message: string, ...args: unknown[]): void;\n}\n\nclass DebugLogger implements Logger {\n  private debugLogger: debug.Debugger;\n  private infoLogger: debug.Debugger;\n  private warnLogger: debug.Debugger;\n  private errorLogger: debug.Debugger;\n\n  constructor(namespace: string) {\n    // Format: @org/package:library:component:level\n    this.debugLogger = debug(`${PACKAGE_NAME}:${namespace}:debug`);\n    this.infoLogger = debug(`${PACKAGE_NAME}:${namespace}:info`);\n    this.warnLogger = debug(`${PACKAGE_NAME}:${namespace}:warn`);\n    this.errorLogger = debug(`${PACKAGE_NAME}:${namespace}:error`);\n\n    this.debugLogger.color = \"4\";\n    this.infoLogger.color = \"2\";\n    this.warnLogger.color = \"3\";\n    this.errorLogger.color = \"1\";\n  }\n\n  debug(message: string, ...args: unknown[]): void {\n    this.debugLogger(message, ...args);\n  }\n\n  info(message: string, ...args: unknown[]): void {\n    this.infoLogger(message, ...args);\n  }\n\n  warn(message: string, ...args: unknown[]): void {\n    this.warnLogger(message, ...args);\n  }\n\n  error(message: string, ...args: unknown[]): void {\n    this.errorLogger(message, ...args);\n  }\n}\n\nexport const createLogger = (namespace: string): Logger =>\n  new DebugLogger(namespace);\n\n// Pre-configured loggers for different parts of the package\nexport const loggers = {\n  // Next.js specific loggers\n  nextjs: {\n    routes: createLogger(\"api:routes\"),\n    middleware: createLogger(\"api:middleware\"),\n    handlers: {\n      auth: createLogger(\"api:handlers:auth\"),\n    },\n  },\n  // React specific loggers\n  react: {\n    components: createLogger(\"react:components\"),\n    hooks: createLogger(\"react:hooks\"),\n    context: createLogger(\"react:context\"),\n  },\n  // Shared utilities loggers\n  services: {\n    validation: createLogger(\"utils:validation\"),\n    network: createLogger(\"utils:network\"),\n  },\n} as const;\n"],"names":[],"mappings":";;;;AAAA,OAAO,KAAK,MAAM,OAAO,CAAC;;AAE1B,MAAM,YAAY,GAAG,aAAa,CAAC;AASnC,MAAM,WAAW;IACP,WAAW,CAAiB;IAC5B,UAAU,CAAiB;IAC3B,UAAU,CAAiB;IAC3B,WAAW,CAAiB;IAEpC,YAAY,SAAiB,CAAA;QAC3B,+CAA+C;QAC/C,IAAI,CAAC,WAAW,OAAG,qJAAA,AAAK,EAAC,GAAG,YAAY,CAAA,CAAA,EAAI,SAAS,CAAA,MAAA,CAAQ,CAAC,CAAC;QAC/D,IAAI,CAAC,UAAU,IAAG,wJAAK,AAAL,EAAM,GAAG,YAAY,CAAA,CAAA,EAAI,SAAS,CAAA,KAAA,CAAO,CAAC,CAAC;QAC7D,IAAI,CAAC,UAAU,kJAAG,UAAK,AAAL,EAAM,GAAG,YAAY,CAAA,CAAA,EAAI,SAAS,CAAA,KAAA,CAAO,CAAC,CAAC;QAC7D,IAAI,CAAC,WAAW,kJAAG,UAAA,AAAK,EAAC,GAAG,YAAY,CAAA,CAAA,EAAI,SAAS,CAAA,MAAA,CAAQ,CAAC,CAAC;QAE/D,IAAI,CAAC,WAAW,CAAC,KAAK,GAAG,GAAG,CAAC;QAC7B,IAAI,CAAC,UAAU,CAAC,KAAK,GAAG,GAAG,CAAC;QAC5B,IAAI,CAAC,UAAU,CAAC,KAAK,GAAG,GAAG,CAAC;QAC5B,IAAI,CAAC,WAAW,CAAC,KAAK,GAAG,GAAG,CAAC;IAC/B,CAAC;IAED,KAAK,CAAC,OAAe,EAAE,GAAG,IAAe,EAAA;QACvC,IAAI,CAAC,WAAW,CAAC,OAAO,EAAE,GAAG,IAAI,CAAC,CAAC;IACrC,CAAC;IAED,IAAI,CAAC,OAAe,EAAE,GAAG,IAAe,EAAA;QACtC,IAAI,CAAC,UAAU,CAAC,OAAO,EAAE,GAAG,IAAI,CAAC,CAAC;IACpC,CAAC;IAED,IAAI,CAAC,OAAe,EAAE,GAAG,IAAe,EAAA;QACtC,IAAI,CAAC,UAAU,CAAC,OAAO,EAAE,GAAG,IAAI,CAAC,CAAC;IACpC,CAAC;IAED,KAAK,CAAC,OAAe,EAAE,GAAG,IAAe,EAAA;QACvC,IAAI,CAAC,WAAW,CAAC,OAAO,EAAE,GAAG,IAAI,CAAC,CAAC;IACrC,CAAC;CACF;AAEM,MAAM,YAAY,GAAG,CAAC,SAAiB,EAAU,CACtD,CADwD,GACpD,WAAW,CAAC,SAAS,CAAC,CAAC;AAGtB,MAAM,OAAO,GAAG;IACrB,2BAA2B;IAC3B,MAAM,EAAE;QACN,MAAM,EAAE,YAAY,CAAC,YAAY,CAAC;QAClC,UAAU,EAAE,YAAY,CAAC,gBAAgB,CAAC;QAC1C,QAAQ,EAAE;YACR,IAAI,EAAE,YAAY,CAAC,mBAAmB,CAAC;SACxC;KACF;IACD,yBAAyB;IACzB,KAAK,EAAE;QACL,UAAU,EAAE,YAAY,CAAC,kBAAkB,CAAC;QAC5C,KAAK,EAAE,YAAY,CAAC,aAAa,CAAC;QAClC,OAAO,EAAE,YAAY,CAAC,eAAe,CAAC;KACvC;IACD,2BAA2B;IAC3B,QAAQ,EAAE;QACR,UAAU,EAAE,YAAY,CAAC,kBAAkB,CAAC;QAC5C,OAAO,EAAE,YAAY,CAAC,eAAe,CAAC;KACvC;CACO,CAAC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 71, "column": 0}, "map": {"version":3,"file":"utils.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/utils.ts"],"sourcesContent":["/**\n * Checks if a popup window is blocked by the browser.\n *\n * This function attempts to open a small popup window and then checks if it was successfully created.\n * If the popup is blocked by the browser, the function returns `true`. Otherwise, it returns `false`.\n *\n * @returns {boolean} - `true` if the popup is blocked, `false` otherwise.\n */\nexport const isPopupBlocked = (): boolean => {\n  // First we try to open a small popup window. It either returns a window object or null.\n  const popup = window.open(\"\", \"\", \"width=1,height=1\");\n\n  // If window.open() returns null, popup is definitely blocked\n  if (!popup) {\n    return true;\n  }\n\n  try {\n    // Try to access a property of the popup to check if it's usable\n    if (typeof popup.closed === \"undefined\") {\n      throw new Error(\"Popup is blocked\");\n    }\n  } catch {\n    // Accessing the popup's properties throws an error if the popup is blocked\n    return true;\n  }\n\n  // Close the popup immediately if it was opened\n  popup.close();\n  return false;\n};\n\n// This type narrows T as far as it can by:\n// - removing all keys where the value is `undefined`\n// - making keys that are not undefined required\n// So, for example: given { a: string | undefined, b: string | undefined },\n// if you pass in { a: \"foo\" }, it returns an object of type: { a: string }\ntype WithoutUndefined<T> = {\n  [K in keyof T as undefined extends T[K] ? never : K]: T[K];\n};\nexport const withoutUndefined = <T extends { [K in keyof T]: unknown }>(\n  obj: T,\n): WithoutUndefined<T> => {\n  const result = {} as WithoutUndefined<T>;\n\n  for (const key in obj) {\n    if (obj[key] !== undefined) {\n      // TypeScript needs assurance that key is a valid key in WithoutUndefined<T>\n      // We use type assertion here\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      (result as any)[key] = obj[key];\n    }\n  }\n\n  return result;\n};\n"],"names":[],"mappings":"AAAA;;;;;;;GAOG;;;;AACI,MAAM,cAAc,GAAG,GAAY,EAAE;IAC1C,wFAAwF;IACxF,MAAM,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,EAAE,kBAAkB,CAAC,CAAC;IAEtD,6DAA6D;IAC7D,IAAI,CAAC,KAAK,EAAE,CAAC;QACX,OAAO,IAAI,CAAC;IACd,CAAC;IAED,IAAI,CAAC;QACH,gEAAgE;QAChE,IAAI,OAAO,KAAK,CAAC,MAAM,KAAK,WAAW,EAAE,CAAC;YACxC,MAAM,IAAI,KAAK,CAAC,kBAAkB,CAAC,CAAC;QACtC,CAAC;IACH,CAAC,CAAC,OAAM,CAAC;QACP,2EAA2E;QAC3E,OAAO,IAAI,CAAC;IACd,CAAC;IAED,+CAA+C;IAC/C,KAAK,CAAC,KAAK,EAAE,CAAC;IACd,OAAO,KAAK,CAAC;AACf,CAAC,CAAC;AAUK,MAAM,gBAAgB,GAAG,CAC9B,GAAM,EACe,EAAE;IACvB,MAAM,MAAM,GAAG,CAAA,CAAyB,CAAC;IAEzC,IAAK,MAAM,GAAG,IAAI,GAAG,CAAE,CAAC;QACtB,IAAI,GAAG,CAAC,GAAG,CAAC,KAAK,SAAS,EAAE,CAAC;YAC3B,4EAA4E;YAC5E,6BAA6B;YAC7B,8DAA8D;YAC7D,MAAc,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,CAAC,CAAC;QAClC,CAAC;IACH,CAAC;IAED,OAAO,MAAM,CAAC;AAChB,CAAC,CAAC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 120, "column": 0}, "map": {"version":3,"file":"types.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/shared/lib/types.ts"],"sourcesContent":["import type { DisplayMode, Endpoints } from \"@/types.js\";\n\nexport enum OAuthTokenTypes {\n  ID_TOKEN = \"id_token\",\n  ACCESS_TOKEN = \"access_token\",\n  REFRESH_TOKEN = \"refresh_token\",\n  ACCESS_TOKEN_EXPIRES_AT = \"access_token_expires_at\",\n}\n\nexport const AUTH_SERVER_SESSION = \"_session\";\nexport const AUTH_SERVER_LEGACY_SESSION = \"_session.legacy\";\n\nexport enum CodeVerifier {\n  COOKIE_NAME = \"code_verifier\",\n  APP_URL = \"app_url\",\n}\nexport enum UserStorage {\n  USER = \"user\",\n}\nexport interface CookieConfig {\n  secure?: boolean;\n  sameSite?: \"strict\" | \"lax\" | \"none\";\n  domain?: string;\n  path?: string;\n  maxAge?: number;\n  httpOnly?: boolean;\n}\nexport type KeySetter = OAuthTokenTypes | CodeVerifier | UserStorage;\n\nexport type TokensCookieConfig = Record<\n  OAuthTokenTypes | CodeVerifier,\n  CookieConfig\n>;\n\nexport type CivicAuthConfig = null | {\n  clientId: string;\n  redirectUrl: string;\n  logoutRedirectUrl: string;\n  oauthServer: string;\n  endpoints: Endpoints;\n  scopes: string[];\n  nonce?: string;\n  challengeUrl?: string;\n  refreshUrl?: string;\n  logoutUrl?: string;\n  displayMode?: DisplayMode;\n};\n"],"names":[],"mappings":";;;;;;;AAEA,IAAY,eAKX;AALD,CAAA,SAAY,eAAe;IACzB,eAAA,CAAA,WAAA,GAAA,UAAqB,CAAA;IACrB,eAAA,CAAA,eAAA,GAAA,cAA6B,CAAA;IAC7B,eAAA,CAAA,gBAAA,GAAA,eAA+B,CAAA;IAC/B,eAAA,CAAA,0BAAA,GAAA,yBAAmD,CAAA;AACrD,CAAC,EALW,eAAe,IAAA,CAAf,eAAe,GAAA,CAAA,CAAA,GAK1B;AAEM,MAAM,mBAAmB,GAAG,UAAU,CAAC;AACvC,MAAM,0BAA0B,GAAG,iBAAiB,CAAC;AAE5D,IAAY,YAGX;AAHD,CAAA,SAAY,YAAY;IACtB,YAAA,CAAA,cAAA,GAAA,eAA6B,CAAA;IAC7B,YAAA,CAAA,UAAA,GAAA,SAAmB,CAAA;AACrB,CAAC,EAHW,YAAY,IAAA,CAAZ,YAAY,GAAA,CAAA,CAAA,GAGvB;AACD,IAAY,WAEX;AAFD,CAAA,SAAY,WAAW;IACrB,WAAA,CAAA,OAAA,GAAA,MAAa,CAAA;AACf,CAAC,EAFW,WAAW,IAAA,CAAX,WAAW,GAAA,CAAA,CAAA,GAEtB","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 151, "column": 0}, "map": {"version":3,"file":"constants.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/constants.ts"],"sourcesContent":["const DEFAULT_SCOPES = [\n  \"openid\",\n  \"profile\",\n  \"email\",\n  \"forwardedTokens\",\n  \"offline_access\",\n];\nconst DEFAULT_AUTH_SERVER = \"https://auth.civic.com/oauth\";\n\nconst DEFAULT_OAUTH_GET_PARAMS = [\"code\", \"state\", \"iss\"];\n\nconst DEFAULT_EXPIRES_IN = 3600; // 1 hour in seconds\n\n// The server's callback handler renders this text if it needs the front-end to make an additional token exchange call,\n// for the iframe case where cookies are not sent along with the initial redirect.\nconst TOKEN_EXCHANGE_TRIGGER_TEXT = \"sameDomainCodeExchangeRequired\";\n\nconst TOKEN_EXCHANGE_SUCCESS_TEXT = \"serverSideTokenExchangeSuccess\";\n\nconst DEFAULT_DISPLAY_MODE = \"iframe\";\nconst JWT_PAYLOAD_KNOWN_CLAIM_KEYS = [\n  \"iss\",\n  \"aud\",\n  \"sub\",\n  \"iat\",\n  \"exp\",\n] as const;\n\nconst AUTOREFRESH_TIMEOUT_NAME = \"civicAuthAutorefreshTimeout\";\nconst REFRESH_IN_PROGRESS = \"civicAuthRefreshInProgress\";\nconst LOGOUT_STATE = \"logout_state\";\nconst DARK_BACKGROUND_COLOR = \"rgb(30, 41, 59)\";\nconst LIGHT_BACKGROUND_COLOR = \"white\";\nexport {\n  DEFAULT_SCOPES,\n  DEFAULT_OAUTH_GET_PARAMS,\n  DEFAULT_DISPLAY_MODE,\n  DEFAULT_AUTH_SERVER,\n  DEFAULT_EXPIRES_IN,\n  TOKEN_EXCHANGE_TRIGGER_TEXT,\n  TOKEN_EXCHANGE_SUCCESS_TEXT,\n  JWT_PAYLOAD_KNOWN_CLAIM_KEYS,\n  AUTOREFRESH_TIMEOUT_NAME,\n  REFRESH_IN_PROGRESS,\n  DARK_BACKGROUND_COLOR,\n  LIGHT_BACKGROUND_COLOR,\n  LOGOUT_STATE,\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA,MAAM,cAAc,GAAG;IACrB,QAAQ;IACR,SAAS;IACT,OAAO;IACP,iBAAiB;IACjB,gBAAgB;CACjB,CAAC;AACF,MAAM,mBAAmB,GAAG,8BAA8B,CAAC;AAE3D,MAAM,wBAAwB,GAAG;IAAC,MAAM;IAAE,OAAO;IAAE,KAAK;CAAC,CAAC;AAE1D,MAAM,kBAAkB,GAAG,IAAI,CAAC,CAAC,oBAAoB;AAErD,uHAAuH;AACvH,kFAAkF;AAClF,MAAM,2BAA2B,GAAG,gCAAgC,CAAC;AAErE,MAAM,2BAA2B,GAAG,gCAAgC,CAAC;AAErE,MAAM,oBAAoB,GAAG,QAAQ,CAAC;AACtC,MAAM,4BAA4B,GAAG;IACnC,KAAK;IACL,KAAK;IACL,KAAK;IACL,KAAK;IACL,KAAK;CACG,CAAC;AAEX,MAAM,wBAAwB,GAAG,6BAA6B,CAAC;AAC/D,MAAM,mBAAmB,GAAG,4BAA4B,CAAC;AACzD,MAAM,YAAY,GAAG,cAAc,CAAC;AACpC,MAAM,qBAAqB,GAAG,iBAAiB,CAAC;AAChD,MAAM,sBAAsB,GAAG,OAAO,CAAC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 205, "column": 0}, "map": {"version":3,"file":"utils.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/nextjs/utils.ts"],"sourcesContent":["import type { AuthConfigWithDefaults } from \"@/nextjs/config.js\";\n\nexport const resolveCallbackUrl = (\n  config: AuthConfigWithDefaults,\n  baseUrl?: string,\n): string => {\n  const callbackUrl = new URL(config?.callbackUrl, baseUrl).toString();\n  return callbackUrl.toString();\n};\n\nexport function sanitizeBasePath(path: string): string {\n  if (!path || path === \"/\") return \"\";\n\n  // Ensure it starts with a slash\n  const withLeadingSlash = path.startsWith(\"/\") ? path : `/${path}`;\n\n  // Remove all trailing slashes (not just one)\n  return withLeadingSlash.replace(/\\/+$/, \"\");\n}\n"],"names":[],"mappings":";;;;AAEO,MAAM,kBAAkB,GAAG,CAChC,MAA8B,EAC9B,OAAgB,EACR,EAAE;IACV,MAAM,WAAW,GAAG,IAAI,GAAG,CAAC,MAAM,EAAE,WAAW,EAAE,OAAO,CAAC,CAAC,QAAQ,EAAE,CAAC;IACrE,OAAO,WAAW,CAAC,QAAQ,EAAE,CAAC;AAChC,CAAC,CAAC;AAEI,SAAU,gBAAgB,CAAC,IAAY;IAC3C,IAAI,CAAC,IAAI,IAAI,IAAI,KAAK,GAAG,EAAE,OAAO,EAAE,CAAC;IAErC,gCAAgC;IAChC,MAAM,gBAAgB,GAAG,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAA,CAAA,EAAI,IAAI,EAAE,CAAC;IAElE,6CAA6C;IAC7C,OAAO,gBAAgB,CAAC,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;AAC9C,CAAC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 226, "column": 0}, "map": {"version":3,"file":"config.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/nextjs/config.ts"],"sourcesContent":["/* eslint-disable turbo/no-undeclared-env-vars */\nimport type { NextConfig } from \"next\";\nimport { loggers } from \"@/lib/logger.js\";\nimport { withoutUndefined } from \"@/utils.js\";\nimport {\n  CodeVerifier,\n  type CookieConfig,\n  OAuthTokenTypes,\n  type TokensCookieConfig,\n} from \"@/shared/lib/types.js\";\nimport { DEFAULT_AUTH_SERVER } from \"@/constants.js\";\nimport { merge } from \"ts-deepmerge\";\nimport { sanitizeBasePath } from \"./utils.js\";\n\nconst logger = loggers.nextjs.handlers.auth;\n\nexport type CookiesConfigObject = {\n  tokens: TokensCookieConfig;\n  user: CookieConfig;\n};\n\n/**\n * Configuration values for Civic Auth.\n * Only clientId is required, all others are optional.\n */\nexport type AuthConfigWithDefaults = {\n  clientId: string;\n  oauthServer: string;\n  callbackUrl: string;\n  loginUrl: string;\n  logoutUrl: string;\n  logoutCallbackUrl: string;\n  challengeUrl: string;\n  refreshUrl: string;\n  include: string[];\n  exclude: string[];\n  cookies: CookiesConfigObject;\n  basePath?: string;\n};\n\n/**\n * All possible config values for Civic Auth\n */\nexport type OptionalAuthConfig = Partial<\n  | AuthConfigWithDefaults\n  | {\n      cookies?: {\n        tokens?: Partial<TokensCookieConfig>;\n        user?: CookieConfig;\n      };\n    }\n> & {\n  // Ensure TypeScript understands these properties are available\n  // This doesn't change the public API, just helps TypeScript internally\n  callbackUrl?: string;\n  loginUrl?: string;\n  logoutUrl?: string;\n  logoutCallbackUrl?: string;\n  challengeUrl?: string;\n  refreshUrl?: string;\n  include?: string[];\n  exclude?: string[];\n  basePath?: string;\n  oauthServer?: string;\n};\n\n/**\n * Configuration values for Civic Auth.\n * Only clientId is required, all others are optional.\n */\nexport type AuthConfig = OptionalAuthConfig & {\n  clientId: string;\n  exclude?: string[];\n};\n\nconst defaultServerSecure = !(process.env.NODE_ENV === \"development\");\nconst defaultCookiesMaxAge = 60 * 60; // 1 hour\n\n/**\n * Default configuration values that will be used if not overridden\n */\nexport const defaultAuthConfig: Omit<AuthConfigWithDefaults, \"clientId\"> = {\n  oauthServer: DEFAULT_AUTH_SERVER,\n  callbackUrl: \"/api/auth/callback\",\n  challengeUrl: \"/api/auth/challenge\",\n  refreshUrl: \"/api/auth/refresh\",\n  logoutUrl: \"/api/auth/logout\",\n  logoutCallbackUrl: \"/api/auth/logoutcallback\",\n  loginUrl: \"/\",\n  include: [\"/**\"],\n  exclude: [\"/api/auth/**\"],\n  basePath: \"\",\n  cookies: {\n    tokens: {\n      [OAuthTokenTypes.ID_TOKEN]: {\n        secure: defaultServerSecure,\n        httpOnly: true,\n        sameSite: \"strict\",\n        path: \"/\",\n        maxAge: defaultCookiesMaxAge,\n      },\n      [OAuthTokenTypes.ACCESS_TOKEN]: {\n        secure: defaultServerSecure,\n        httpOnly: true,\n        sameSite: \"strict\",\n        path: \"/\",\n        maxAge: defaultCookiesMaxAge,\n      },\n      [OAuthTokenTypes.REFRESH_TOKEN]: {\n        secure: defaultServerSecure,\n        httpOnly: true,\n        sameSite: \"strict\",\n        path: \"/\",\n        maxAge: defaultCookiesMaxAge,\n      },\n      [OAuthTokenTypes.ACCESS_TOKEN_EXPIRES_AT]: {\n        secure: defaultServerSecure,\n        httpOnly: false, // we need this to be available client-side\n        sameSite: \"strict\",\n        path: \"/\",\n        maxAge: defaultCookiesMaxAge,\n      },\n      [CodeVerifier.COOKIE_NAME]: {\n        secure: defaultServerSecure,\n        httpOnly: true,\n        sameSite: \"strict\",\n        path: \"/\",\n        maxAge: defaultCookiesMaxAge,\n      },\n      [CodeVerifier.APP_URL]: {\n        secure: defaultServerSecure,\n        httpOnly: true,\n        sameSite: \"strict\",\n        path: \"/\",\n        maxAge: defaultCookiesMaxAge,\n      },\n    },\n    user: {\n      secure: defaultServerSecure,\n      httpOnly: false, // we need this to be available client-side\n      sameSite: \"strict\",\n      path: \"/\",\n      maxAge: defaultCookiesMaxAge,\n    },\n  },\n};\n\n/**\n * Resolves the authentication configuration by combining:\n * 1. Default values\n * 2. Environment variables (set internally by the plugin)\n * 3. Explicitly passed configuration\n *\n * Config will be merged deeply, with arrays not merged, so that the\n * default include list (for example) [\"/*\"] will not be added\n *\n * Note: Developers should not set _civic_auth_* environment variables directly.\n * Instead, pass configuration to the createCivicAuthPlugin in next.config.js:\n *\n * @example\n * ```js\n * // next.config.js\n * export default createCivicAuthPlugin({\n *   callbackUrl: '/custom/callback',\n * })\n * ```\n */\nexport const resolveAuthConfig = (\n  config: Partial<AuthConfig> = {},\n): AuthConfigWithDefaults => {\n  // Read configuration that was set by the plugin via environment variables\n  const configFromEnv = withoutUndefined({\n    clientId: process.env._civic_auth_client_id,\n    oauthServer: process.env._civic_oauth_server,\n    callbackUrl: process.env._civic_auth_callback_url,\n    challengeUrl: process.env._civic_auth_challenge_url,\n    loginUrl: process.env._civic_auth_login_url,\n    logoutUrl: process.env._civic_auth_logout_url,\n    logoutCallbackUrl: process.env._civic_auth_logout_callback_url,\n    refreshUrl: process.env._civic_auth_refresh_url,\n    include: process.env._civic_auth_includes?.split(\",\"),\n    exclude: process.env._civic_auth_excludes?.split(\",\"),\n    cookies: process.env._civic_auth_cookie_config\n      ? JSON.parse(process.env._civic_auth_cookie_config)\n      : undefined,\n    basePath: process.env._civic_auth_base_path || \"\",\n  }) as AuthConfig;\n\n  // Ensure \"/api/auth/**\" is always excluded\n  const finalExclude = new Set([\n    ...defaultAuthConfig.exclude,\n    ...(configFromEnv.exclude || []),\n    ...(config.exclude ?? []),\n  ]);\n\n  // Perform a deep merge of the configurations\n  const mergedConfig = merge.withOptions(\n    { mergeArrays: false },\n    defaultAuthConfig,\n    configFromEnv,\n    config,\n  );\n\n  // Override the exclude list with the ensured list\n  mergedConfig.exclude = Array.from(finalExclude);\n\n  logger.debug(\n    \"Config from environment:\",\n    JSON.stringify(configFromEnv, null, 2),\n  );\n  logger.debug(\"Resolved config:\", JSON.stringify(mergedConfig, null, 2));\n\n  if (mergedConfig.clientId === undefined) {\n    throw new Error(\"Civic Auth client ID is required\");\n  }\n\n  return mergedConfig as AuthConfigWithDefaults & { clientId: string };\n};\n\n/**\n * Creates a Next.js plugin that handles auth configuration.\n *\n * This is the main configuration point for the auth system.\n * Do not set _civic_auth_* environment variables directly - instead,\n * pass your configuration here.\n *\n * The only required field is clientId.\n *\n * Notes:\n * - If you provide explicit URLs, they will be used exactly as provided.\n * - Default URLs will automatically include the basePath from your Next.js config.\n *\n * @example\n * ```js\n * // next.config.js\n * export default createCivicAuthPlugin({\n *  clientId: 'my-client-id',\n * });\n * ```\n *\n * @example\n * ```js\n * // next.config.js\n * export default createCivicAuthPlugin({\n *   clientId: 'my-client-id',\n *   callbackUrl: '/custom/callback',\n *   loginUrl: '/custom/login',\n *   logoutUrl: '/custom/logout',\n *   logoutCallbackUrl: '/custom/logoutcallback',\n *   include: ['/protected/*'],\n *   exclude: ['/public/*']\n * })\n * ```\n *\n * The plugin sets internal environment variables that are used by\n * the auth system. These variables should not be set manually.\n */\nexport const createCivicAuthPlugin = (authConfig: AuthConfig) => {\n  return (nextConfig?: NextConfig) => {\n    logger.debug(\n      \"createCivicAuthPlugin nextConfig\",\n      JSON.stringify(nextConfig, null, 2),\n    );\n\n    // Extract basePath from Next.js config\n    const basePath = sanitizeBasePath(nextConfig?.basePath || \"\");\n\n    // Create a copy of default URLs with basePath added\n    const defaultUrlsWithBasePath: Partial<AuthConfig> = {};\n\n    // Only apply to URLs that aren't explicitly set in authConfig\n    if (basePath) {\n      if (!authConfig.callbackUrl)\n        defaultUrlsWithBasePath.callbackUrl = `${basePath}/api/auth/callback`;\n      if (!authConfig.challengeUrl)\n        defaultUrlsWithBasePath.challengeUrl = `${basePath}/api/auth/challenge`;\n      if (!authConfig.refreshUrl)\n        defaultUrlsWithBasePath.refreshUrl = `${basePath}/api/auth/refresh`;\n      if (!authConfig.logoutUrl)\n        defaultUrlsWithBasePath.logoutUrl = `${basePath}/api/auth/logout`;\n      if (!authConfig.logoutCallbackUrl)\n        defaultUrlsWithBasePath.logoutCallbackUrl = `${basePath}/api/auth/logoutcallback`;\n      if (!authConfig.loginUrl && authConfig.loginUrl !== \"\")\n        defaultUrlsWithBasePath.loginUrl = basePath;\n    }\n\n    // Create final config with basePath and possibly modified URLs\n    const resolvedConfig = resolveAuthConfig({\n      ...defaultUrlsWithBasePath,\n      ...authConfig,\n      basePath,\n    });\n\n    return {\n      ...nextConfig,\n      env: {\n        ...nextConfig?.env,\n        // Internal environment variables - do not set these manually\n        _civic_auth_client_id: resolvedConfig.clientId,\n        _civic_oauth_server: resolvedConfig.oauthServer,\n        _civic_auth_callback_url: resolvedConfig.callbackUrl,\n        _civic_auth_challenge_url: resolvedConfig.challengeUrl,\n        _civic_auth_login_url: resolvedConfig.loginUrl,\n        _civic_auth_logout_url: resolvedConfig.logoutUrl,\n        _civic_auth_logout_callback_url: resolvedConfig.logoutCallbackUrl,\n        _civic_auth_refresh_url: resolvedConfig.refreshUrl,\n        _civic_auth_includes: resolvedConfig.include.join(\",\"),\n        _civic_auth_excludes: resolvedConfig.exclude.join(\",\"),\n        _civic_auth_cookie_config: JSON.stringify(resolvedConfig.cookies),\n        _civic_auth_base_path: resolvedConfig.basePath,\n      },\n    };\n  };\n};\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 400, "column": 0}, "map": {"version":3,"file":"oauth.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/lib/oauth.ts"],"sourcesContent":["import type { DisplayMode, Endpoints, OpenIdConfiguration } from \"@/types.js\";\nimport { v4 as uuid } from \"uuid\";\n\nconst getIssuerVariations = (issuer: string): string[] => {\n  const issuerWithoutSlash = issuer.endsWith(\"/\")\n    ? issuer.slice(0, issuer.length - 1)\n    : issuer;\n\n  const issuerWithSlash = `${issuerWithoutSlash}/`;\n\n  return [issuerWithoutSlash, issuerWithSlash];\n};\n\nconst addSlashIfNeeded = (url: string): string =>\n  url.endsWith(\"/\") ? url : `${url}/`;\n\nconst cache: { [key: string]: Endpoints } = {};\nconst getOauthEndpoints = async (oauthServer: string): Promise<Endpoints> => {\n  if (cache[oauthServer]) {\n    return cache[oauthServer];\n  }\n  const openIdConfigResponse = await fetch(\n    `${addSlashIfNeeded(oauthServer)}.well-known/openid-configuration`,\n  );\n  const openIdConfig =\n    (await openIdConfigResponse.json()) as OpenIdConfiguration;\n  const endpoints: Endpoints = {\n    jwks: openIdConfig.jwks_uri,\n    auth: openIdConfig.authorization_endpoint,\n    token: openIdConfig.token_endpoint,\n    userinfo: openIdConfig.userinfo_endpoint,\n    endsession: openIdConfig.end_session_endpoint,\n  };\n\n  cache[oauthServer] = endpoints;\n  return endpoints;\n};\n\n/**\n * creates a state string for the OAuth2 flow, encoding the display mode too for future use\n * @param {DisplayMode} displayMode\n * @returns {string}\n */\nconst generateState = (\n  displayMode: DisplayMode,\n  serverTokenExchange?: boolean,\n): string => {\n  const jsonString = JSON.stringify({\n    uuid: uuid(),\n    displayMode,\n    ...(serverTokenExchange ? { serverTokenExchange } : {}),\n  });\n  return btoa(jsonString);\n};\n\n/**\n * parses the state string from the OAuth2 flow, decoding the display mode too\n * @param state\n * @param sessionDisplayMode\n * @returns { uuid: string, displayMode: DisplayMode }\n */\nconst displayModeFromState = (\n  state: string,\n  sessionDisplayMode: DisplayMode | undefined,\n): DisplayMode | undefined => {\n  try {\n    const jsonString = atob(state);\n    return JSON.parse(jsonString).displayMode;\n  } catch (e) {\n    console.error(\"Failed to parse displayMode from state:\", state, e);\n    return sessionDisplayMode;\n  }\n};\n\nconst serverTokenExchangeFromState = (state: string): boolean | undefined => {\n  try {\n    const jsonString = atob(state);\n    return JSON.parse(jsonString).serverTokenExchange;\n  } catch {\n    console.error(\"Failed to parse serverTokenExchange from state:\", state);\n    return undefined;\n  }\n};\n\nexport {\n  serverTokenExchangeFromState,\n  getIssuerVariations,\n  getOauthEndpoints,\n  displayModeFromState,\n  generateState,\n};\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 480, "column": 0}, "map": {"version":3,"file":"jwt.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/lib/jwt.ts"],"sourcesContent":["import type { ForwardedTokens, ForwardedTokensJWT } from \"@/types.js\";\n\nexport const convertForwardedTokenFormat = (\n  inputTokens: ForwardedTokensJWT,\n): ForwardedTokens =>\n  Object.fromEntries(\n    Object.entries(inputTokens).map(([source, tokens]) => [\n      source,\n      {\n        idToken: tokens?.id_token,\n        accessToken: tokens?.access_token,\n        refreshToken: tokens?.refresh_token,\n      },\n    ]),\n  );\n"],"names":[],"mappings":";;;AAEO,MAAM,2BAA2B,GAAG,CACzC,WAA+B,EACd,CACjB,CADmB,KACb,CAAC,WAAW,CAChB,MAAM,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,EAAE,MAAM,CAAC,EAAE,CAAG,CAAD;YACnD,MAAM;YACN;gBACE,OAAO,EAAE,MAAM,EAAE,QAAQ;gBACzB,WAAW,EAAE,MAAM,EAAE,YAAY;gBACjC,YAAY,EAAE,MAAM,EAAE,aAAa;aACpC;SACF,CAAC,CACH,CAAC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 497, "column": 0}, "map": {"version":3,"file":"UserSession.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/shared/lib/UserSession.ts"],"sourcesContent":["import type {\n  AuthStorage,\n  ForwardedTokensJWT,\n  UnknownObject,\n  User,\n} from \"@/types.js\";\nimport { UserStorage } from \"@/shared/lib/types.js\";\nimport { convertForwardedTokenFormat } from \"@/lib/jwt.js\";\n\nexport interface UserSession<T extends UnknownObject> {\n  get(): Promise<User<T> | null>;\n  set(user: User<T> & { forwardedTokens?: ForwardedTokensJWT }): Promise<void>;\n}\n\nexport class GenericUserSession<T extends UnknownObject>\n  implements UserSession<T>\n{\n  constructor(readonly storage: AuthStorage) {}\n\n  async get(): Promise<User<T> | null> {\n    const user = await this.storage.get(UserStorage.USER);\n    return user ? JSON.parse(user) : null;\n  }\n\n  async set(\n    user: (User<T> & { forwardedTokens?: ForwardedTokensJWT }) | null,\n  ): Promise<void> {\n    const forwardedTokens = user?.forwardedTokens\n      ? convertForwardedTokenFormat(user?.forwardedTokens as ForwardedTokensJWT)\n      : null;\n    const value = user ? JSON.stringify({ ...user, forwardedTokens }) : \"\";\n    await this.storage.set(UserStorage.USER, value);\n  }\n\n  async clear(): Promise<void> {\n    await this.storage.delete(UserStorage.USER);\n  }\n}\n"],"names":[],"mappings":";;;AAMA,OAAO,EAAE,WAAW,EAAE,MAAM,uBAAuB,CAAC;AACpD,OAAO,EAAE,2BAA2B,EAAE,MAAM,cAAc,CAAC;;;AAOrD,MAAO,kBAAkB;IAGR,QAAA;IAArB,YAAqB,OAAoB,CAAA;QAApB,IAAA,CAAA,OAAO,GAAP,OAAO,CAAa;IAAG,CAAC;IAE7C,KAAK,CAAC,GAAG,GAAA;QACP,MAAM,IAAI,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,8NAAW,CAAC,IAAI,CAAC,CAAC;QACtD,OAAO,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;IACxC,CAAC;IAED,KAAK,CAAC,GAAG,CACP,IAAiE,EAAA;QAEjE,MAAM,eAAe,GAAG,IAAI,EAAE,eAAe,2MACzC,8BAAA,AAA2B,EAAC,IAAI,EAAE,eAAqC,CAAC,GACxE,IAAI,CAAC;QACT,MAAM,KAAK,GAAG,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC;YAAE,GAAG,IAAI;YAAE,eAAe;QAAA,CAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;QACvE,MAAM,IAAI,CAAC,OAAO,CAAC,GAAG,iNAAC,cAAW,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;IAClD,CAAC;IAED,KAAK,CAAC,KAAK,GAAA;QACT,MAAM,IAAI,CAAC,OAAO,CAAC,MAAM,iNAAC,cAAW,CAAC,IAAI,CAAC,CAAC;IAC9C,CAAC;CACF","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 531, "column": 0}, "map": {"version":3,"file":"util.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/shared/lib/util.ts"],"sourcesContent":["// Utility functions shared by auth server and client integrations\n// Typically these functions should be used inside AuthenticationInitiator and AuthenticationResolver implementations\nimport type {\n  AuthStorage,\n  Endpoints,\n  OIDCTokenResponseBody,\n  ParsedTokens,\n} from \"@/types.js\";\nimport {\n  AUTH_SERVER_LEGACY_SESSION,\n  AUTH_SERVER_SESSION,\n  OAuthTokenTypes,\n} from \"./types.js\";\nimport { OAuth2Client } from \"oslo/oauth2\";\nimport { getIssuerVariations, getOauthEndpoints } from \"@/lib/oauth.js\";\nimport * as jose from \"jose\";\nimport { withoutUndefined } from \"@/utils.js\";\nimport type { PKCEConsumer, PKCEProducer } from \"@/services/types.js\";\nimport { GenericUserSession } from \"@/shared/lib/UserSession.js\";\nimport { decodeJwt, type JWTPayload } from \"jose\";\nimport type { CookieStorage } from \"./storage.js\";\nimport {\n  AUTOREFRESH_TIMEOUT_NAME,\n  LOGOUT_STATE,\n  REFRESH_IN_PROGRESS,\n} from \"@/constants.js\";\nimport { loggers } from \"@/lib/logger.js\";\n\nconst logger = loggers.services.validation;\n/**\n * Given a PKCE code verifier, derive the code challenge using SHA\n */\nexport async function deriveCodeChallenge(\n  codeVerifier: string,\n  method: \"Plain\" | \"S256\" = \"S256\",\n): Promise<string> {\n  if (method === \"Plain\") {\n    console.warn(\"Using insecure plain code challenge method\");\n    return codeVerifier;\n  }\n\n  const encoder = new TextEncoder();\n  const data = encoder.encode(codeVerifier);\n  const digest = await crypto.subtle.digest(\"SHA-256\", data);\n  return btoa(String.fromCharCode(...new Uint8Array(digest)))\n    .replace(/\\+/g, \"-\")\n    .replace(/\\//g, \"_\")\n    .replace(/=+$/, \"\");\n}\n\nexport async function getEndpointsWithOverrides(\n  oauthServer: string,\n  endpointOverrides: Partial<Endpoints> = {},\n): Promise<Endpoints> {\n  const endpoints = await getOauthEndpoints(oauthServer);\n  return {\n    ...endpoints,\n    ...endpointOverrides,\n  };\n}\n\nexport async function generateOauthLoginUrl(config: {\n  clientId: string;\n  scopes: string[];\n  state: string;\n  redirectUrl: string;\n  oauthServer: string;\n  nonce?: string;\n  endpointOverrides?: Partial<Endpoints>;\n  // used to get the PKCE challenge\n  pkceConsumer: PKCEConsumer;\n}): Promise<URL> {\n  const endpoints = await getEndpointsWithOverrides(\n    config.oauthServer,\n    config.endpointOverrides,\n  );\n  const oauth2Client = buildOauth2Client(\n    config.clientId,\n    config.redirectUrl,\n    endpoints,\n  );\n  const challenge = await config.pkceConsumer.getCodeChallenge();\n  const oAuthUrl = await oauth2Client.createAuthorizationURL({\n    state: config.state,\n    scopes: config.scopes,\n  });\n  // The OAuth2 client supports PKCE, but does not allow passing in a code challenge from some other source\n  // It only allows passing in a code verifier which it then hashes itself.\n  oAuthUrl.searchParams.append(\"code_challenge\", challenge);\n  oAuthUrl.searchParams.append(\"code_challenge_method\", \"S256\");\n  if (config.nonce) {\n    // nonce isn't supported by oslo, so we add it manually\n    oAuthUrl.searchParams.append(\"nonce\", config.nonce);\n  }\n  // Required by the auth server for offline_access scope\n  oAuthUrl.searchParams.append(\"prompt\", \"consent\");\n\n  return oAuthUrl;\n}\n\nexport async function generateOauthLogoutUrl(config: {\n  clientId: string;\n  redirectUrl: string;\n  idToken: string;\n  state: string;\n  oauthServer: string;\n  endpointOverrides?: Partial<Endpoints>;\n}): Promise<URL> {\n  const endpoints = await getEndpointsWithOverrides(\n    config.oauthServer,\n    config.endpointOverrides,\n  );\n  const endSessionUrl = new URL(endpoints.endsession);\n  endSessionUrl.searchParams.append(\"client_id\", config.clientId);\n  endSessionUrl.searchParams.append(\"id_token_hint\", config.idToken);\n  endSessionUrl.searchParams.append(\"state\", config.state);\n  endSessionUrl.searchParams.append(\n    \"post_logout_redirect_uri\",\n    config.redirectUrl,\n  );\n  return endSessionUrl;\n}\n\nexport function buildOauth2Client(\n  clientId: string,\n  redirectUri: string,\n  endpoints: Endpoints,\n): OAuth2Client {\n  return new OAuth2Client(clientId, endpoints.auth, endpoints.token, {\n    redirectURI: redirectUri,\n  });\n}\n\nexport async function exchangeTokens(\n  code: string,\n  state: string,\n  pkceProducer: PKCEProducer,\n  oauth2Client: OAuth2Client,\n  oauthServer: string,\n  endpoints: Endpoints,\n) {\n  const codeVerifier = await pkceProducer.getCodeVerifier();\n  if (!codeVerifier) throw new Error(\"Code verifier not found in state\");\n\n  const tokens =\n    await oauth2Client.validateAuthorizationCode<OIDCTokenResponseBody>(code, {\n      codeVerifier,\n    });\n\n  // Validate relevant tokens\n  try {\n    await validateOauth2Tokens(\n      tokens,\n      endpoints.jwks,\n      oauth2Client,\n      oauthServer,\n    );\n  } catch (error) {\n    console.error(\"tokenExchange error\", { error, tokens });\n    throw new Error(\n      `OIDC tokens validation failed: ${(error as Error).message}`,\n    );\n  }\n  return tokens;\n}\n/**\n * Calculates the maxAge values for access and refresh token cookies\n * based on the TTL values in the access token\n *\n * maxAge needs to be in seconds from now until expiration\n *\n * @param tokens OIDC tokens response containing the access token\n * @returns Object with accessTokenMaxAge and refreshTokenMaxAge in seconds\n */\nexport const getCookiesMaxAge = (\n  tokens: OIDCTokenResponseBody,\n): { accessTokenMaxAge: number; refreshTokenMaxAge: number } => {\n  const parsedAccessToken = decodeJwt(tokens.access_token);\n\n  // Get TTL values from the token or use defaults\n  const accessTokenTTL = Number(parsedAccessToken?.accessTokenTTL) || 60 * 60; // 1 hour default\n  const refreshTokenTTL =\n    Number(parsedAccessToken?.refreshTokenTTL) || 60 * 60 * 24 * 30; // 30 days default\n\n  // Calculate maxAge as TTL values directly (they represent seconds from now)\n  // This is correct because TTL values represent the lifetime of the token\n  const accessTokenMaxAge = accessTokenTTL;\n  const refreshTokenMaxAge = refreshTokenTTL;\n\n  return {\n    accessTokenMaxAge,\n    refreshTokenMaxAge,\n  };\n};\nexport const getAccessTokenExpiresAt = (\n  tokens: OIDCTokenResponseBody,\n): number => {\n  const parsedAccessToken = decodeJwt(tokens.access_token);\n  if (parsedAccessToken?.exp || false) {\n    return parsedAccessToken.exp;\n  } else if (tokens.expires_in) {\n    const now = Math.floor(new Date().getTime() / 1000);\n    return now + tokens.expires_in;\n  } else {\n    throw new Error(\"Cannot determine access token expiry!\");\n  }\n};\nexport async function setAccessTokenExpiresAt(\n  storage: AuthStorage | CookieStorage,\n  tokens: OIDCTokenResponseBody,\n) {\n  // try to extract absolute expiry time from access token but fallback to calculation if not possible\n  const accessTokenExpiresAt = getAccessTokenExpiresAt(tokens);\n  await storage.set(\n    OAuthTokenTypes.ACCESS_TOKEN_EXPIRES_AT,\n    accessTokenExpiresAt.toString(),\n  );\n}\n\nexport async function storeTokens(\n  storage: AuthStorage,\n  tokens: OIDCTokenResponseBody,\n) {\n  await storage.set(OAuthTokenTypes.ID_TOKEN, tokens.id_token);\n  await storage.set(OAuthTokenTypes.ACCESS_TOKEN, tokens.access_token);\n  if (tokens.refresh_token) {\n    await storage.set(OAuthTokenTypes.REFRESH_TOKEN, tokens.refresh_token);\n  }\n  await setAccessTokenExpiresAt(storage, tokens);\n}\n\n/**\n * Stores tokens in server-side cookies with appropriate expiration times\n * Uses TTL values from the tokens to set cookie maxAge values\n */\nexport async function storeServerTokens(\n  storage: AuthStorage | CookieStorage,\n  tokens: OIDCTokenResponseBody,\n) {\n  const accessTokenExpiresAt = getAccessTokenExpiresAt(tokens);\n  const cookieStorage = storage as CookieStorage;\n  const now = Math.floor(Date.now() / 1000);\n\n  // Get maxAge values based on token TTLs\n  const { refreshTokenMaxAge, accessTokenMaxAge } = getCookiesMaxAge(tokens);\n\n  // Apply maxAge to cookie options\n  const accessTokenCookieOptions = {\n    maxAge: accessTokenMaxAge,\n  };\n\n  const refreshTokenCookieOptions = {\n    maxAge: refreshTokenMaxAge,\n  };\n\n  // Set ID token with expiry based on the exp claim\n  const idTokenExpiry = decodeJwt(tokens.id_token)?.exp;\n  const idTokenMaxAge = idTokenExpiry ? idTokenExpiry - now : accessTokenMaxAge;\n\n  await cookieStorage.set(OAuthTokenTypes.ID_TOKEN, tokens.id_token, {\n    maxAge: idTokenMaxAge,\n  });\n\n  // Set access token\n  await cookieStorage.set(\n    OAuthTokenTypes.ACCESS_TOKEN,\n    tokens.access_token,\n    accessTokenCookieOptions,\n  );\n\n  // Set refresh token if present\n  if (tokens.refresh_token) {\n    await cookieStorage.set(\n      OAuthTokenTypes.REFRESH_TOKEN,\n      tokens.refresh_token,\n      refreshTokenCookieOptions,\n    );\n  }\n\n  // Store the access token expiration timestamp\n  await storage.set(\n    OAuthTokenTypes.ACCESS_TOKEN_EXPIRES_AT,\n    accessTokenExpiresAt.toString(),\n    accessTokenCookieOptions,\n  );\n  logger.debug(\"storeServerTokens\", {\n    accessTokenExpiresAt,\n    refreshTokenMaxAge,\n    accessTokenMaxAge,\n    idTokenMaxAge,\n  });\n}\n\nexport async function clearTokens(storage: AuthStorage) {\n  // clear all local storage keys related to OAuth and CivicAuth SDK\n  const clearOAuthPromises = [\n    ...Object.values(OAuthTokenTypes),\n    REFRESH_IN_PROGRESS,\n    AUTOREFRESH_TIMEOUT_NAME,\n    LOGOUT_STATE,\n  ].map(async (key) => {\n    await storage.delete(key);\n  });\n  await Promise.all([...clearOAuthPromises]);\n}\n\nexport async function clearAuthServerSession(storage: AuthStorage) {\n  await storage.delete(AUTH_SERVER_SESSION);\n  await storage.delete(AUTH_SERVER_LEGACY_SESSION);\n}\n\nexport async function clearUser(storage: AuthStorage) {\n  const userSession = new GenericUserSession(storage);\n  await userSession.clear();\n}\n\nexport async function retrieveTokens(\n  storage: AuthStorage,\n): Promise<Partial<OIDCTokenResponseBody> | null> {\n  const idToken = await storage.get(OAuthTokenTypes.ID_TOKEN);\n  const accessToken = await storage.get(OAuthTokenTypes.ACCESS_TOKEN);\n  const refreshToken = await storage.get(OAuthTokenTypes.REFRESH_TOKEN);\n  const accessTokenExpiresAt = await storage.get(\n    OAuthTokenTypes.ACCESS_TOKEN_EXPIRES_AT,\n  );\n\n  return {\n    id_token: idToken ?? undefined,\n    access_token: accessToken ?? undefined,\n    refresh_token: refreshToken ?? undefined,\n    access_token_expires_at:\n      accessTokenExpiresAt !== null\n        ? parseInt(accessTokenExpiresAt, 10)\n        : undefined, // Convert string to number\n  };\n}\n\nexport async function retrieveAccessTokenExpiresAt(\n  storage: AuthStorage,\n): Promise<number> {\n  return Number(await storage.get(OAuthTokenTypes.ACCESS_TOKEN_EXPIRES_AT));\n}\n\n// Single JWKS instance that persists for the lifetime of the SDK session\nlet cachedJWKS: ReturnType<typeof jose.createRemoteJWKSet> | null = null;\nlet cachedJwksUrl: string | null = null;\n\nexport async function validateOauth2Tokens(\n  tokens: OIDCTokenResponseBody,\n  jwksEndpoint: string,\n  oauth2Client: OAuth2Client,\n  issuer: string,\n): Promise<ParsedTokens> {\n  // Only create a new JWKS instance if one doesn't exist yet\n  if (!cachedJWKS || cachedJwksUrl !== jwksEndpoint) {\n    cachedJWKS = jose.createRemoteJWKSet(new URL(jwksEndpoint));\n    cachedJwksUrl = jwksEndpoint;\n  }\n\n  // validate the ID token\n  const idTokenResponse = await jose.jwtVerify<JWTPayload>(\n    tokens.id_token,\n    cachedJWKS,\n    {\n      issuer: getIssuerVariations(issuer),\n      audience: oauth2Client.clientId,\n    },\n  );\n\n  // validate the access token\n  const accessTokenResponse = await jose.jwtVerify<JWTPayload>(\n    tokens.access_token,\n    cachedJWKS,\n    {\n      issuer: getIssuerVariations(issuer),\n    },\n  );\n\n  return withoutUndefined({\n    id_token: idTokenResponse.payload,\n    access_token: accessTokenResponse.payload,\n    refresh_token: tokens.refresh_token,\n  });\n}\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 778, "column": 0}, "map": {"version":3,"file":"storage.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/browser/storage.ts"],"sourcesContent":["import type { AuthStorage } from \"@/types.js\";\nimport { EventEmitter } from \"eventemitter3\";\n\nexport class LocalStorageAdapter implements AuthStorage {\n  static _emitter: EventEmitter;\n  static get emitter(): EventEmitter {\n    if (!LocalStorageAdapter._emitter) {\n      LocalStorageAdapter._emitter = new EventEmitter();\n    }\n    return LocalStorageAdapter._emitter;\n  }\n\n  async get(key: string): Promise<string> {\n    return Promise.resolve(localStorage.getItem(key) || \"\");\n  }\n\n  async set(key: string, value: string): Promise<void> {\n    localStorage.setItem(key, value);\n  }\n\n  async delete(key: string): Promise<void> {\n    localStorage.removeItem(key);\n  }\n}\n"],"names":[],"mappings":";;;;AACA,OAAO,EAAE,YAAY,EAAE,MAAM,eAAe,CAAC;;AAEvC,MAAO,mBAAmB;IAC9B,MAAM,CAAC,QAAQ,CAAe;IAC9B,MAAM,KAAK,OAAO,GAAA;QAChB,IAAI,CAAC,mBAAmB,CAAC,QAAQ,EAAE,CAAC;YAClC,mBAAmB,CAAC,QAAQ,GAAG,oOAAI,eAAY,EAAE,CAAC;QACpD,CAAC;QACD,OAAO,mBAAmB,CAAC,QAAQ,CAAC;IACtC,CAAC;IAED,KAAK,CAAC,GAAG,CAAC,GAAW,EAAA;QACnB,OAAO,OAAO,CAAC,OAAO,CAAC,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,CAAC;IAC1D,CAAC;IAED,KAAK,CAAC,GAAG,CAAC,GAAW,EAAE,KAAa,EAAA;QAClC,YAAY,CAAC,OAAO,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;IACnC,CAAC;IAED,KAAK,CAAC,MAAM,CAAC,GAAW,EAAA;QACtB,YAAY,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC;IAC/B,CAAC;CACF","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 808, "column": 0}, "map": {"version":3,"file":"PKCE.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/services/PKCE.ts"],"sourcesContent":["import { deriveCodeChallenge } from \"@/shared/lib/util.js\";\nimport { generateCodeVerifier } from \"oslo/oauth2\";\nimport { LocalStorageAdapter } from \"@/browser/storage.js\";\nimport type { PKCEConsumer, PKCEProducer } from \"@/services/types.js\";\nimport type { AuthStorage } from \"@/types.js\";\nimport { CodeVerifier } from \"@/shared/lib/types.js\";\n\n/** A PKCE consumer that retrieves the challenge from a server endpoint */\nexport class ConfidentialClientPKCEConsumer implements PKCEConsumer {\n  constructor(\n    private pkceChallengeEndpoint: string,\n    private basePath?: string,\n  ) {}\n\n  async getCodeChallenge(): Promise<string> {\n    // Get only the origin from location\n    const origin = window.location.origin;\n\n    // Use only the origin plus basePath if provided, no need for pathname anymore\n    const appUrl = this.basePath ? `${origin}${this.basePath}` : origin;\n\n    const response = await fetch(\n      `${this.pkceChallengeEndpoint}?appUrl=${encodeURIComponent(appUrl)}`,\n    );\n    const data = (await response.json()) as { challenge: string };\n    return data.challenge;\n  }\n}\n\n/** A PKCE Producer that can generate and store a code verifier, but is agnostic as to the storage location */\nexport class GenericPublicClientPKCEProducer implements PKCEProducer {\n  constructor(private storage: AuthStorage) {}\n\n  // if there is already a verifier, return it,\n  // If not, create a new one and store it\n  async getCodeChallenge(): Promise<string> {\n    let verifier = await this.getCodeVerifier();\n    if (!verifier) {\n      verifier = generateCodeVerifier();\n      this.storage.set(CodeVerifier.COOKIE_NAME, verifier);\n    }\n    return deriveCodeChallenge(verifier);\n  }\n  // if there is already a verifier, return it,\n  async getCodeVerifier(): Promise<string | null> {\n    return this.storage.get(CodeVerifier.COOKIE_NAME);\n  }\n}\n\n/** A PKCE Producer that is expected to run on a browser, and does not need a backend */\nexport class BrowserPublicClientPKCEProducer extends GenericPublicClientPKCEProducer {\n  constructor() {\n    super(new LocalStorageAdapter());\n  }\n}\n"],"names":[],"mappings":";;;;;AAAA,OAAO,EAAE,mBAAmB,EAAE,MAAM,sBAAsB,CAAC;AAC3D,OAAO,EAAE,oBAAoB,EAAE,MAAM,aAAa,CAAC;AACnD,OAAO,EAAE,mBAAmB,EAAE,MAAM,sBAAsB,CAAC;AAG3D,OAAO,EAAE,YAAY,EAAE,MAAM,uBAAuB,CAAC;;;;;AAG/C,MAAO,8BAA8B;IAE/B,sBAAA;IACA,SAAA;IAFV,YACU,qBAA6B,EAC7B,QAAiB,CAAA;QADjB,IAAA,CAAA,qBAAqB,GAArB,qBAAqB,CAAQ;QAC7B,IAAA,CAAA,QAAQ,GAAR,QAAQ,CAAS;IACxB,CAAC;IAEJ,KAAK,CAAC,gBAAgB,GAAA;QACpB,oCAAoC;QACpC,MAAM,MAAM,GAAG,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC;QAEtC,8EAA8E;QAC9E,MAAM,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,MAAM,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC;QAEpE,MAAM,QAAQ,GAAG,MAAM,KAAK,CAC1B,GAAG,IAAI,CAAC,qBAAqB,CAAA,QAAA,EAAW,kBAAkB,CAAC,MAAM,CAAC,EAAE,CACrE,CAAC;QACF,MAAM,IAAI,GAAG,AAAC,MAAM,QAAQ,CAAC,IAAI,EAAE,CAA0B,CAAC;QAC9D,OAAO,IAAI,CAAC,SAAS,CAAC;IACxB,CAAC;CACF;AAGK,MAAO,+BAA+B;IACtB,QAAA;IAApB,YAAoB,OAAoB,CAAA;QAApB,IAAA,CAAA,OAAO,GAAP,OAAO,CAAa;IAAG,CAAC;IAE5C,6CAA6C;IAC7C,wCAAwC;IACxC,KAAK,CAAC,gBAAgB,GAAA;QACpB,IAAI,QAAQ,GAAG,MAAM,IAAI,CAAC,eAAe,EAAE,CAAC;QAC5C,IAAI,CAAC,QAAQ,EAAE,CAAC;YACd,QAAQ,IAAG,6KAAA,AAAoB,EAAE,CAAC;YAClC,IAAI,CAAC,OAAO,CAAC,GAAG,iNAAC,eAAY,CAAC,WAAW,EAAE,QAAQ,CAAC,CAAC;QACvD,CAAC;QACD,0NAAO,sBAAA,AAAmB,EAAC,QAAQ,CAAC,CAAC;IACvC,CAAC;IACD,6CAA6C;IAC7C,KAAK,CAAC,eAAe,GAAA;QACnB,OAAO,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,+NAAY,CAAC,WAAW,CAAC,CAAC;IACpD,CAAC;CACF;AAGK,MAAO,+BAAgC,SAAQ,+BAA+B;IAClF,aAAA;QACE,KAAK,CAAC,gNAAI,sBAAmB,EAAE,CAAC,CAAC;IACnC,CAAC;CACF","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 869, "column": 0}, "map": {"version":3,"file":"SessionProvider.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/shared/providers/SessionProvider.tsx"],"sourcesContent":["\"use client\";\nimport type { SessionData } from \"@/types.js\";\nimport type { ReactNode } from \"react\";\nimport React, { createContext } from \"react\";\n\nexport type SessionProviderOutput = {\n  data: SessionData | null;\n  error: Error | null;\n  isLoading: boolean;\n};\nconst defaultSession: SessionProviderOutput = {\n  data: {\n    authenticated: false,\n    idToken: undefined,\n    accessToken: undefined,\n    displayMode: \"iframe\",\n  },\n  error: null,\n  // initialise in loading state\n  isLoading: true,\n};\n\n// Context for exposing session specifically to the TokenProvider\nconst SessionContext = createContext<SessionProviderOutput>(defaultSession);\n\ntype SessionContextType = {\n  children: ReactNode;\n  data?: SessionData | null;\n  error?: Error | null;\n  isLoading: boolean;\n};\n\nconst SessionProvider = ({ children, ...props }: SessionContextType) => {\n  return (\n    <SessionContext.Provider\n      value={{\n        ...props,\n        data: props.data || null,\n        error: props.error || null,\n      }}\n    >\n      {children}\n    </SessionContext.Provider>\n  );\n};\n\nexport type { SessionContextType };\nexport { SessionProvider, SessionContext };\n"],"names":[],"mappings":";;;;;AAGA,OAAO,KAAK,EAAE,EAAE,aAAa,EAAE,MAAM,OAAO,CAAC;AAH7C,YAAY,CAAC;;;AAUb,MAAM,cAAc,GAA0B;IAC5C,IAAI,EAAE;QACJ,aAAa,EAAE,KAAK;QACpB,OAAO,EAAE,SAAS;QAClB,WAAW,EAAE,SAAS;QACtB,WAAW,EAAE,QAAQ;KACtB;IACD,KAAK,EAAE,IAAI;IACX,8BAA8B;IAC9B,SAAS,EAAE,IAAI;CAChB,CAAC;AAEF,iEAAiE;AACjE,MAAM,cAAc,qKAAG,gBAAA,AAAa,EAAwB,cAAc,CAAC,CAAC;AAS5E,MAAM,eAAe,GAAG,CAAC,EAAE,QAAQ,EAAE,GAAG,KAAK,EAAsB,EAAE,EAAE;IACrE,OAAO,2OACL,MAAA,EAAC,cAAc,CAAC,QAAQ,EAAA;QACtB,KAAK,EAAE;YACL,GAAG,KAAK;YACR,IAAI,EAAE,KAAK,CAAC,IAAI,IAAI,IAAI;YACxB,KAAK,EAAE,KAAK,CAAC,KAAK,IAAI,IAAI;SAC3B;QAAA,UAEA,QAAQ;IAAA,EACe,CAC3B,CAAC;AACJ,CAAC,CAAC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 909, "column": 0}, "map": {"version":3,"file":"useSession.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/shared/hooks/useSession.ts"],"sourcesContent":["\"use client\";\nimport { useContext } from \"react\";\nimport { SessionContext } from \"@/shared/providers/SessionProvider.js\";\n\n// TokenProvider will use this internal context to access session\nconst useSession = () => {\n  const context = useContext(SessionContext);\n  if (!context) {\n    throw new Error(\"useSession must be used within an SessionProvider\");\n  }\n  return context;\n};\n\nexport { useSession };\n"],"names":[],"mappings":";;;AACA,OAAO,EAAE,UAAU,EAAE,MAAM,OAAO,CAAC;AACnC,OAAO,EAAE,cAAc,EAAE,MAAM,uCAAuC,CAAC;AAFvE,YAAY,CAAC;;;AAIb,iEAAiE;AACjE,MAAM,UAAU,GAAG,GAAG,EAAE;IACtB,MAAM,OAAO,qKAAG,aAAA,AAAU,kOAAC,iBAAc,CAAC,CAAC;IAC3C,IAAI,CAAC,OAAO,EAAE,CAAC;QACb,MAAM,IAAI,KAAK,CAAC,mDAAmD,CAAC,CAAC;IACvE,CAAC;IACD,OAAO,OAAO,CAAC;AACjB,CAAC,CAAC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 933, "column": 0}, "map": {"version":3,"file":"TokenProvider.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/shared/providers/TokenProvider.tsx"],"sourcesContent":["\"use client\";\nimport type { ReactNode } from \"react\";\nimport React, { createContext, useMemo } from \"react\";\nimport { useSession } from \"@/shared/hooks/useSession.js\";\nimport type { ForwardedTokens, IdTokenPayload } from \"@/types.js\";\nimport { convertForwardedTokenFormat } from \"@/lib/jwt.js\";\nimport { decodeJwt } from \"jose\";\n\ntype TokenContextType = {\n  accessToken: string | null;\n  idToken: string | null;\n  forwardedTokens: ForwardedTokens;\n  isLoading: boolean;\n  error: Error | null;\n};\n\nconst TokenContext = createContext<TokenContextType | undefined>(undefined);\n\nconst TokenProvider = ({ children }: { children: ReactNode }) => {\n  const { isLoading, error: authError } = useSession();\n  const { data: session } = useSession();\n\n  const decodeTokens = useMemo(() => {\n    if (!session?.idToken) return null;\n\n    const { forwardedTokens } = decodeJwt(session.idToken) as IdTokenPayload;\n\n    return forwardedTokens\n      ? convertForwardedTokenFormat(forwardedTokens)\n      : null;\n  }, [session?.idToken]);\n\n  const value = useMemo(\n    () => ({\n      accessToken: session?.accessToken || null,\n      idToken: session?.idToken || null,\n      forwardedTokens: decodeTokens || {},\n      isLoading,\n      error: authError as Error | null,\n    }),\n    [\n      session?.accessToken,\n      session?.idToken,\n      decodeTokens,\n      isLoading,\n      authError,\n    ],\n  );\n\n  return (\n    <TokenContext.Provider value={value}>{children}</TokenContext.Provider>\n  );\n};\n\nexport type { TokenContextType };\nexport { TokenProvider, TokenContext };\n"],"names":[],"mappings":";;;;;AAEA,OAAO,KAAK,EAAE,EAAE,aAAa,EAAE,OAAO,EAAE,MAAM,OAAO,CAAC;AACtD,OAAO,EAAE,UAAU,EAAE,MAAM,8BAA8B,CAAC;AAE1D,OAAO,EAAE,2BAA2B,EAAE,MAAM,cAAc,CAAC;AAC3D,OAAO,EAAE,SAAS,EAAE,MAAM,MAAM,CAAC;AANjC,YAAY,CAAC;;;;;;AAgBb,MAAM,YAAY,qKAAG,gBAAA,AAAa,EAA+B,SAAS,CAAC,CAAC;AAE5E,MAAM,aAAa,GAAG,CAAC,EAAE,QAAQ,EAA2B,EAAE,EAAE;IAC9D,MAAM,EAAE,SAAS,EAAE,KAAK,EAAE,SAAS,EAAE,8NAAG,aAAA,AAAU,EAAE,CAAC;IACrD,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,IAAG,uOAAA,AAAU,EAAE,CAAC;IAEvC,MAAM,YAAY,qKAAG,UAAA,AAAO;+CAAC,GAAG,EAAE;YAChC,IAAI,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,IAAI,CAAC;YAEnC,MAAM,EAAE,eAAe,EAAE,wKAAG,YAAA,AAAS,EAAC,OAAO,CAAC,OAAO,CAAmB,CAAC;YAEzE,OAAO,eAAe,IAClB,qOAAA,AAA2B,EAAC,eAAe,CAAC,GAC5C,IAAI,CAAC;QACX,CAAC;8CAAE;QAAC,OAAO,EAAE,OAAO;KAAC,CAAC,CAAC;IAEvB,MAAM,KAAK,IAAG,2KAAA,AAAO;wCACnB,GAAG,CAAG,CAAC,AAAF;gBACH,WAAW,EAAE,OAAO,EAAE,WAAW,IAAI,IAAI;gBACzC,OAAO,EAAE,OAAO,EAAE,OAAO,IAAI,IAAI;gBACjC,eAAe,EAAE,YAAY,IAAI,CAAA,CAAE;gBACnC,SAAS;gBACT,KAAK,EAAE,SAAyB;aACjC,CAAC;uCACF;QACE,OAAO,EAAE,WAAW;QACpB,OAAO,EAAE,OAAO;QAChB,YAAY;QACZ,SAAS;QACT,SAAS;KACV,CACF,CAAC;IAEF,OAAO,2OACL,MAAA,EAAC,YAAY,CAAC,QAAQ,EAAA;QAAC,KAAK,EAAE,KAAK;QAAA,UAAG,QAAQ;IAAA,EAAyB,CACxE,CAAC;AACJ,CAAC,CAAC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 989, "column": 0}, "map": {"version":3,"file":"useToken.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/shared/hooks/useToken.ts"],"sourcesContent":["\"use client\";\nimport { useContext } from \"react\";\nimport { TokenContext } from \"@/shared/providers/TokenProvider.js\";\n\nconst useToken = () => {\n  const context = useContext(TokenContext);\n\n  if (!context) {\n    throw new Error(\"useToken must be used within a TokenProvider\");\n  }\n\n  return context;\n};\n\nexport { useToken };\n"],"names":[],"mappings":";;;AACA,OAAO,EAAE,UAAU,EAAE,MAAM,OAAO,CAAC;AACnC,OAAO,EAAE,YAAY,EAAE,MAAM,qCAAqC,CAAC;AAFnE,YAAY,CAAC;;;AAIb,MAAM,QAAQ,GAAG,GAAG,EAAE;IACpB,MAAM,OAAO,qKAAG,aAAA,AAAU,gOAAC,eAAY,CAAC,CAAC;IAEzC,IAAI,CAAC,OAAO,EAAE,CAAC;QACb,MAAM,IAAI,KAAK,CAAC,8CAA8C,CAAC,CAAC;IAClE,CAAC;IAED,OAAO,OAAO,CAAC;AACjB,CAAC,CAAC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 1012, "column": 0}, "map": {"version":3,"file":"UserProvider.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/shared/providers/UserProvider.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { createContext, useCallback, useEffect, useState } from \"react\";\nimport type { ReactNode } from \"react\";\nimport type {\n  AuthStatus,\n  AuthStorage,\n  DisplayMode,\n  ForwardedTokens,\n  User,\n} from \"@/types.js\";\nimport { useSession } from \"@/shared/hooks/useSession.js\";\nimport type { AuthContextType } from \"@/shared/providers/AuthContext.js\";\nimport { GenericUserSession } from \"@/shared/lib/UserSession.js\";\nimport { useToken } from \"../hooks/useToken.js\";\nimport type { JWTPayload } from \"jose\";\n\ntype UserContent = Record<string, unknown> & JWTPayload;\ntype UserContextType<T extends UserContent = UserContent> = {\n  user: User<T> | null;\n} & {\n  accessToken?: string | null;\n  idToken?: string | null;\n  forwardedTokens?: ForwardedTokens;\n} & Omit<AuthContextType, \"isAuthenticated\">;\n\nconst UserContext = createContext<UserContextType | null>(null);\n\nconst UserProvider = <T extends UserContent>({\n  children,\n  storage,\n  user: inputUser,\n  signOut,\n  authStatus,\n  signIn,\n  displayMode,\n}: {\n  children: ReactNode;\n  storage: AuthStorage;\n  user: User<T> | null;\n  signOut: () => Promise<void>;\n  authStatus: AuthStatus;\n  signIn: (displayMode?: DisplayMode) => Promise<void>;\n  displayMode: DisplayMode;\n}) => {\n  const { error: authError, isLoading: authLoading } = useSession();\n  const { data: session } = useSession();\n  const tokens = useToken();\n  const [userLoading, setUserLoading] = useState<boolean>(false);\n  const [userError, setUserError] = useState<Error | null>(null);\n  const [user, setUser] = useState<User<T> | null>(inputUser);\n\n  const fetchUser = useCallback(async (): Promise<User<T> | null> => {\n    if (!session?.idToken) return null;\n    const userSession = new GenericUserSession<T>(storage);\n    return userSession.get();\n  }, [session?.idToken, storage]);\n\n  useEffect(() => {\n    if (session?.idToken) {\n      setUserLoading(true);\n      fetchUser()\n        .then((user) => {\n          setUserLoading(false);\n          setUser((prevUser) => {\n            // we only want to update the user if it's set - if a user is passed in, don't assume it is wrong here\n            // it could be just the fetchUser returned null for some other reason.\n            // TODO consider cleaning this up in general to avoid needing context here.\n            return user ?? prevUser;\n          });\n        })\n        .catch((error) => {\n          setUserLoading(false);\n          setUserError(error);\n        });\n    } else {\n      setUser(null);\n    }\n  }, [fetchUser, session?.idToken]);\n\n  const isLoading = authLoading || userLoading;\n  const error = authError ?? userError;\n\n  // While we are passing a user as a prop _and_ storing it in state,\n  // there is the case where the user is not set in the state yet\n  // (setState is called but the rerender has not yet happened), but\n  // is passed as a prop. In this case, we want to use the prop value.\n  // A better solution is to avoid having multiple layers of context.\n  // If the user is passed in, we just use that.\n  // We should not split user state management across multiple contexts\n  const userValue = user ?? inputUser;\n\n  return (\n    <UserContext.Provider\n      value={{\n        ...tokens,\n        user: userValue,\n        isLoading,\n        error,\n        signIn,\n        signOut,\n        authStatus,\n        displayMode: displayMode || \"iframe\",\n      }}\n    >\n      {children}\n    </UserContext.Provider>\n  );\n};\n\nexport type { UserContextType };\n\nexport { UserProvider, UserContext };\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 1107, "column": 0}, "map": {"version":3,"file":"usePrevious.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/nextjs/hooks/usePrevious.ts"],"sourcesContent":["import { useEffect, useRef } from \"react\";\n\nexport function usePrevious<T>(value: T) {\n  const ref = useRef<T>();\n  useEffect(() => {\n    ref.current = value;\n  }, [value]);\n  return ref.current;\n}\n"],"names":[],"mappings":";;;AAAA,OAAO,EAAE,SAAS,EAAE,MAAM,EAAE,MAAM,OAAO,CAAC;;AAEpC,SAAU,WAAW,CAAI,KAAQ;IACrC,MAAM,GAAG,qKAAG,SAAA,AAAM,EAAK,CAAC;sKACxB,YAAA,AAAS;iCAAC,GAAG,EAAE;YACb,GAAG,CAAC,OAAO,GAAG,KAAK,CAAC;QACtB,CAAC;gCAAE;QAAC,KAAK;KAAC,CAAC,CAAC;IACZ,OAAO,GAAG,CAAC,OAAO,CAAC;AACrB,CAAC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 1129, "column": 0}, "map": {"version":3,"file":"obj.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/lib/obj.ts"],"sourcesContent":["const objectsAreEqual = (\n  obj1: Record<string, unknown> | null | undefined,\n  obj2: Record<string, unknown> | null | undefined,\n): boolean => {\n  if (obj1 === obj2) return true;\n\n  if ((obj1 && !obj2) || (obj2 && !obj1)) {\n    return false;\n  }\n\n  const keys1 = obj1 ? Object.keys(obj1) : [];\n  const keys2 = obj2 ? Object.keys(obj2) : [];\n\n  if (keys1.length !== keys2.length) return false;\n\n  for (const key of keys1) {\n    if ((obj1 || {})[key] !== (obj2 || {})[key]) return false;\n  }\n\n  return true;\n};\nexport { objectsAreEqual };\n"],"names":[],"mappings":";;;AAAA,MAAM,eAAe,GAAG,CACtB,IAAgD,EAChD,IAAgD,EACvC,EAAE;IACX,IAAI,IAAI,KAAK,IAAI,EAAE,OAAO,IAAI,CAAC;IAE/B,IAAI,AAAC,IAAI,IAAI,CAAC,IAAI,CAAC,GAAK,CAAD,GAAK,IAAI,CAAC,IAAI,CAAC,CAAE,CAAC;QACvC,OAAO,KAAK,CAAC;IACf,CAAC;IAED,MAAM,KAAK,GAAG,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;IAC5C,MAAM,KAAK,GAAG,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;IAE5C,IAAI,KAAK,CAAC,MAAM,KAAK,KAAK,CAAC,MAAM,EAAE,OAAO,KAAK,CAAC;IAEhD,KAAK,MAAM,GAAG,IAAI,KAAK,CAAE,CAAC;QACxB,IAAI,CAAC,IAAI,IAAI,CAAA,CAAE,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,IAAI,CAAA,CAAE,CAAC,CAAC,GAAG,CAAC,EAAE,OAAO,KAAK,CAAC;IAC5D,CAAC;IAED,OAAO,IAAI,CAAC;AACd,CAAC,CAAC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 1153, "column": 0}, "map": {"version":3,"file":"version.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/shared/version.ts"],"sourcesContent":["// This is an auto-generated file. Do not edit.\n\nexport const VERSION = \"@civic/auth:0.5.1\";\n"],"names":[],"mappings":"AAAA,+CAA+C;;;;AAExC,MAAM,OAAO,GAAG,mBAAmB,CAAC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 1164, "column": 0}, "map": {"version":3,"file":"storage.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/shared/lib/storage.ts"],"sourcesContent":["import type { AuthStorage, SessionData, UnknownObject, User } from \"@/types.js\";\nimport type { CookieConfig } from \"./types.js\";\n\ntype SameSiteOption = \"strict\" | \"lax\" | \"none\";\n\nexport interface SessionStorage {\n  get(): SessionData;\n  getUser(): User<UnknownObject> | null;\n  set(data: Partial<SessionData>): void;\n  setUser(data: User<UnknownObject> | null): void;\n  clear(): void;\n}\n\nexport type CookieStorageSettings = {\n  httpOnly: boolean;\n  secure: boolean;\n  sameSite: SameSiteOption;\n  expires: Date;\n  path: string;\n};\n\nexport const DEFAULT_COOKIE_DURATION = 60 * 15; // 15 minutes\n\nexport abstract class CookieStorage implements AuthStorage {\n  protected settings: CookieStorageSettings;\n  protected constructor(settings: Partial<CookieStorageSettings> = {}) {\n    this.settings = {\n      httpOnly: settings.httpOnly ?? true,\n      secure: settings.secure ?? true,\n      // the callback request comes the auth server\n      // 'lax' ensures the code_verifier cookie is sent with the request\n      sameSite: settings.sameSite ?? \"lax\",\n      expires:\n        settings.expires ??\n        new Date(Date.now() + 1000 * DEFAULT_COOKIE_DURATION),\n      path: settings.path ?? \"/\",\n    };\n  }\n  abstract get(key: string): Promise<string | null>;\n  abstract set(\n    key: string,\n    value: string,\n    cookieConfigOverride?: Partial<CookieConfig>,\n  ): Promise<void>;\n  abstract delete(key: string): Promise<void>;\n}\n\nexport type AuthCookieStorageSettings = {\n  httpOnly: boolean;\n  secure: boolean;\n  sameSite: SameSiteOption;\n  expires: Date;\n  path: string;\n  timestamp: Date;\n};\n"],"names":[],"mappings":";;;;AAqBO,MAAM,uBAAuB,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC,aAAa;AAEvD,MAAgB,aAAa;IACvB,QAAQ,CAAwB;IAC1C,YAAsB,WAA2C,CAAA,CAAE,CAAA;QACjE,IAAI,CAAC,QAAQ,GAAG;YACd,QAAQ,EAAE,QAAQ,CAAC,QAAQ,IAAI,IAAI;YACnC,MAAM,EAAE,QAAQ,CAAC,MAAM,IAAI,IAAI;YAC/B,6CAA6C;YAC7C,kEAAkE;YAClE,QAAQ,EAAE,QAAQ,CAAC,QAAQ,IAAI,KAAK;YACpC,OAAO,EACL,QAAQ,CAAC,OAAO,IAChB,IAAI,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,GAAG,IAAI,GAAG,uBAAuB,CAAC;YACvD,IAAI,EAAE,QAAQ,CAAC,IAAI,IAAI,GAAG;SAC3B,CAAC;IACJ,CAAC;CAQF","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 1189, "column": 0}, "map": {"version":3,"file":"BrowserCookieStorage.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/shared/lib/BrowserCookieStorage.ts"],"sourcesContent":["import {\n  CookieStorage,\n  type CookieStorageSettings,\n} from \"@/shared/lib/storage.js\";\nimport type { CookieConfig } from \"./types.js\";\n\n// Ensure only runs in a browser environment\nfunction documentObj() {\n  if (typeof globalThis.window !== \"undefined\") return globalThis.document;\n  const stack = new Error().stack;\n  throw new Error(\n    \"Document is not available in this environment:\" + JSON.stringify(stack),\n  );\n}\n\nconst split = (separator: string) => (str: string) => str.split(separator);\n\nconst cookieStringFromSettings = (settings: CookieStorageSettings): string => {\n  let cookieSettings = \"\";\n\n  if (settings.path) {\n    cookieSettings += `Path=${settings.path}; `;\n  }\n  if (settings.expires) {\n    cookieSettings += `Expires=${settings.expires}; `;\n  }\n  if (settings.secure) {\n    cookieSettings += `Secure; `;\n  }\n  if (settings.httpOnly) {\n    // HttpOnly cannot be set from client-side JavaScript, so this clause can be omitted.\n    console.warn(\n      \"HttpOnly cannot be set on client-side cookies. Ignoring this setting.\",\n    );\n  }\n  if (settings.sameSite) {\n    cookieSettings += `SameSite=${settings.sameSite}; `;\n  }\n  return cookieSettings.trim();\n};\n/**\n * BrowserCookieStorage is a cookie storage implementation that works in the browser.\n * It uses the document.cookie API to set and get cookies.\n * Although retrieval of browser cookies is synchronous, the API is designed to be async for compatibility with other storage implementations.\n */\nexport class BrowserCookieStorage extends CookieStorage {\n  constructor(config: Partial<CookieStorageSettings> = {}) {\n    super({\n      // sensible browser defaults\n      secure: false,\n      httpOnly: false,\n      ...config,\n    });\n  }\n\n  // Synchronous methods\n  getSync(key: string): string | null {\n    const encodedValue = documentObj()\n      .cookie.split(\";\")\n      .map(split(\"=\"))\n      .find(([cookieKey]) => cookieKey?.trim() === key)?.[1];\n\n    return encodedValue ? decodeURIComponent(encodedValue) : null;\n  }\n\n  setSync(\n    key: string,\n    value: string,\n    cookieConfigOverride: Partial<CookieConfig> = {},\n  ): void {\n    const encodedValue = encodeURIComponent(value);\n    const settings = { ...this.settings, ...cookieConfigOverride };\n    const cookieString = cookieStringFromSettings(settings);\n    documentObj().cookie = `${key}=${encodedValue}; ${cookieString}`;\n  }\n\n  deleteSync(key: string): void {\n    documentObj().cookie = `${key}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`;\n  }\n\n  // Async methods (for API compatibility)\n  async get(key: string): Promise<string | null> {\n    return this.getSync(key);\n  }\n\n  async set(\n    key: string,\n    value: string,\n    cookieConfigOverride: Partial<CookieConfig> = {},\n  ): Promise<void> {\n    this.setSync(key, value, cookieConfigOverride);\n  }\n\n  async delete(key: string): Promise<void> {\n    this.deleteSync(key);\n  }\n}\n"],"names":[],"mappings":";;;AAAA,OAAO,EACL,aAAa,GAEd,MAAM,yBAAyB,CAAC;;AAGjC,4CAA4C;AAC5C,SAAS,WAAW;IAClB,IAAI,OAAO,UAAU,CAAC,MAAM,KAAK,WAAW,EAAE,OAAO,UAAU,CAAC,QAAQ,CAAC;IACzE,MAAM,KAAK,GAAG,IAAI,KAAK,EAAE,CAAC,KAAK,CAAC;IAChC,MAAM,IAAI,KAAK,CACb,gDAAgD,GAAG,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CACzE,CAAC;AACJ,CAAC;AAED,MAAM,KAAK,GAAG,CAAC,SAAiB,EAAE,CAAG,CAAD,AAAE,GAAW,EAAE,CAAG,CAAD,EAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;AAE3E,MAAM,wBAAwB,GAAG,CAAC,QAA+B,EAAU,EAAE;IAC3E,IAAI,cAAc,GAAG,EAAE,CAAC;IAExB,IAAI,QAAQ,CAAC,IAAI,EAAE,CAAC;QAClB,cAAc,IAAI,CAAA,KAAA,EAAQ,QAAQ,CAAC,IAAI,CAAA,EAAA,CAAI,CAAC;IAC9C,CAAC;IACD,IAAI,QAAQ,CAAC,OAAO,EAAE,CAAC;QACrB,cAAc,IAAI,CAAA,QAAA,EAAW,QAAQ,CAAC,OAAO,CAAA,EAAA,CAAI,CAAC;IACpD,CAAC;IACD,IAAI,QAAQ,CAAC,MAAM,EAAE,CAAC;QACpB,cAAc,IAAI,CAAA,QAAA,CAAU,CAAC;IAC/B,CAAC;IACD,IAAI,QAAQ,CAAC,QAAQ,EAAE,CAAC;QACtB,qFAAqF;QACrF,OAAO,CAAC,IAAI,CACV,uEAAuE,CACxE,CAAC;IACJ,CAAC;IACD,IAAI,QAAQ,CAAC,QAAQ,EAAE,CAAC;QACtB,cAAc,IAAI,CAAA,SAAA,EAAY,QAAQ,CAAC,QAAQ,CAAA,EAAA,CAAI,CAAC;IACtD,CAAC;IACD,OAAO,cAAc,CAAC,IAAI,EAAE,CAAC;AAC/B,CAAC,CAAC;AAMI,MAAO,oBAAqB,2NAAQ,gBAAa;IACrD,YAAY,SAAyC,CAAA,CAAE,CAAA;QACrD,KAAK,CAAC;YACJ,4BAA4B;YAC5B,MAAM,EAAE,KAAK;YACb,QAAQ,EAAE,KAAK;YACf,GAAG,MAAM;SACV,CAAC,CAAC;IACL,CAAC;IAED,sBAAsB;IACtB,OAAO,CAAC,GAAW,EAAA;QACjB,MAAM,YAAY,GAAG,WAAW,EAAE,CAC/B,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CACjB,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CACf,IAAI,CAAC,CAAC,CAAC,SAAS,CAAC,EAAE,CAAG,CAAD,QAAU,EAAE,IAAI,EAAE,KAAK,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;QAEzD,OAAO,YAAY,CAAC,CAAC,CAAC,kBAAkB,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;IAChE,CAAC;IAED,OAAO,CACL,GAAW,EACX,KAAa,EACb,uBAA8C,CAAA,CAAE,EAAA;QAEhD,MAAM,YAAY,GAAG,kBAAkB,CAAC,KAAK,CAAC,CAAC;QAC/C,MAAM,QAAQ,GAAG;YAAE,GAAG,IAAI,CAAC,QAAQ;YAAE,GAAG,oBAAoB;QAAA,CAAE,CAAC;QAC/D,MAAM,YAAY,GAAG,wBAAwB,CAAC,QAAQ,CAAC,CAAC;QACxD,WAAW,EAAE,CAAC,MAAM,GAAG,GAAG,GAAG,CAAA,CAAA,EAAI,YAAY,CAAA,EAAA,EAAK,YAAY,EAAE,CAAC;IACnE,CAAC;IAED,UAAU,CAAC,GAAW,EAAA;QACpB,WAAW,EAAE,CAAC,MAAM,GAAG,GAAG,GAAG,CAAA,iDAAA,CAAmD,CAAC;IACnF,CAAC;IAED,wCAAwC;IACxC,KAAK,CAAC,GAAG,CAAC,GAAW,EAAA;QACnB,OAAO,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;IAC3B,CAAC;IAED,KAAK,CAAC,GAAG,CACP,GAAW,EACX,KAAa,EACb,uBAA8C,CAAA,CAAE,EAAA;QAEhD,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,KAAK,EAAE,oBAAoB,CAAC,CAAC;IACjD,CAAC;IAED,KAAK,CAAC,MAAM,CAAC,GAAW,EAAA;QACtB,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC;IACvB,CAAC;CACF","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 1264, "column": 0}, "map": {"version":3,"file":"index.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/shared/index.ts"],"sourcesContent":["import { VERSION } from \"./version.js\";\nexport { VERSION };\nlet versionPrinted = false;\nexport const getVersion = () => VERSION;\n// print the version to the browser\nexport const printVersion = () => {\n  if (!versionPrinted) {\n    versionPrinted = true;\n    if (\n      getVersion() &&\n      typeof window !== \"undefined\" &&\n      typeof document !== \"undefined\"\n    ) {\n      console.log(getVersion());\n    }\n  }\n};\nexport { BrowserCookieStorage } from \"@/shared/lib/BrowserCookieStorage.js\";\nexport { clearTokens } from \"@/shared/lib/util.js\";\n"],"names":[],"mappings":";;;;AAAA,OAAO,EAAE,OAAO,EAAE,MAAM,cAAc,CAAC;AAiBvC,OAAO,EAAE,oBAAoB,EAAE,MAAM,sCAAsC,CAAC;AAC5E,OAAO,EAAE,WAAW,EAAE,MAAM,sBAAsB,CAAC;;;AAhBnD,IAAI,cAAc,GAAG,KAAK,CAAC;AACpB,MAAM,UAAU,GAAG,GAAG,EAAE,0MAAC,UAAO,CAAC;AAEjC,MAAM,YAAY,GAAG,GAAG,EAAE;IAC/B,IAAI,CAAC,cAAc,EAAE,CAAC;QACpB,cAAc,GAAG,IAAI,CAAC;QACtB,IACE,UAAU,EAAE,IACZ,OAAO,MAAM,KAAK,WAAW,IAC7B,OAAO,QAAQ,KAAK,WAAW,EAC/B,CAAC;YACD,OAAO,CAAC,GAAG,CAAC,UAAU,EAAE,CAAC,CAAC;QAC5B,CAAC;IACH,CAAC;AACH,CAAC,CAAC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 1302, "column": 0}, "map": {"version":3,"file":"useUserCookie.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/nextjs/hooks/useUserCookie.ts"],"sourcesContent":["\"use client\";\nimport { useCallback, useEffect, useRef, useState } from \"react\";\nimport { useRouter } from \"next/navigation.js\";\nimport type { EmptyObject, User } from \"@/types.js\";\nimport { OAuthTokenTypes, UserStorage } from \"@/shared/lib/types.js\";\nimport { usePrevious } from \"@/nextjs/hooks/usePrevious.js\";\nimport { useTransition } from \"react\";\nimport { objectsAreEqual } from \"@/lib/obj.js\";\nimport { BrowserCookieStorage } from \"@/shared/index.js\";\nimport { useIsClient } from \"usehooks-ts\";\n\ntype UserAndTokenFromCookie = {\n  [UserStorage.USER]: User | undefined;\n  [OAuthTokenTypes.ID_TOKEN]: string | undefined;\n};\nconst browserCookieStorage = new BrowserCookieStorage();\nconst getUserAndTokenFromCookie = (): UserAndTokenFromCookie => {\n  const userCookie = browserCookieStorage.getSync(\n    UserStorage.USER,\n  ) as unknown as string | null;\n  const idTokenCookie = browserCookieStorage.getSync(\n    OAuthTokenTypes.ID_TOKEN,\n  ) as unknown as string | null;\n  return {\n    [UserStorage.USER]: userCookie ? JSON.parse(userCookie) : undefined,\n    [OAuthTokenTypes.ID_TOKEN]: idTokenCookie || undefined,\n  };\n};\n\nexport const useUserCookie = <T extends EmptyObject>() => {\n  const isClient = useIsClient();\n  // need to make sure this is only run on the client\n  // because it uses cookies that expect a document object to be present to read from\n  const response =\n    (isClient && getUserAndTokenFromCookie()) || ({} as UserAndTokenFromCookie);\n  // initialise user and token from cookies so that we don't\n  // have to wait for the first fetch to expose these values\n  const userData = response[UserStorage.USER] as User<T>;\n  const tokenData = response[OAuthTokenTypes.ID_TOKEN];\n\n  const [user, setUser] = useState<User<T> | null>(userData || null);\n  const [idToken, setIdToken] = useState<string | undefined>(\n    tokenData || undefined,\n  );\n  const [userChanged, setUserChanged] = useState<boolean>(false);\n  const hasRunRef = useRef(false);\n  const [isPending, startTransition] = useTransition();\n  const [initialFetchComplete, setInitialFetchComplete] = useState(!!userData);\n  const router = useRouter();\n\n  const prevUser = usePrevious(user);\n  const prevToken = usePrevious(idToken);\n  const prevPending = usePrevious(isPending);\n\n  const fetchUser = useCallback(\n    (abortController?: AbortController) => {\n      if (abortController?.signal.aborted) {\n        setInitialFetchComplete(true);\n        return;\n      }\n\n      const response = getUserAndTokenFromCookie() || {};\n      const userData = response[UserStorage.USER] as User<T>;\n      const tokenData = response[OAuthTokenTypes.ID_TOKEN];\n\n      if (abortController?.signal.aborted) {\n        setInitialFetchComplete(true);\n        return;\n      }\n\n      if (!objectsAreEqual(prevUser, userData)) {\n        setUser(userData || null);\n        setUserChanged(true);\n      }\n      if (tokenData !== prevToken) {\n        setIdToken(tokenData);\n      }\n      setInitialFetchComplete(true);\n    },\n    [prevToken, prevUser],\n  );\n\n  // call fetch immediately after a refresh\n  useEffect(() => {\n    setUserChanged(false);\n    if (prevPending && !isPending) {\n      fetchUser();\n    }\n  }, [prevPending, isPending, fetchUser]);\n\n  useEffect(() => {\n    let abortController = new AbortController();\n    const cookieListener = () => {\n      abortController = new AbortController();\n      fetchUser(abortController);\n    };\n\n    document.addEventListener(\"visibilitychange\", cookieListener);\n    window.addEventListener(\"storage\", cookieListener);\n    window.addEventListener(\"focus\", cookieListener);\n\n    fetchUser(abortController);\n\n    const intervalId = setInterval(cookieListener, 2000);\n\n    return () => {\n      abortController.abort();\n      document.removeEventListener(\"visibilitychange\", cookieListener);\n      window.removeEventListener(\"storage\", cookieListener);\n      window.removeEventListener(\"focus\", cookieListener);\n      clearInterval(intervalId);\n    };\n  }, [fetchUser]);\n\n  useEffect(() => {\n    if (userChanged) {\n      if (!hasRunRef.current) {\n        hasRunRef.current = true;\n        startTransition(() => {\n          router.refresh();\n        });\n      }\n    } else {\n      hasRunRef.current = false;\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [userChanged]);\n\n  return {\n    user,\n    idToken,\n    fetchUser,\n    isPending,\n    isLoading: !initialFetchComplete,\n  };\n};\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 1449, "column": 0}, "map": {"version":3,"file":"useOAuthEndpoints.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/shared/hooks/useOAuthEndpoints.ts"],"sourcesContent":["import { DEFAULT_AUTH_SERVER } from \"@/constants.js\";\nimport { getOauthEndpoints } from \"@/lib/oauth.js\";\nimport type { Endpoints } from \"@/types.js\";\nimport { useEffect, useState } from \"react\";\n\nconst useOAuthEndpoints = (oauthServer?: string) => {\n  const [endpoints, setEndpoints] = useState<Endpoints | null>(null);\n  useEffect(() => {\n    getOauthEndpoints(oauthServer || DEFAULT_AUTH_SERVER).then(\n      (retrievedEndpoints) => {\n        setEndpoints(retrievedEndpoints);\n      },\n    );\n  }, [oauthServer]);\n\n  return endpoints;\n};\n\nexport { useOAuthEndpoints };\n"],"names":[],"mappings":";;;AAAA,OAAO,EAAE,mBAAmB,EAAE,MAAM,gBAAgB,CAAC;AACrD,OAAO,EAAE,iBAAiB,EAAE,MAAM,gBAAgB,CAAC;AAEnD,OAAO,EAAE,SAAS,EAAE,QAAQ,EAAE,MAAM,OAAO,CAAC;;;;AAE5C,MAAM,iBAAiB,GAAG,CAAC,WAAoB,EAAE,EAAE;IACjD,MAAM,CAAC,SAAS,EAAE,YAAY,CAAC,qKAAG,WAAA,AAAQ,EAAmB,IAAI,CAAC,CAAC;sKACnE,YAAA,AAAS;uCAAC,GAAG,EAAE;sNACb,oBAAA,AAAiB,EAAC,WAAW,uMAAI,sBAAmB,CAAC,CAAC,IAAI;+CACxD,CAAC,kBAAkB,EAAE,EAAE;oBACrB,YAAY,CAAC,kBAAkB,CAAC,CAAC;gBACnC,CAAC,CACF,CAAC;;QACJ,CAAC;sCAAE;QAAC,WAAW;KAAC,CAAC,CAAC;IAElB,OAAO,SAAS,CAAC;AACnB,CAAC,CAAC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 1481, "column": 0}, "map": {"version":3,"file":"useCurrentUrl.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/shared/hooks/useCurrentUrl.ts"],"sourcesContent":["import { useEffect, useState } from \"react\";\n\nconst useCurrentUrl = () => {\n  const [currentUrl, setCurrentUrl] = useState<string | undefined>();\n  // update the current url when the url changes\n  useEffect(() => {\n    const handleUrlChange = () => {\n      setCurrentUrl(window.location.href);\n    };\n    window.addEventListener(\"popstate\", handleUrlChange);\n    window.addEventListener(\"pushstate\", handleUrlChange);\n    window.addEventListener(\"replacestate\", handleUrlChange);\n\n    handleUrlChange();\n\n    return () => {\n      if (typeof window !== \"undefined\") {\n        window.removeEventListener(\"popstate\", handleUrlChange);\n        window.removeEventListener(\"pushstate\", handleUrlChange);\n        window.removeEventListener(\"replacestate\", handleUrlChange);\n      }\n    };\n  }, []);\n\n  return currentUrl;\n};\nexport { useCurrentUrl };\n"],"names":[],"mappings":";;;AAAA,OAAO,EAAE,SAAS,EAAE,QAAQ,EAAE,MAAM,OAAO,CAAC;;AAE5C,MAAM,aAAa,GAAG,GAAG,EAAE;IACzB,MAAM,CAAC,UAAU,EAAE,aAAa,CAAC,qKAAG,WAAA,AAAQ,EAAsB,CAAC;IACnE,8CAA8C;KAC9C,6KAAA,AAAS;mCAAC,GAAG,EAAE;YACb,MAAM,eAAe;2DAAG,GAAG,EAAE;oBAC3B,aAAa,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;gBACtC,CAAC,CAAC;;YACF,MAAM,CAAC,gBAAgB,CAAC,UAAU,EAAE,eAAe,CAAC,CAAC;YACrD,MAAM,CAAC,gBAAgB,CAAC,WAAW,EAAE,eAAe,CAAC,CAAC;YACtD,MAAM,CAAC,gBAAgB,CAAC,cAAc,EAAE,eAAe,CAAC,CAAC;YAEzD,eAAe,EAAE,CAAC;YAElB;2CAAO,GAAG,EAAE;oBACV,IAAI,OAAO,MAAM,KAAK,WAAW,EAAE,CAAC;wBAClC,MAAM,CAAC,mBAAmB,CAAC,UAAU,EAAE,eAAe,CAAC,CAAC;wBACxD,MAAM,CAAC,mBAAmB,CAAC,WAAW,EAAE,eAAe,CAAC,CAAC;wBACzD,MAAM,CAAC,mBAAmB,CAAC,cAAc,EAAE,eAAe,CAAC,CAAC;oBAC9D,CAAC;gBACH,CAAC,CAAC;;QACJ,CAAC;kCAAE,EAAE,CAAC,CAAC;IAEP,OAAO,UAAU,CAAC;AACpB,CAAC,CAAC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 1521, "column": 0}, "map": {"version":3,"file":"CivicAuthConfigContext.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/shared/providers/CivicAuthConfigContext.tsx"],"sourcesContent":["\"use client\";\nimport { DEFAULT_AUTH_SERVER, DEFAULT_SCOPES } from \"@/constants.js\";\nimport React, { createContext, useMemo, type ReactNode } from \"react\";\nimport { useOAuthEndpoints } from \"@/shared/hooks/useOAuthEndpoints.js\";\nimport { useCurrentUrl } from \"@/shared/hooks/useCurrentUrl.js\";\nimport type { CivicAuthConfig } from \"../lib/types.js\";\nimport type { DisplayMode } from \"@/types.js\";\n\nconst defaultConfig: CivicAuthConfig = null;\n\ntype CivicAuthConfigContextType = {\n  children: ReactNode;\n  oauthServer?: string;\n  clientId: string;\n  scopes?: string[];\n  redirectUrl?: string;\n  logoutRedirectUrl?: string;\n  nonce?: string;\n  challengeUrl?: string;\n  refreshUrl?: string;\n  logoutUrl?: string;\n  logoutCallbackUrl?: string;\n  displayMode?: DisplayMode;\n};\n// Context for exposing Config specifically to the TokenProvider\nconst CivicAuthConfigContext = createContext<CivicAuthConfig>(defaultConfig);\n\nconst CivicAuthConfigProvider = ({\n  children,\n  oauthServer,\n  clientId,\n  redirectUrl: inputRedirectUrl,\n  nonce,\n  challengeUrl,\n  refreshUrl,\n  logoutUrl,\n  scopes,\n  logoutRedirectUrl: inputLogoutRedirectUrl,\n  displayMode = \"iframe\",\n}: CivicAuthConfigContextType) => {\n  const currentUrl = useCurrentUrl();\n\n  const redirectUrl = useMemo(() => {\n    const useUrl = inputRedirectUrl || currentUrl;\n    if (useUrl) {\n      return `${useUrl.split(\"?\")[0]}`;\n    }\n    return \"\";\n  }, [currentUrl, inputRedirectUrl]);\n  const endpoints = useOAuthEndpoints(oauthServer);\n\n  const logoutRedirectUrl = useMemo(() => {\n    const useUrl = inputLogoutRedirectUrl || currentUrl;\n    if (useUrl) {\n      return `${useUrl.split(\"?\")[0]}`;\n    }\n    return \"\";\n  }, [currentUrl, inputLogoutRedirectUrl]);\n\n  const value = useMemo(\n    () =>\n      endpoints\n        ? {\n            clientId,\n            redirectUrl,\n            oauthServer: oauthServer || DEFAULT_AUTH_SERVER,\n            endpoints,\n            nonce,\n            challengeUrl,\n            refreshUrl,\n            logoutUrl,\n            scopes: scopes || DEFAULT_SCOPES,\n            logoutRedirectUrl,\n            displayMode,\n          }\n        : null,\n    [\n      clientId,\n      redirectUrl,\n      oauthServer,\n      endpoints,\n      nonce,\n      challengeUrl,\n      refreshUrl,\n      logoutUrl,\n      scopes,\n      logoutRedirectUrl,\n      displayMode,\n    ],\n  );\n  return (\n    <CivicAuthConfigContext.Provider value={value}>\n      {children}\n    </CivicAuthConfigContext.Provider>\n  );\n};\n\nexport { CivicAuthConfigProvider, CivicAuthConfigContext };\n"],"names":[],"mappings":";;;;;AACA,OAAO,EAAE,mBAAmB,EAAE,cAAc,EAAE,MAAM,gBAAgB,CAAC;AACrE,OAAO,KAAK,EAAE,EAAE,aAAa,EAAE,OAAO,EAAkB,MAAM,OAAO,CAAC;AACtE,OAAO,EAAE,iBAAiB,EAAE,MAAM,qCAAqC,CAAC;AACxE,OAAO,EAAE,aAAa,EAAE,MAAM,iCAAiC,CAAC;AAJhE,YAAY,CAAC;;;;;;AAQb,MAAM,aAAa,GAAoB,IAAI,CAAC;AAgB5C,gEAAgE;AAChE,MAAM,sBAAsB,qKAAG,gBAAa,AAAb,EAA+B,aAAa,CAAC,CAAC;AAE7E,MAAM,uBAAuB,GAAG,CAAC,EAC/B,QAAQ,EACR,WAAW,EACX,QAAQ,EACR,WAAW,EAAE,gBAAgB,EAC7B,KAAK,EACL,YAAY,EACZ,UAAU,EACV,SAAS,EACT,MAAM,EACN,iBAAiB,EAAE,sBAAsB,EACzC,WAAW,GAAG,QAAQ,EACK,EAAE,EAAE;IAC/B,MAAM,UAAU,iOAAG,gBAAA,AAAa,EAAE,CAAC;IAEnC,MAAM,WAAW,GAAG,4KAAA,AAAO;wDAAC,GAAG,EAAE;YAC/B,MAAM,MAAM,GAAG,gBAAgB,IAAI,UAAU,CAAC;YAC9C,IAAI,MAAM,EAAE,CAAC;gBACX,OAAO,GAAG,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;YACnC,CAAC;YACD,OAAO,EAAE,CAAC;QACZ,CAAC;uDAAE;QAAC,UAAU;QAAE,gBAAgB;KAAC,CAAC,CAAC;IACnC,MAAM,SAAS,qOAAG,oBAAA,AAAiB,EAAC,WAAW,CAAC,CAAC;IAEjD,MAAM,iBAAiB,qKAAG,UAAA,AAAO;8DAAC,GAAG,EAAE;YACrC,MAAM,MAAM,GAAG,sBAAsB,IAAI,UAAU,CAAC;YACpD,IAAI,MAAM,EAAE,CAAC;gBACX,OAAO,GAAG,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;YACnC,CAAC;YACD,OAAO,EAAE,CAAC;QACZ,CAAC;6DAAE;QAAC,UAAU;QAAE,sBAAsB;KAAC,CAAC,CAAC;IAEzC,MAAM,KAAK,IAAG,2KAAA,AAAO;kDACnB,GAAG,CACD,CADG,QACM,GACL;gBACE,QAAQ;gBACR,WAAW;gBACX,WAAW,EAAE,WAAW,uMAAI,sBAAmB;gBAC/C,SAAS;gBACT,KAAK;gBACL,YAAY;gBACZ,UAAU;gBACV,SAAS;gBACT,MAAM,EAAE,MAAM,uMAAI,iBAAc;gBAChC,iBAAiB;gBACjB,WAAW;aACZ,GACD,IAAI;iDACV;QACE,QAAQ;QACR,WAAW;QACX,WAAW;QACX,SAAS;QACT,KAAK;QACL,YAAY;QACZ,UAAU;QACV,SAAS;QACT,MAAM;QACN,iBAAiB;QACjB,WAAW;KACZ,CACF,CAAC;IACF,OAAO,2OACL,MAAA,EAAC,sBAAsB,CAAC,QAAQ,EAAA;QAAC,KAAK,EAAE,KAAK;QAAA,UAC1C,QAAQ;IAAA,EACuB,CACnC,CAAC;AACJ,CAAC,CAAC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 1606, "column": 0}, "map": {"version":3,"file":"windowUtil.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/lib/windowUtil.ts"],"sourcesContent":["/**\n * Extend the Window interface to include Cypress\n */\ndeclare global {\n  interface Window {\n    Cypress?: unknown;\n  }\n}\n\n/**\n * Detects if the current window is running inside an iframe\n * Uses multiple methods to improve detection reliability\n * If detected as iframe, adds an immediate style blocker to prevent content flashes\n */\nconst isWindowInIframe = (window: Window): boolean => {\n  // Make sure we're in a browser environment\n  if (typeof window === \"undefined\") {\n    return false;\n  }\n\n  // Check if running in Cypress\n  const isCypress = Boolean(\n    window.Cypress || window.parent?.Cypress || window.top?.Cypress,\n  );\n\n  // If we're in Cypress, don't treat it as an iframe\n  if (isCypress) {\n    return false;\n  }\n\n  let isInIframe = false;\n\n  try {\n    // Method 1: Check for frameElement\n    // This can throw a cross-origin error, but works reliably for same-origin frames\n    if (window.frameElement !== null) {\n      isInIframe = true;\n    }\n\n    // Method 2: Check specifically for our civic auth iframe\n    // Use explicit type assertion to handle the TypeScript issue\n    const frameEl = window.frameElement as HTMLElement | null;\n    if (frameEl && frameEl.id === \"civic-auth-iframe\") {\n      isInIframe = true;\n    }\n  } catch {\n    // If we get a security/cross-origin error, it's likely because\n    // we're in an iframe from a different origin\n    // So this is actually a positive signal that we're in an iframe\n    isInIframe = true;\n  }\n\n  return isInIframe;\n};\n\nconst removeParamsWithoutReload = (paramsToRemove: string[]) => {\n  const url = new URL(window.location.href);\n  paramsToRemove.forEach((param: string) => {\n    url.searchParams.delete(param);\n  });\n  try {\n    window.history.replaceState({}, \"\", url);\n    window.dispatchEvent(new Event(\"popstate\"));\n  } catch (error) {\n    console.warn(\"window.history.replaceState failed\", error);\n  }\n};\n\nexport { isWindowInIframe, removeParamsWithoutReload };\n"],"names":[],"mappings":"AASA;;;;GAIG;;;;AACH,MAAM,gBAAgB,GAAG,CAAC,MAAc,EAAW,EAAE;IACnD,2CAA2C;IAC3C,IAAI,OAAO,MAAM,MAAK,WAAW,EAAE,CAAC;QAClC,OAAO,KAAK,CAAC;IACf,CAAC;IAED,8BAA8B;IAC9B,MAAM,SAAS,GAAG,OAAO,CACvB,MAAM,EAAC,OAAO,IAAI,MAAM,EAAC,MAAM,EAAE,OAAO,IAAI,MAAM,EAAC,GAAG,EAAE,OAAO,CAChE,CAAC;IAEF,mDAAmD;IACnD,IAAI,SAAS,EAAE,CAAC;QACd,OAAO,KAAK,CAAC;IACf,CAAC;IAED,IAAI,UAAU,GAAG,KAAK,CAAC;IAEvB,IAAI,CAAC;QACH,mCAAmC;QACnC,iFAAiF;QACjF,IAAI,MAAM,EAAC,YAAY,KAAK,IAAI,EAAE,CAAC;YACjC,UAAU,GAAG,IAAI,CAAC;QACpB,CAAC;QAED,yDAAyD;QACzD,6DAA6D;QAC7D,MAAM,OAAO,GAAG,MAAM,EAAC,YAAkC,CAAC;QAC1D,IAAI,OAAO,IAAI,OAAO,CAAC,EAAE,KAAK,mBAAmB,EAAE,CAAC;YAClD,UAAU,GAAG,IAAI,CAAC;QACpB,CAAC;IACH,CAAC,CAAC,OAAM,CAAC;QACP,+DAA+D;QAC/D,6CAA6C;QAC7C,gEAAgE;QAChE,UAAU,GAAG,IAAI,CAAC;IACpB,CAAC;IAED,OAAO,UAAU,CAAC;AACpB,CAAC,CAAC;AAEF,MAAM,yBAAyB,GAAG,CAAC,cAAwB,EAAE,EAAE;IAC7D,MAAM,GAAG,GAAG,IAAI,GAAG,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;IAC1C,cAAc,CAAC,OAAO,CAAC,CAAC,KAAa,EAAE,EAAE;QACvC,GAAG,CAAC,YAAY,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;IACjC,CAAC,CAAC,CAAC;IACH,IAAI,CAAC;QACH,MAAM,CAAC,OAAO,CAAC,YAAY,CAAC,CAAA,CAAE,EAAE,EAAE,EAAE,GAAG,CAAC,CAAC;QACzC,MAAM,CAAC,aAAa,CAAC,IAAI,KAAK,CAAC,UAAU,CAAC,CAAC,CAAC;IAC9C,CAAC,CAAC,OAAO,KAAK,EAAE,CAAC;QACf,OAAO,CAAC,IAAI,CAAC,oCAAoC,EAAE,KAAK,CAAC,CAAC;IAC5D,CAAC;AACH,CAAC,CAAC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 1666, "column": 0}, "map": {"version":3,"file":"useIsInIframe.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/shared/hooks/useIsInIframe.ts"],"sourcesContent":["import { isWindowInIframe } from \"@/lib/windowUtil.js\";\nimport { useEffect, useState } from \"react\";\n\n/**\n * React hook to detect if the current window is running inside an iframe\n * @returns boolean indicating whether the current window is in an iframe\n */\nconst useIsInIframe = () => {\n  // Start with undefined to indicate we don't know yet\n  const [isInIframe, setIsInIframe] = useState<boolean | undefined>(undefined);\n\n  useEffect(() => {\n    if (typeof globalThis.window !== \"undefined\") {\n      const isInIframeVal = isWindowInIframe(globalThis.window);\n      setIsInIframe(isInIframeVal);\n    } else {\n      setIsInIframe(false);\n    }\n  }, []);\n\n  // Return false if undefined to be safe\n  return isInIframe === undefined ? false : isInIframe;\n};\n\nexport { useIsInIframe };\n"],"names":[],"mappings":";;;AAAA,OAAO,EAAE,gBAAgB,EAAE,MAAM,qBAAqB,CAAC;AACvD,OAAO,EAAE,SAAS,EAAE,QAAQ,EAAE,MAAM,OAAO,CAAC;;;AAE5C;;;GAGG,CACH,MAAM,aAAa,GAAG,GAAG,EAAE;IACzB,qDAAqD;IACrD,MAAM,CAAC,UAAU,EAAE,aAAa,CAAC,IAAG,4KAAA,AAAQ,EAAsB,SAAS,CAAC,CAAC;sKAE7E,YAAA,AAAS;mCAAC,GAAG,EAAE;YACb,IAAI,OAAO,UAAU,CAAC,MAAM,KAAK,WAAW,EAAE,CAAC;gBAC7C,MAAM,aAAa,kNAAG,mBAAA,AAAgB,EAAC,UAAU,CAAC,MAAM,CAAC,CAAC;gBAC1D,aAAa,CAAC,aAAa,CAAC,CAAC;YAC/B,CAAC,MAAM,CAAC;gBACN,aAAa,CAAC,KAAK,CAAC,CAAC;YACvB,CAAC;QACH,CAAC;kCAAE,EAAE,CAAC,CAAC;IAEP,uCAAuC;IACvC,OAAO,UAAU,KAAK,SAAS,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,UAAU,CAAC;AACvD,CAAC,CAAC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 1700, "column": 0}, "map": {"version":3,"file":"IframeProvider.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/shared/providers/IframeProvider.tsx"],"sourcesContent":["\"use client\";\nimport type { Dispatch, ReactNode, RefObject, SetStateAction } from \"react\";\nimport React, { createContext, useMemo, useRef, useState } from \"react\";\nimport { useIsInIframe } from \"@/shared/hooks/useIsInIframe.js\";\nimport type { IframeMode, LoginAppDesignOptions } from \"@/types.js\";\nimport { useLocalStorage, useDarkMode } from \"usehooks-ts\";\nimport { DARK_BACKGROUND_COLOR, LIGHT_BACKGROUND_COLOR } from \"@/constants.js\";\n\nexport type IframeProviderOutput = {\n  iframeRef: RefObject<HTMLIFrameElement> | null;\n  logoutIframeRef: RefObject<HTMLIFrameElement> | null;\n  setIframeIsVisible: Dispatch<SetStateAction<boolean>>;\n  setIframeAborted: Dispatch<SetStateAction<boolean>>;\n  iframeAborted: boolean;\n  setLogoutIframeIsVisible: Dispatch<SetStateAction<boolean>>;\n  iframeIsVisible: boolean;\n  logoutIframeIsVisible: boolean;\n  iframeMode: IframeMode;\n  renderIframe: boolean;\n  backgroundColor: string;\n  isIframeMounted: boolean;\n  setIframeMounted: Dispatch<SetStateAction<boolean>>;\n};\nconst defaultIframe: IframeProviderOutput = {\n  iframeRef: null,\n  logoutIframeRef: null,\n  setIframeIsVisible: () => {},\n  setIframeAborted: () => {},\n  setLogoutIframeIsVisible: () => {},\n  iframeIsVisible: false,\n  iframeAborted: false,\n  logoutIframeIsVisible: false,\n  iframeMode: \"modal\",\n  renderIframe: false,\n  backgroundColor: \"white\",\n  isIframeMounted: false,\n  setIframeMounted: () => {},\n};\n\n// Context for exposing Iframe specifically to the TokenProvider\nconst IframeContext = createContext<IframeProviderOutput>(defaultIframe);\n\ntype IframeContextType = {\n  children: ReactNode;\n  iframeMode?: IframeMode;\n  onIframeMounted?: () => void;\n};\n\nconst IframeProvider = ({\n  children,\n  iframeMode = \"modal\",\n}: IframeContextType) => {\n  const iframeRef = useRef<HTMLIFrameElement>(null);\n  const logoutIframeRef = useRef<HTMLIFrameElement>(null);\n  const isInIframe = useIsInIframe();\n  const [isIframeMounted, setIframeMounted] = useState(false);\n  const [iframeIsVisible, setIframeIsVisible] = useState(false);\n  const [iframeAborted, setIframeAborted] = useState(false);\n  const [logoutIframeIsVisible, setLogoutIframeIsVisible] = useState(false);\n  const [designOptions] = useLocalStorage<LoginAppDesignOptions>(\n    `loginAppDesign`,\n    { colorMode: \"auto\" },\n  );\n  const { isDarkMode } = useDarkMode();\n  const loginAppBackgroundColor = useMemo(() => {\n    const colorFromWindow = isDarkMode\n      ? DARK_BACKGROUND_COLOR\n      : LIGHT_BACKGROUND_COLOR;\n\n    const colorMode = designOptions?.colorMode;\n    const colorFromStorage =\n      colorMode === \"dark\" ? DARK_BACKGROUND_COLOR : LIGHT_BACKGROUND_COLOR;\n\n    // if the color mode is auto then use the window matchMedia to determine the color mode\n    // otherwise use the stored local color mode set from the login-app\n    return colorMode && colorMode !== \"auto\"\n      ? colorFromStorage\n      : colorFromWindow;\n  }, [designOptions, isDarkMode]);\n\n  const renderIframe = iframeMode === \"modal\" && !isInIframe;\n\n  return (\n    <IframeContext.Provider\n      value={{\n        iframeRef,\n        logoutIframeRef,\n        setIframeIsVisible,\n        iframeAborted,\n        setIframeAborted,\n        setLogoutIframeIsVisible,\n        iframeIsVisible,\n        logoutIframeIsVisible,\n        iframeMode,\n        renderIframe,\n        backgroundColor: loginAppBackgroundColor,\n        setIframeMounted,\n        isIframeMounted,\n      }}\n    >\n      {children}\n    </IframeContext.Provider>\n  );\n};\n\nexport type { IframeContextType };\nexport { IframeProvider, IframeContext };\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 1785, "column": 0}, "map": {"version":3,"file":"types.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/services/types.ts"],"sourcesContent":["import type { OIDCTokenResponseBody, SessionData } from \"@/types.js\";\n\n// A PKCEConsumer can get a code challenge to use in the login process\n// A PKCEProducer can also generate and store verifiers. The producer must also be a consumer in order to get the challenge from an existing flow\n// Examples:\n// - Client-only SPA: The SPA generates the code challenge and verifier, stores the verifier in state and returns the code challenge\n// Note - The SPA should use PKCEProducer instead to do both\n// - Client-side of a client/server app: The client calls the backend to get the challenge.\n// - Server-side: The server should generate a new stored verifier and derive the challenge from it.\nexport interface PKCEConsumer {\n  // Retrieve a new PKCE challenge\n  getCodeChallenge(): Promise<string>;\n}\n\n// All producers are consumers, because the producer can get its own challenge\nexport interface PKCEProducer extends PKCEConsumer {\n  // Retrieve the PKCE challenge from the session if one exists\n  getCodeVerifier(): Promise<string | null>;\n}\n\n// A service that can initiate requests to login or log out\nexport interface AuthenticationInitiator {\n  // trigger a new login\n  signIn(iframeRef: HTMLIFrameElement | null): Promise<URL>;\n\n  // trigger a new logout\n  signOut(idToken: string, iframeRef: HTMLIFrameElement | null): Promise<URL>;\n}\n\n// A service that can resolve an authentication request according to the OAuth Auth Code grant types\nexport interface AuthenticationResolver {\n  // Given an auth code, get the tokens from the auth server and store them. works in PKCE and non-PKCE environments\n  // Note, if we choose later to implement other grants, this method would move into a subinterface specifically\n  // for the authorization code grant type.\n  // The return type is just for convenience and can be ignored, as the same data would be provided by getSessionData\n  tokenExchange(code: string, state: string): Promise<OIDCTokenResponseBody>;\n\n  // If the tokens have already been retrieved, return them\n  getSessionData(): Promise<SessionData | null>;\n\n  getEndSessionEndpoint(): Promise<string | null>;\n  // If an existing session is found, validate it and return the session data\n  validateExistingSession(autoRefresh?: boolean): Promise<SessionData>;\n\n  // if there's a refresh token, use it to get new tokens\n  // failing gracefully and deleting the bad refresh_token on failure\n  tryRefreshTokens(sessionData: SessionData | null): Promise<SessionData>;\n}\n\nexport interface AuthenticationRefresher {\n  refreshTokens: () => Promise<OIDCTokenResponseBody>;\n}\n\nexport class PopupError extends Error {\n  constructor(message: string) {\n    super(message);\n    Object.setPrototypeOf(this, PopupError.prototype);\n  }\n}\n"],"names":[],"mappings":";;;AAqDM,MAAO,UAAW,SAAQ,KAAK;IACnC,YAAY,OAAe,CAAA;QACzB,KAAK,CAAC,OAAO,CAAC,CAAC;QACf,MAAM,CAAC,cAAc,CAAC,IAAI,EAAE,UAAU,CAAC,SAAS,CAAC,CAAC;IACpD,CAAC;CACF","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 1800, "column": 0}, "map": {"version":3,"file":"postMessage.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/lib/postMessage.ts"],"sourcesContent":["import type { LoginPostMessage } from \"@/types.js\";\n\nconst validateLoginAppPostMessage = (\n  event: LoginPostMessage,\n  clientId: string,\n): boolean => {\n  const caseEvent = event as LoginPostMessage;\n  if (\n    !caseEvent.clientId ||\n    !caseEvent.source ||\n    !caseEvent.type ||\n    caseEvent.clientId !== clientId ||\n    caseEvent.source !== \"civicloginApp\"\n  ) {\n    return false;\n  }\n  return true;\n};\n\nexport { validateLoginAppPostMessage };\n"],"names":[],"mappings":";;;AAEA,MAAM,2BAA2B,GAAG,CAClC,KAAuB,EACvB,QAAgB,EACP,EAAE;IACX,MAAM,SAAS,GAAG,KAAyB,CAAC;IAC5C,IACE,CAAC,SAAS,CAAC,QAAQ,IACnB,CAAC,SAAS,CAAC,MAAM,IACjB,CAAC,SAAS,CAAC,IAAI,IACf,SAAS,CAAC,QAAQ,KAAK,QAAQ,IAC/B,SAAS,CAAC,MAAM,KAAK,eAAe,EACpC,CAAC;QACD,OAAO,KAAK,CAAC;IACf,CAAC;IACD,OAAO,IAAI,CAAC;AACd,CAAC,CAAC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 1818, "column": 0}, "map": {"version":3,"file":"types.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/types.ts"],"sourcesContent":["import type { TokenResponseBody } from \"oslo/oauth2\";\nimport type { JWTPayload } from \"jose\";\n\ntype UnknownObject = Record<string, unknown>;\ntype EmptyObject = Record<string, never>;\n\nexport enum AuthStatus {\n  AUTHENTICATED = \"authenticated\",\n  UNAUTHENTICATED = \"unauthenticated\",\n  AUTHENTICATING = \"authenticating\",\n  ERROR = \"error\",\n  SIGNING_OUT = \"signing_out\",\n}\n// Display modes for the auth flow\ntype DisplayMode = \"iframe\" | \"redirect\" | \"new_tab\" | \"custom_tab\";\n\ntype ColorMode = \"light\" | \"dark\" | \"auto\";\n// Combined Auth and Session Service\ninterface AuthSessionService {\n  // TODO DK NOTES: Should be in BrowserAuthSessionService, not relevant on backend\n  loadAuthorizationUrl(\n    authorizationURL: string,\n    displayMode: DisplayMode,\n  ): void;\n  // TODO DK NOTES: overrideDisplayMode parameter not appropriate here - also - do we need both this and the above in the interface?\n  getAuthorizationUrl(\n    scopes: string[],\n    overrideDisplayMode: DisplayMode,\n    nonce?: string,\n  ): Promise<string>;\n  // TODO DK NOTES: display mode should be in browser version only. Also, do we need this and the above two in the top-level interface?\n  signIn(\n    displayMode: DisplayMode,\n    scopes: string[],\n    nonce?: string,\n  ): Promise<void>;\n  // TODO DK NOTES: Input should be an auth code - do not assume it comes via an url\n  tokenExchange(responseUrl: string): Promise<SessionData>;\n  // TODO DK NOTES: Should be async for flexibility\n  getSessionData(): SessionData;\n  // TODO DK NOTES: Should be async for flexibility\n  updateSessionData(data: SessionData): void;\n  getUserInfoService(): Promise<UserInfoService>;\n}\n\n// Token Service\ninterface TokenService {\n  exchangeCodeForTokens(authCode: string): Promise<Tokens>;\n  validateIdToken(idToken: string, nonce: string): boolean;\n  refreshAccessToken(refreshToken: string): Promise<Tokens>;\n}\n\n// User Info Service\ninterface UserInfoService {\n  getUserInfo<T extends UnknownObject>(\n    accessToken: string,\n    idToken: string | null,\n  ): Promise<User<T> | null>;\n}\n\n// Resource Service\ninterface ResourceService {\n  getProtectedResource(accessToken: string): Promise<unknown>;\n}\n\n// Auth Request (for internal use in AuthSessionService)\ntype AuthRequest = {\n  clientId: string;\n  redirectUri: string;\n  state: string;\n  nonce: string;\n  scope: string;\n};\n\ntype Endpoints = {\n  jwks: string;\n  auth: string;\n  token: string;\n  userinfo: string;\n  challenge?: string;\n  endsession: string;\n};\n\ntype Config = {\n  oauthServer: string;\n  endpoints?: Endpoints;\n};\n\ntype SessionData = {\n  authenticated: boolean; // TODO can this be inferred from the presence of the tokens?\n  state?: string;\n  accessToken?: string;\n  refreshToken?: string;\n  idToken?: string;\n  accessTokenExpiresAt?: number;\n  codeVerifier?: string;\n  displayMode?: DisplayMode;\n  openerUrl?: string;\n};\n\ntype OIDCTokenResponseBody = TokenResponseBody & {\n  id_token: string;\n  access_token_expires_at?: number;\n};\n\ntype ParsedTokens = {\n  id_token: JWTPayload;\n  access_token: JWTPayload;\n  refresh_token?: string;\n};\n\n// The format we expose to the frontend via hooks\ntype ForwardedTokens = Record<\n  string,\n  {\n    idToken?: string;\n    accessToken?: string;\n    refreshToken?: string;\n  }\n>;\n\n// The format in the JWT payload\ntype ForwardedTokensJWT = Record<\n  string,\n  {\n    id_token?: string;\n    access_token?: string;\n    refresh_token?: string;\n    scope?: string;\n  }\n>;\n\ntype IdTokenPayload = JWTPayload & {\n  forwardedTokens?: ForwardedTokensJWT;\n  email?: string;\n  name?: string;\n  picture?: string;\n  nonce: string;\n  at_hash: string;\n};\n\nconst tokenKeys = [\n  \"sub\",\n  \"idToken\",\n  \"accessToken\",\n  \"refreshToken\",\n  \"forwardedTokens\",\n] as const;\n\nexport type OAuthTokens = {\n  idToken?: string;\n  accessToken?: string;\n  refreshToken?: string;\n};\n// Derive the Tokens type from the array\ntype Tokens = {\n  [K in (typeof tokenKeys)[number]]: K extends \"forwardedTokens\"\n    ? ForwardedTokens\n    : string;\n};\n\n// Base user interface\ntype BaseUser = {\n  id: string;\n  email?: string;\n  username?: string;\n  name?: string;\n  given_name?: string;\n  family_name?: string;\n  picture?: string;\n  updated_at?: Date;\n};\n\ntype User<T extends UnknownObject | EmptyObject = EmptyObject> =\n  T extends EmptyObject ? BaseUser : BaseUser & T;\n\ntype OpenIdConfiguration = {\n  authorization_endpoint: string;\n  claims_parameter_supported: boolean;\n  claims_supported: string[];\n  code_challenge_methods_supported: string[];\n  end_session_endpoint: string;\n  grant_types_supported: string[];\n  issuer: string;\n  jwks_uri: string;\n  authorization_response_iss_parameter_supported: boolean;\n  response_modes_supported: string[];\n  response_types_supported: string[];\n  scopes_supported: string[];\n  subject_types_supported: string[];\n  token_endpoint_auth_methods_supported: string[];\n  token_endpoint_auth_signing_alg_values_supported: string[];\n  token_endpoint: string;\n  id_token_signing_alg_values_supported: string[];\n  pushed_authorization_request_endpoint: string;\n  request_parameter_supported: boolean;\n  request_uri_parameter_supported: boolean;\n  userinfo_endpoint: string;\n  claim_types_supported: string[];\n};\n\ntype LoginPostMessage = {\n  source: string;\n  type: string;\n  clientId: string;\n  data:\n    | {\n        url: string;\n      }\n    | LoginAppDesignOptions;\n};\n\nexport type IframeAuthMessage = {\n  source: \"civicloginApp\";\n  type: \"auth_error\" | \"auth_error_try_again\";\n  clientId: string;\n  data: {\n    url?: string;\n    error?: string;\n  };\n};\n\nexport type LoginAppDesignOptions = {\n  colorMode: ColorMode;\n};\nexport type {\n  LoginPostMessage,\n  AuthSessionService,\n  TokenService,\n  UserInfoService,\n  ResourceService,\n  AuthRequest,\n  Tokens,\n  Endpoints,\n  Config,\n  SessionData,\n  OIDCTokenResponseBody,\n  ParsedTokens,\n  BaseUser,\n  User,\n  DisplayMode,\n  UnknownObject,\n  EmptyObject,\n  ForwardedTokens,\n  ForwardedTokensJWT,\n  IdTokenPayload,\n  OpenIdConfiguration,\n  ColorMode,\n};\nexport { tokenKeys };\nexport interface AuthStorage {\n  get(key: string): Promise<string | null>;\n  set(key: string, value: string): Promise<void>;\n  delete(key: string): Promise<void>;\n}\n\nexport type IframeMode = \"embedded\" | \"modal\";\n"],"names":[],"mappings":";;;;AAMA,IAAY,UAMX;AAND,CAAA,SAAY,UAAU;IACpB,UAAA,CAAA,gBAAA,GAAA,eAA+B,CAAA;IAC/B,UAAA,CAAA,kBAAA,GAAA,iBAAmC,CAAA;IACnC,UAAA,CAAA,iBAAA,GAAA,gBAAiC,CAAA;IACjC,UAAA,CAAA,QAAA,GAAA,OAAe,CAAA;IACf,UAAA,CAAA,cAAA,GAAA,aAA2B,CAAA;AAC7B,CAAC,EANW,UAAU,IAAA,CAAV,UAAU,GAAA,CAAA,CAAA,GAMrB;AAiID,MAAM,SAAS,GAAG;IAChB,KAAK;IACL,SAAS;IACT,aAAa;IACb,cAAc;IACd,iBAAiB;CACT,CAAC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 1845, "column": 0}, "map": {"version":3,"file":"session.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/shared/lib/session.ts"],"sourcesContent":["import {\n  clearAuthServerSession,\n  clearTokens,\n  clearUser,\n  retrieveTokens,\n} from \"@/shared/lib/util.js\";\nimport { decodeJwt, type JWTPayload } from \"jose\";\nimport {\n  tokenKeys,\n  type AuthStorage,\n  type OAuthTokens,\n  type User,\n  type EmptyObject,\n  type UnknownObject,\n} from \"@/types.js\";\nimport { JWT_PAYLOAD_KNOWN_CLAIM_KEYS } from \"@/constants.js\";\n\n// Function to omit keys from an object\nconst omitKeys = <K extends keyof T, T extends Record<string, unknown>>(\n  keys: K[],\n  obj: T,\n): Omit<T, K> => {\n  const result = { ...obj };\n  keys.forEach((key) => {\n    delete result[key];\n  });\n  return result;\n};\n\nconst parseJWTToType = <T extends UnknownObject = EmptyObject>(\n  jwt: string,\n): JWTPayload & T => {\n  const parseResult = decodeJwt(jwt);\n  return parseResult as JWTPayload & T;\n};\n\nexport async function getUser<T extends UnknownObject = EmptyObject>(\n  storage: AuthStorage,\n): Promise<User<T> | null> {\n  const tokens = await retrieveTokens(storage);\n  if (!tokens || !tokens.id_token) return null;\n\n  const parsedToken = parseJWTToType<T>(tokens.id_token);\n  // it might be preferable to throw here\n  if (!parsedToken.sub) return null;\n\n  // set the user ID from the token sub\n  const userWithAdditionalTokenFields = {\n    ...(parsedToken as T),\n    id: parsedToken.sub,\n  };\n\n  // Assumes all information is in the ID token\n  // remove the token keys from the user object to stop it getting too large\n  return omitKeys(\n    [...JWT_PAYLOAD_KNOWN_CLAIM_KEYS, ...tokenKeys],\n    userWithAdditionalTokenFields,\n  ) as User<T>;\n}\n\nexport async function getTokens(\n  storage: AuthStorage,\n): Promise<OAuthTokens | null> {\n  const storageData = await retrieveTokens(storage);\n  if (!storageData) return null;\n\n  return {\n    idToken: storageData.id_token,\n    accessToken: storageData.access_token,\n    refreshToken: storageData.refresh_token,\n  };\n}\n\n/**\n * Use the provided storage to clear all authentication cookies\n * @param storage\n */\nexport const clearAuthCookies = async (storage: AuthStorage) => {\n  await clearTokens(storage);\n  await clearUser(storage);\n  await clearAuthServerSession(storage);\n};\n"],"names":[],"mappings":";;;;;AAAA,OAAO,EACL,sBAAsB,EACtB,WAAW,EACX,SAAS,EACT,cAAc,GACf,MAAM,sBAAsB,CAAC;AAC9B,OAAO,EAAE,SAAS,EAAmB,MAAM,MAAM,CAAC;AAClD,OAAO,EACL,SAAS,GAMV,MAAM,YAAY,CAAC;AACpB,OAAO,EAAE,4BAA4B,EAAE,MAAM,gBAAgB,CAAC;;;;;AAE9D,uCAAuC;AACvC,MAAM,QAAQ,GAAG,CACf,IAAS,EACT,GAAM,EACM,EAAE;IACd,MAAM,MAAM,GAAG;QAAE,GAAG,GAAG;IAAA,CAAE,CAAC;IAC1B,IAAI,CAAC,OAAO,CAAC,CAAC,GAAG,EAAE,EAAE;QACnB,OAAO,MAAM,CAAC,GAAG,CAAC,CAAC;IACrB,CAAC,CAAC,CAAC;IACH,OAAO,MAAM,CAAC;AAChB,CAAC,CAAC;AAEF,MAAM,cAAc,GAAG,CACrB,GAAW,EACK,EAAE;IAClB,MAAM,WAAW,wKAAG,YAAA,AAAS,EAAC,GAAG,CAAC,CAAC;IACnC,OAAO,WAA6B,CAAC;AACvC,CAAC,CAAC;AAEK,KAAK,UAAU,OAAO,CAC3B,OAAoB;IAEpB,MAAM,MAAM,GAAG,yNAAM,iBAAA,AAAc,EAAC,OAAO,CAAC,CAAC;IAC7C,IAAI,CAAC,MAAM,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,OAAO,IAAI,CAAC;IAE7C,MAAM,WAAW,GAAG,cAAc,CAAI,MAAM,CAAC,QAAQ,CAAC,CAAC;IACvD,uCAAuC;IACvC,IAAI,CAAC,WAAW,CAAC,GAAG,EAAE,OAAO,IAAI,CAAC;IAElC,qCAAqC;IACrC,MAAM,6BAA6B,GAAG;QACpC,GAAI,WAAiB;QACrB,EAAE,EAAE,WAAW,CAAC,GAAG;KACpB,CAAC;IAEF,6CAA6C;IAC7C,0EAA0E;IAC1E,OAAO,QAAQ,CACb,CAAC;8MAAG,+BAA4B,EAAE;0MAAG,YAAS;KAAC,EAC/C,6BAA6B,CACnB,CAAC;AACf,CAAC;AAEM,KAAK,UAAU,SAAS,CAC7B,OAAoB;IAEpB,MAAM,WAAW,GAAG,OAAM,mOAAA,AAAc,EAAC,OAAO,CAAC,CAAC;IAClD,IAAI,CAAC,WAAW,EAAE,OAAO,IAAI,CAAC;IAE9B,OAAO;QACL,OAAO,EAAE,WAAW,CAAC,QAAQ;QAC7B,WAAW,EAAE,WAAW,CAAC,YAAY;QACrC,YAAY,EAAE,WAAW,CAAC,aAAa;KACxC,CAAC;AACJ,CAAC;AAMM,MAAM,gBAAgB,GAAG,KAAK,EAAE,OAAoB,EAAE,EAAE;IAC7D,yNAAM,cAAA,AAAW,EAAC,OAAO,CAAC,CAAC;IAC3B,yNAAM,YAAA,AAAS,EAAC,OAAO,CAAC,CAAC;IACzB,yNAAM,yBAAA,AAAsB,EAAC,OAAO,CAAC,CAAC;AACxC,CAAC,CAAC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 1910, "column": 0}, "map": {"version":3,"file":"iframeUtils.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/shared/lib/iframeUtils.ts"],"sourcesContent":["// Our custom iframe resizer doesn't add any special methods to the iframe element\n// so we can just return the iframe element directly\nexport const getIframeRef = (\n  iframeRef: HTMLIFrameElement | null | undefined,\n  allowNull = false,\n): HTMLIFrameElement => {\n  if (!iframeRef && !allowNull) {\n    throw new Error(\"iframeRef is required for displayMode 'iframe'\");\n  }\n  return iframeRef as HTMLIFrameElement;\n};\n"],"names":[],"mappings":"AAAA,kFAAkF;AAClF,oDAAoD;;;;AAC7C,MAAM,YAAY,GAAG,CAC1B,SAA+C,EAC/C,SAAS,GAAG,KAAK,EACE,EAAE;IACrB,IAAI,CAAC,SAAS,IAAI,CAAC,SAAS,EAAE,CAAC;QAC7B,MAAM,IAAI,KAAK,CAAC,gDAAgD,CAAC,CAAC;IACpE,CAAC;IACD,OAAO,SAA8B,CAAC;AACxC,CAAC,CAAC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 1927, "column": 0}, "map": {"version":3,"file":"GenericAuthenticationRefresher.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/shared/lib/GenericAuthenticationRefresher.ts"],"sourcesContent":["import { DEFAULT_AUTH_SERVER } from \"@/constants.js\";\nimport type { AuthConfig } from \"@/server/config.js\";\nimport type { AuthenticationRefresher } from \"@/services/types.js\";\nimport { retrieveTokens } from \"@/shared/lib/util.js\";\nimport type { AuthStorage, OIDCTokenResponseBody } from \"@/types.js\";\n\nexport abstract class GenericAuthenticationRefresher\n  implements AuthenticationRefresher\n{\n  protected authConfig: AuthConfig | undefined;\n  protected storage: AuthStorage | undefined;\n\n  constructor(readonly onError: (error: Error) => Promise<void>) {}\n\n  get oauthServer(): string {\n    return this.authConfig?.oauthServer || DEFAULT_AUTH_SERVER;\n  }\n\n  abstract refreshAccessToken(\n    refreshToken?: string,\n  ): Promise<OIDCTokenResponseBody>;\n\n  async getRefreshToken(): Promise<string> {\n    if (!this.storage) throw new Error(\"No storage available\");\n\n    const tokens = await retrieveTokens(this.storage);\n    if (!tokens?.refresh_token) throw new Error(\"No refresh token available\");\n    return tokens.refresh_token;\n  }\n\n  async refreshTokens() {\n    try {\n      const result = await this.refreshAccessToken();\n      return result;\n    } catch (error) {\n      // Check if this is an AbortError or network-related error\n      const errorMessage = (error as Error).message || \"\";\n      const isNetworkError =\n        errorMessage.includes(\"network\") ||\n        errorMessage.includes(\"abort\") ||\n        errorMessage.includes(\"cancel\");\n\n      if (isNetworkError) {\n        console.warn(\n          \"GenericAuthenticationRefresher: Network error during token refresh:\",\n          error,\n        );\n      } else {\n        console.error(\n          \"GenericAuthenticationRefresher: Failed to refresh tokens:\",\n          error,\n        );\n      }\n\n      await this.onError(error as Error);\n      throw error;\n    }\n  }\n}\n"],"names":[],"mappings":";;;AAAA,OAAO,EAAE,mBAAmB,EAAE,MAAM,gBAAgB,CAAC;AAGrD,OAAO,EAAE,cAAc,EAAE,MAAM,sBAAsB,CAAC;;;AAGhD,MAAgB,8BAA8B;IAM7B,QAAA;IAHX,UAAU,CAAyB;IACnC,OAAO,CAA0B;IAE3C,YAAqB,OAAwC,CAAA;QAAxC,IAAA,CAAA,OAAO,GAAP,OAAO,CAAiC;IAAG,CAAC;IAEjE,IAAI,WAAW,GAAA;QACb,OAAO,IAAI,CAAC,UAAU,EAAE,WAAW,uMAAI,sBAAmB,CAAC;IAC7D,CAAC;IAMD,KAAK,CAAC,eAAe,GAAA;QACnB,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,MAAM,IAAI,KAAK,CAAC,sBAAsB,CAAC,CAAC;QAE3D,MAAM,MAAM,GAAG,yNAAM,iBAAA,AAAc,EAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAClD,IAAI,CAAC,MAAM,EAAE,aAAa,EAAE,MAAM,IAAI,KAAK,CAAC,4BAA4B,CAAC,CAAC;QAC1E,OAAO,MAAM,CAAC,aAAa,CAAC;IAC9B,CAAC;IAED,KAAK,CAAC,aAAa,GAAA;QACjB,IAAI,CAAC;YACH,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,kBAAkB,EAAE,CAAC;YAC/C,OAAO,MAAM,CAAC;QAChB,CAAC,CAAC,OAAO,KAAK,EAAE,CAAC;YACf,0DAA0D;YAC1D,MAAM,YAAY,GAAI,KAAe,CAAC,OAAO,IAAI,EAAE,CAAC;YACpD,MAAM,cAAc,GAClB,YAAY,CAAC,QAAQ,CAAC,SAAS,CAAC,IAChC,YAAY,CAAC,QAAQ,CAAC,OAAO,CAAC,IAC9B,YAAY,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;YAElC,IAAI,cAAc,EAAE,CAAC;gBACnB,OAAO,CAAC,IAAI,CACV,qEAAqE,EACrE,KAAK,CACN,CAAC;YACJ,CAAC,MAAM,CAAC;gBACN,OAAO,CAAC,KAAK,CACX,2DAA2D,EAC3D,KAAK,CACN,CAAC;YACJ,CAAC;YAED,MAAM,IAAI,CAAC,OAAO,CAAC,KAAc,CAAC,CAAC;YACnC,MAAM,KAAK,CAAC;QACd,CAAC;IACH,CAAC;CACF","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 1974, "column": 0}, "map": {"version":3,"file":"AuthenticationRefresherImpl.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/shared/lib/AuthenticationRefresherImpl.ts"],"sourcesContent":["import type { AuthConfig } from \"@/server/config.js\";\nimport {\n  clearTokens,\n  clearUser,\n  getEndpointsWithOverrides,\n  storeTokens,\n  validateOauth2Tokens,\n} from \"@/shared/lib/util.js\";\nimport type { AuthStorage, Endpoints, OIDCTokenResponseBody } from \"@/types.js\";\nimport { OAuth2Client } from \"oslo/oauth2\";\nimport { GenericAuthenticationRefresher } from \"./GenericAuthenticationRefresher.js\";\n\nexport class AuthenticationRefresherImpl extends GenericAuthenticationRefresher {\n  private endpoints: Endpoints | undefined;\n  private oauth2client: OAuth2Client | undefined;\n  constructor(\n    authConfig: AuthConfig,\n    storage: AuthStorage,\n    onError: (error: Error) => Promise<void>,\n    protected endpointOverrides?: Partial<Endpoints>,\n  ) {\n    super(onError);\n    this.authConfig = authConfig;\n    this.storage = storage;\n    this.init();\n  }\n\n  async init(): Promise<this> {\n    if (!this.authConfig) throw new Error(\"No auth config available\");\n    // resolve oauth config\n    this.endpoints = await getEndpointsWithOverrides(\n      this.oauthServer,\n      this.endpointOverrides,\n    );\n    this.oauth2client = new OAuth2Client(\n      this.authConfig.clientId,\n      this.endpoints.auth,\n      this.endpoints.token,\n      {\n        redirectURI: this.authConfig.redirectUrl,\n      },\n    );\n\n    return this;\n  }\n\n  static async build(\n    authConfig: AuthConfig,\n    storage: AuthStorage,\n    onError: (error: Error) => Promise<void>,\n    endpointOverrides?: Partial<Endpoints>,\n  ): Promise<AuthenticationRefresherImpl> {\n    const refresher = new AuthenticationRefresherImpl(\n      authConfig,\n      storage,\n      onError,\n      endpointOverrides,\n    );\n    await refresher.init();\n\n    return refresher;\n  }\n\n  async storeTokens(tokenResponseBody: OIDCTokenResponseBody): Promise<void> {\n    if (!this.storage) throw new Error(\"No storage available\");\n    await storeTokens(this.storage, tokenResponseBody);\n  }\n\n  async refreshAccessToken(): Promise<OIDCTokenResponseBody> {\n    if (!this.storage) throw new Error(\"No storage available\");\n\n    try {\n      const refreshToken = await this.getRefreshToken();\n      if (!this.oauth2client) {\n        await this.init();\n      }\n\n      if (!this.endpoints?.jwks) {\n        throw new Error(\"No jwks endpoint\");\n      }\n      const oauth2Client = this.oauth2client!;\n\n      try {\n        const tokenResponseBody =\n          await oauth2Client.refreshAccessToken<OIDCTokenResponseBody>(\n            refreshToken,\n          );\n        await validateOauth2Tokens(\n          tokenResponseBody,\n          this.endpoints.jwks,\n          oauth2Client,\n          this.oauthServer,\n        );\n\n        await this.storeTokens(tokenResponseBody);\n        return tokenResponseBody;\n      } catch (tokenRequestError) {\n        console.error(\n          \"Error during refresh token network request:\",\n          tokenRequestError,\n        );\n        throw new Error(\n          `Token refresh failed: ${(tokenRequestError as Error).message}`,\n        );\n      }\n    } catch (error) {\n      console.warn(\"refreshAccessToken failed\");\n      await clearTokens(this.storage);\n      await clearUser(this.storage);\n      throw error;\n    }\n  }\n}\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 2046, "column": 0}, "map": {"version":3,"file":"BrowserAuthenticationRefresher.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/shared/lib/BrowserAuthenticationRefresher.ts"],"sourcesContent":["import { AUTOREFRESH_TIMEOUT_NAME, REFRESH_IN_PROGRESS } from \"@/constants.js\";\nimport { retrieveAccessTokenExpiresAt } from \"@/shared/lib/util.js\";\nimport { AuthenticationRefresherImpl } from \"./AuthenticationRefresherImpl.js\";\nimport type { AuthStorage, Endpoints } from \"@/types.js\";\nimport type { AuthConfig } from \"@/server/config.js\";\n\nexport class BrowserAuthenticationRefresher extends AuthenticationRefresherImpl {\n  static override async build(\n    authConfig: AuthConfig,\n    storage: AuthStorage,\n    onError: (error: Error) => Promise<void>,\n    endpointOverrides?: Partial<Endpoints>,\n  ): Promise<BrowserAuthenticationRefresher> {\n    const refresher = new BrowserAuthenticationRefresher(\n      authConfig,\n      storage,\n      onError,\n      endpointOverrides,\n    );\n    await refresher.init();\n\n    return refresher;\n  }\n\n  protected handleError(error: Error) {\n    console.error(\"BrowserAuthenticationRefresher: Error\", error);\n    this.clearAutorefresh();\n    this.onError(error);\n  }\n\n  protected async handleRefresh() {\n    try {\n      // ensure only one refresh is in progress\n      if (localStorage.getItem(REFRESH_IN_PROGRESS) !== \"true\") {\n        localStorage.setItem(REFRESH_IN_PROGRESS, \"true\");\n        await this.refreshTokens();\n        await this.setupAutorefresh(); // Reset the timeout after successful refresh\n      }\n    } catch (error) {\n      console.error(\n        \"BrowserAuthenticationRefresher: Failed to refresh tokens:\",\n        error,\n      );\n      // TODO detect if refresh token has expired and if yes then logout\n      this.handleError(error as Error);\n    }\n  }\n\n  async setupAutorefresh() {\n    // clear any existing state\n    localStorage.removeItem(REFRESH_IN_PROGRESS);\n\n    if (!this.storage) throw new Error(\"No storage available\");\n    // Clear any existing timeout\n    this.clearAutorefresh();\n\n    // get expires_in\n    const now = Math.floor(Date.now() / 1000);\n    const expiresAt =\n      (await retrieveAccessTokenExpiresAt(this.storage)) || now + 60;\n\n    // Calculate time until expiry (subtract 30 seconds as buffer)\n    const bufferTime = 30; // 30 seconds\n    const refreshTime = Math.max(0, expiresAt - bufferTime - now); // handle case were token has expired in the past\n\n    const refreshTimeout = setTimeout(() => {\n      this.handleRefresh();\n    }, 1000 * refreshTime);\n    localStorage.setItem(AUTOREFRESH_TIMEOUT_NAME, refreshTimeout.toString());\n  }\n\n  clearAutorefresh() {\n    // use local storage to store the timeout id so that if multiple instances\n    // of the refresher are created they can all clear the same timeout\n    const existingTimeout = localStorage.getItem(AUTOREFRESH_TIMEOUT_NAME);\n    if (existingTimeout) {\n      clearTimeout(Number(existingTimeout));\n      localStorage.removeItem(AUTOREFRESH_TIMEOUT_NAME);\n    }\n  }\n}\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 2113, "column": 0}, "map": {"version":3,"file":"AuthenticationService.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/services/AuthenticationService.ts"],"sourcesContent":["// Proposals for revised versions of the SessionService AKA AuthSessionService\n\nimport type {\n  DisplayMode,\n  Endpoints,\n  IframeAuthMessage,\n  LoginAppDesignOptions,\n  LoginPostMessage,\n  OIDCTokenResponseBody,\n  SessionData,\n} from \"@/types.js\";\nimport {\n  BrowserPublicClientPKCEProducer,\n  ConfidentialClientPKCEConsumer,\n} from \"@/services/PKCE.js\";\nimport {\n  clearTokens,\n  clearUser,\n  exchangeTokens,\n  generateOauthLoginUrl,\n  generateOauthLogoutUrl,\n  getEndpointsWithOverrides,\n  retrieveTokens,\n  storeTokens,\n  validateOauth2Tokens,\n} from \"@/shared/lib/util.js\";\nimport { displayModeFromState, generateState } from \"@/lib/oauth.js\";\nimport { OAuth2Client } from \"oslo/oauth2\";\nimport { LocalStorageAdapter } from \"@/browser/storage.js\";\nimport type {\n  AuthenticationInitiator,\n  AuthenticationResolver,\n  PKCEConsumer,\n} from \"@/services/types.js\";\nimport { PopupError } from \"@/services/types.js\";\nimport { removeParamsWithoutReload } from \"@/lib/windowUtil.js\";\nimport {\n  DEFAULT_AUTH_SERVER,\n  DEFAULT_OAUTH_GET_PARAMS,\n  LOGOUT_STATE,\n} from \"@/constants.js\";\nimport { validateLoginAppPostMessage } from \"@/lib/postMessage.js\";\nimport { getUser } from \"@/shared/lib/session.js\";\nimport { GenericUserSession } from \"@/shared/lib/UserSession.js\";\nimport { getIframeRef } from \"@/shared/lib/iframeUtils.js\";\nimport { v4 as uuid } from \"uuid\";\nimport { CodeVerifier } from \"@/shared/lib/types.js\";\nimport { BrowserAuthenticationRefresher } from \"@/shared/lib/BrowserAuthenticationRefresher.js\";\n\nexport type GenericAuthenticationInitiatorConfig = {\n  clientId: string;\n  redirectUrl: string;\n  state: string;\n  scopes: string[];\n  oauthServer: string;\n  nonce?: string;\n  // the endpoints to use for the login (if not obtained from the auth server)\n  endpointOverrides?: Partial<Endpoints>;\n  // used to get the PKCE challenge\n  pkceConsumer: PKCEConsumer;\n};\n\nexport type BrowserAuthenticationInitiatorConfig = Omit<\n  GenericAuthenticationInitiatorConfig,\n  \"state\"\n> & {\n  logoutUrl?: string;\n  logoutRedirectUrl: string;\n  // determines whether to trigger the login/logout in an iframe, a new browser window, or redirect the current one.\n  displayMode: DisplayMode;\n  // Optional base path for routing in case app is served from a subdirectory\n  basePath?: string;\n};\n\nconst defaultSetDesignOptions = (value: LoginAppDesignOptions) => {\n  localStorage.setItem(\"loginAppDesign\", JSON.stringify(value));\n};\n/**\n * An authentication initiator that works on a browser. Since this is just triggering\n * login and logout, session data is not stored here.\n * An associated AuthenticationResolver would be needed to get the session data.\n * Storage is needed for the code verifier, this is the domain of the PKCEConsumer\n * The storage used by the PKCEConsumer should be available to the AuthenticationResolver.\n *\n * Example usage:\n *\n * 1) Client-only SPA -eg a react app with no server:\n * new BrowserAuthenticationInitiator({\n *   pkceConsumer: new BrowserPublicClientPKCEProducer(), // generate and retrieve the challenge client-side\n *   ... other config\n * })\n *\n * 2) Client-side of a client/server app - eg a react app with a backend:\n * new BrowserAuthenticationInitiator({\n *  pkceConsumer: new ConfidentialClientPKCEConsumer(\"https://myserver.com/pkce\"), // get the challenge from the server\n *  ... other config\n * })\n */\nexport class BrowserAuthenticationInitiator implements AuthenticationInitiator {\n  private postMessageHandler: null | ((event: MessageEvent) => void) = null;\n\n  protected config: BrowserAuthenticationInitiatorConfig;\n\n  public setDisplayMode(displayMode: DisplayMode) {\n    this.config.displayMode = displayMode;\n  }\n\n  get displayMode() {\n    return this.config.displayMode;\n  }\n\n  get isServerTokenExchange() {\n    return this.config.pkceConsumer instanceof ConfidentialClientPKCEConsumer;\n  }\n  get state() {\n    return generateState(this.config.displayMode, this.isServerTokenExchange);\n  }\n  public instanceId: string;\n  constructor(\n    config: typeof this.config,\n    readonly setDesignOptions = defaultSetDesignOptions,\n  ) {\n    this.instanceId = uuid();\n    this.config = config;\n\n    this.postMessageHandler = (event: MessageEvent) => {\n      const thisURL = new URL(window.location.href);\n      if (\n        event.origin.endsWith(\"civic.com\") ||\n        thisURL.hostname === \"localhost\"\n      ) {\n        if (!validateLoginAppPostMessage(event.data, this.config.clientId)) {\n          return;\n        }\n        const loginMessage = event.data as LoginPostMessage;\n        if (loginMessage.type === \"generatePopupFailed\") {\n          this.handleLoginAppPopupFailed(\n            (loginMessage.data as { url: string }).url,\n          );\n          return;\n        }\n        if (loginMessage.type === \"design\") {\n          // TODO handle the design message\n          this.handleLoginAppDesignUpdate(\n            loginMessage.data as LoginAppDesignOptions,\n          );\n          return;\n        }\n      }\n    };\n\n    window.addEventListener(\"message\", this.postMessageHandler);\n  }\n\n  async handleLoginAppPopupFailed(redirectUrl: string) {\n    console.warn(\n      \"Login app popup failed open a popup, using redirect mode instead...\",\n      redirectUrl,\n    );\n    window.location.href = redirectUrl;\n  }\n\n  async handleLoginAppDesignUpdate(options: LoginAppDesignOptions) {\n    this.setDesignOptions(options);\n  }\n\n  // Use the config (Client ID, scopes OAuth Server, Endpoints, PKCEConsumer) to generate a new login url\n  // and then use the display mode to decide how to send the user there\n  async signIn(iframeRef: HTMLIFrameElement | null): Promise<URL> {\n    const url = await generateOauthLoginUrl({\n      ...this.config,\n      state: this.state,\n    });\n\n    if (this.config.displayMode === \"iframe\") {\n      const ref = getIframeRef(iframeRef);\n      ref.setAttribute(\"src\", url.toString());\n    }\n\n    if (this.config.displayMode === \"redirect\") {\n      window.location.href = url.toString();\n    }\n\n    if (this.config.displayMode === \"new_tab\") {\n      try {\n        const popupWindow = window.open(url.toString(), \"_blank\");\n        if (!popupWindow) {\n          throw new PopupError(\"Failed to open popup window\");\n        }\n        // TODO handle the 'onclose' event to clean up and reset the authStatus\n      } catch (error) {\n        console.error(\"popupWindow\", error);\n        throw new PopupError(\n          \"window.open has thrown: Failed to open popup window\",\n        );\n      }\n    }\n\n    return url;\n  }\n\n  protected handleIframeUrlChange(\n    iframe: HTMLIFrameElement,\n    expectedUrl: string,\n  ): Promise<void> {\n    return new Promise((resolve, reject) => {\n      let interval: NodeJS.Timeout | undefined = undefined;\n      let timeout: NodeJS.Timeout | undefined = undefined;\n\n      const messageHandler = (event: MessageEvent) => {\n        if (event.source !== iframe.contentWindow) {\n          // This message did not originate from the iframe. Ignore it.\n          return;\n        }\n\n        const message = event.data as IframeAuthMessage;\n\n        if (\n          message.source === \"civicloginApp\" &&\n          (message.type === \"auth_error\" ||\n            message.type === \"auth_error_try_again\")\n        ) {\n          clearInterval(interval);\n          clearTimeout(timeout);\n          window.removeEventListener(\"message\", messageHandler);\n          reject(new Error(message.data.error || \"Authentication failed\"));\n          return;\n        }\n      };\n\n      window.addEventListener(\"message\", messageHandler);\n\n      // Keep the existing URL check logic for success case\n      const checkIframe = () => {\n        try {\n          const currentUrl = iframe.contentWindow?.location.href;\n          if (currentUrl?.includes(expectedUrl)) {\n            clearInterval(interval);\n            window.removeEventListener(\"message\", messageHandler);\n            resolve();\n          }\n        } catch {\n          // Ignore cross-origin errors\n        }\n      };\n\n      interval = setInterval(checkIframe, 100);\n\n      // Timeout after 10 seconds\n      timeout = setTimeout(() => {\n        clearInterval(interval);\n        window.removeEventListener(\"message\", messageHandler);\n        reject(new Error(\"Timeout waiting for iframe URL change\"));\n      }, 10000);\n    });\n  }\n\n  async signOut(\n    idToken: string | undefined,\n    iframeRef: HTMLIFrameElement | null,\n  ): Promise<URL> {\n    let url;\n    const localStorage = new LocalStorageAdapter();\n    const state = this.state;\n    if (this.isServerTokenExchange) {\n      if (!this.config.logoutUrl) {\n        throw new Error(\"logoutUrl is required for server token exchange\");\n      }\n      url = new URL(this.config.logoutUrl, window.location.origin);\n      url.searchParams.append(\"state\", state);\n    } else {\n      if (!idToken) {\n        throw new Error(\"idToken is required for non-server token exchange\");\n      }\n      url = await generateOauthLogoutUrl({\n        ...this.config,\n        idToken,\n        state,\n        redirectUrl: this.config.logoutRedirectUrl,\n      });\n    }\n\n    if (this.config.displayMode === \"iframe\") {\n      localStorage.delete(LOGOUT_STATE);\n      const ref = getIframeRef(iframeRef);\n      ref.setAttribute(\"src\", url.toString());\n\n      try {\n        await this.handleIframeUrlChange(ref, this.config.logoutRedirectUrl);\n\n        // Clear storage before calling auth server\n        await clearTokens(localStorage);\n        await clearUser(localStorage);\n        LocalStorageAdapter.emitter.emit(\"signOut\");\n      } catch (error) {\n        console.log(\"Failed to sign out\", error);\n        // on logout error, trigger the logout-callback directly,\n        // if it is a logout from the server, so the the session is cleared\n        // and user can still sign out.\n        if (this.isServerTokenExchange) {\n          url = new URL(this.config.logoutRedirectUrl, window.location.origin);\n          url.searchParams.append(\"state\", state);\n          // Use the configured basePath if present\n          const appUrl = this.config.basePath\n            ? `${window.location.origin}${this.config.basePath}`\n            : window.location.origin;\n          url.searchParams.append(\"appUrl\", encodeURIComponent(appUrl));\n          ref.setAttribute(\"src\", url.toString());\n        }\n      }\n    }\n\n    if (this.config.displayMode === \"redirect\") {\n      localStorage.set(LOGOUT_STATE, state);\n      window.location.href = url.toString();\n    }\n\n    if (this.config.displayMode === \"new_tab\") {\n      try {\n        const popupWindow = window.open(url.toString(), \"_blank\");\n        if (!popupWindow) {\n          throw new PopupError(\"Failed to open popup window\");\n        }\n      } catch (error) {\n        console.error(\"popupWindow\", error);\n        throw new PopupError(\n          \"window.open has thrown: Failed to open popup window\",\n        );\n      }\n    }\n\n    return url;\n  }\n\n  cleanup() {\n    if (this.postMessageHandler) {\n      window.removeEventListener(\"message\", this.postMessageHandler);\n    }\n  }\n}\n\n/** A general-purpose authentication initiator, that just generates urls, but lets\n * the caller decide how to use them. This is useful for server-side applications\n * that may serve this URL to their front-ends or just call them directly\n */\nexport class GenericAuthenticationInitiator implements AuthenticationInitiator {\n  protected config: GenericAuthenticationInitiatorConfig;\n\n  constructor(config: typeof this.config) {\n    this.config = config;\n  }\n\n  // Use the config (Client ID, scopes OAuth Server, Endpoints, PKCEConsumer) to generate a new login url\n  // and simply return the url\n  async signIn(): Promise<URL> {\n    return generateOauthLoginUrl(this.config);\n  }\n\n  async signOut(idToken: string): Promise<URL> {\n    return generateOauthLogoutUrl({\n      ...this.config,\n      idToken,\n    });\n  }\n}\n\ntype BrowserAuthenticationConfig = {\n  clientId: string;\n  redirectUrl: string;\n  logoutUrl?: string;\n  logoutRedirectUrl: string;\n  scopes: string[];\n  oauthServer: string;\n  endpointOverrides?: Partial<Endpoints>;\n  displayMode: DisplayMode;\n};\n\n/**\n * An authentication resolver that can run on the browser (i.e. a public client)\n * It uses PKCE for security. PKCE and Session data are stored in local storage\n */\nexport class BrowserAuthenticationService extends BrowserAuthenticationInitiator {\n  private oauth2client: OAuth2Client | undefined;\n  private endpoints: Endpoints | undefined;\n\n  // TODO WIP - perhaps we want to keep resolver and initiator separate here\n  constructor(\n    config: BrowserAuthenticationConfig,\n    // Since we are running fully on the client, we produce as well as consume the PKCE challenge\n    protected pkceProducer = new BrowserPublicClientPKCEProducer(),\n  ) {\n    super({\n      ...config,\n      // Store and retrieve the PKCE challenge in local storage\n      pkceConsumer: pkceProducer,\n    });\n  }\n\n  // TODO too much code duplication here between the browser and the server variant.\n  // Suggestion for refactor: Standardise the config for AuthenticationResolvers and create a one-shot\n  // function for generating an oauth2client from it\n  async init(): Promise<this> {\n    // resolve oauth config\n    this.endpoints = await getEndpointsWithOverrides(\n      this.oauthServer,\n      this.config.endpointOverrides,\n    );\n    this.oauth2client = new OAuth2Client(\n      this.config.clientId,\n      this.endpoints.auth,\n      this.endpoints.token,\n      {\n        redirectURI: this.config.redirectUrl,\n      },\n    );\n\n    return this;\n  }\n\n  async storeTokensOnLogin(tokens: OIDCTokenResponseBody) {\n    const clientStorage = new LocalStorageAdapter();\n    await storeTokens(clientStorage, tokens);\n    // delete code verifier as it should be single-use\n    await clientStorage.delete(CodeVerifier.COOKIE_NAME);\n    const user = await getUser(clientStorage);\n    if (!user) {\n      throw new Error(\"Failed to get user info\");\n    }\n    const userSession = new GenericUserSession(clientStorage);\n    await userSession.set(user);\n    LocalStorageAdapter.emitter.emit(\"signIn\");\n  }\n\n  // Two responsibilities:\n  // 1. resolve the auth code to get the tokens (should use library code)\n  // 2. store the tokens in local storage\n  async tokenExchange(\n    code: string,\n    state: string,\n  ): Promise<OIDCTokenResponseBody> {\n    if (!this.oauth2client) await this.init();\n    const codeVerifier = await this.pkceProducer.getCodeVerifier();\n    if (!codeVerifier) throw new Error(\"Code verifier not found in storage\");\n\n    // exchange auth code for tokens\n    const tokens = await exchangeTokens(\n      code,\n      state,\n      this.pkceProducer,\n      this.oauth2client!, // clean up types here to avoid the ! operator\n      this.oauthServer,\n      this.endpoints!, // clean up types here to avoid the ! operator\n    );\n    await this.storeTokensOnLogin(tokens);\n    // cleanup the browser window if needed\n    const parsedDisplayMode = displayModeFromState(\n      state,\n      this.config.displayMode,\n    );\n\n    if (parsedDisplayMode === \"new_tab\") {\n      // Close the popup window\n      window.addEventListener(\"beforeunload\", () => {\n        window?.opener?.focus();\n      });\n      window.close();\n    }\n    // these are the default oAuth params that get added to the URL in redirect which we want to remove if present\n    removeParamsWithoutReload(DEFAULT_OAUTH_GET_PARAMS);\n    return tokens;\n  }\n\n  // Get the session data from local storage\n  async getSessionData(): Promise<SessionData | null> {\n    const storageData = await retrieveTokens(new LocalStorageAdapter());\n    if (!storageData) return null;\n\n    return {\n      authenticated: !!storageData.id_token,\n      idToken: storageData.id_token,\n      accessToken: storageData.access_token,\n      refreshToken: storageData.refresh_token,\n      accessTokenExpiresAt: storageData.access_token_expires_at,\n    };\n  }\n\n  async tryRefreshTokens(\n    sessionData: SessionData | null,\n  ): Promise<SessionData> {\n    // If token validation fails but we have a refresh token, attempt to refresh\n    if (sessionData?.refreshToken) {\n      try {\n        const clientStorage = new LocalStorageAdapter();\n\n        // Create a BrowserAuthenticationRefresher to handle token refresh using the build method\n        const authConfig = {\n          clientId: this.config.clientId,\n          oauthServer: this.oauthServer,\n          redirectUrl: this.config.redirectUrl,\n        };\n\n        // Use build method which handles initialization\n        const refresher = await BrowserAuthenticationRefresher.build(\n          authConfig,\n          clientStorage,\n          async (error: Error) => {\n            console.warn(\"Failed to refresh tokens during validation\", error);\n          },\n          this.config.endpointOverrides,\n        );\n\n        try {\n          // Perform token refresh (no need to call init explicitly)\n          const tokenResponse = await refresher.refreshAccessToken();\n          // Return a new session with the refreshed tokens\n          const refreshedSession = await this.getSessionData();\n          if (refreshedSession && refreshedSession.authenticated) {\n            await this.storeTokensOnLogin(tokenResponse);\n            return {\n              ...refreshedSession,\n              authenticated: true,\n            };\n          } else {\n            throw new Error(\"Failed to get refreshed session data\");\n          }\n        } catch (refreshApiError) {\n          console.error(\n            \"Error during token refresh API call:\",\n            refreshApiError,\n          );\n          throw refreshApiError; // Re-throw to be caught by outer catch block\n        }\n      } catch (error) {\n        const refreshError = error as Error;\n        console.error(\"Token refresh failed with error:\", refreshError);\n        // Only delete refresh token if it's invalid, not for network errors\n        // which might be temporary\n        if (\n          refreshError.message.includes(\"invalid\") ||\n          refreshError.message.includes(\"expired\")\n        ) {\n          const clientStorage = new LocalStorageAdapter();\n          console.log(\"Deleting invalid refresh token\");\n          await clearTokens(clientStorage);\n          await clearUser(clientStorage);\n        }\n        console.warn(\"Failed to refresh tokens\", refreshError);\n      }\n    }\n\n    return {\n      ...sessionData,\n      authenticated: false,\n    };\n  }\n\n  async validateExistingSession(): Promise<SessionData> {\n    try {\n      const sessionData = await this.getSessionData();\n      if (!sessionData?.idToken || !sessionData.accessToken) {\n        const refreshedSessionData = await this.tryRefreshTokens(sessionData);\n        if (refreshedSessionData.authenticated) {\n          return refreshedSessionData;\n        }\n        const unAuthenticatedSession = { ...sessionData, authenticated: false };\n        return unAuthenticatedSession;\n      }\n      if (!this.endpoints?.jwks || !this.oauth2client) await this.init();\n\n      if (!this.endpoints?.jwks) {\n        throw new Error(\"No jwks endpoint\");\n      }\n\n      // this function will throw if any of the tokens are invalid\n      await validateOauth2Tokens(\n        {\n          access_token: sessionData.accessToken,\n          id_token: sessionData.idToken,\n          refresh_token: sessionData.refreshToken,\n          access_token_expires_at: sessionData.accessTokenExpiresAt,\n        },\n        this.endpoints.jwks,\n        this.oauth2client!,\n        this.oauthServer,\n      );\n      return sessionData;\n    } catch (error) {\n      console.warn(\"Failed to validate existing tokens\", error);\n      const unAuthenticatedSession = {\n        authenticated: false,\n      };\n      const storage = new LocalStorageAdapter();\n      await clearTokens(storage);\n      await clearUser(storage);\n      return unAuthenticatedSession;\n    }\n  }\n\n  get oauthServer(): string {\n    return this.config.oauthServer || DEFAULT_AUTH_SERVER;\n  }\n\n  async getEndSessionEndpoint(): Promise<string | null> {\n    if (!this.endpoints) {\n      return null;\n    }\n    return this.endpoints?.endsession;\n  }\n\n  static async build(\n    config: BrowserAuthenticationConfig,\n  ): Promise<AuthenticationResolver> {\n    const resolver = new BrowserAuthenticationService(config);\n    await resolver.init();\n\n    return resolver;\n  }\n}\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 2538, "column": 0}, "map": {"version":3,"file":"useCivicAuthConfig.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/shared/hooks/useCivicAuthConfig.ts"],"sourcesContent":["\"use client\";\nimport { useContext } from \"react\";\nimport { CivicAuthConfigContext } from \"@/shared/providers/CivicAuthConfigContext.js\";\n\n// TokenProvider will use this internal context to access Config\nconst useCivicAuthConfig = () => {\n  const context = useContext(CivicAuthConfigContext);\n  return context;\n};\n\nexport { useCivicAuthConfig };\n"],"names":[],"mappings":";;;AACA,OAAO,EAAE,UAAU,EAAE,MAAM,OAAO,CAAC;AACnC,OAAO,EAAE,sBAAsB,EAAE,MAAM,8CAA8C,CAAC;AAFtF,YAAY,CAAC;;;AAIb,gEAAgE;AAChE,MAAM,kBAAkB,GAAG,GAAG,EAAE;IAC9B,MAAM,OAAO,qKAAG,aAAA,AAAU,yOAAC,yBAAsB,CAAC,CAAC;IACnD,OAAO,OAAO,CAAC;AACjB,CAAC,CAAC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 2559, "column": 0}, "map": {"version":3,"file":"useIframe.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/shared/hooks/useIframe.ts"],"sourcesContent":["\"use client\";\nimport { useContext } from \"react\";\nimport { IframeContext } from \"@/shared/providers/IframeProvider.js\";\n\n// TokenProvider will use this internal context to access Iframe\nconst useIframe = () => {\n  const context = useContext(IframeContext);\n  if (!context) {\n    throw new Error(\"useIframe must be used within an IframeProvider\");\n  }\n  return context;\n};\n\nexport { useIframe };\n"],"names":[],"mappings":";;;AACA,OAAO,EAAE,UAAU,EAAE,MAAM,OAAO,CAAC;AACnC,OAAO,EAAE,aAAa,EAAE,MAAM,sCAAsC,CAAC;AAFrE,YAAY,CAAC;;;AAIb,gEAAgE;AAChE,MAAM,SAAS,GAAG,GAAG,EAAE;IACrB,MAAM,OAAO,qKAAG,aAAA,AAAU,iOAAC,gBAAa,CAAC,CAAC;IAC1C,IAAI,CAAC,OAAO,EAAE,CAAC;QACb,MAAM,IAAI,KAAK,CAAC,iDAAiD,CAAC,CAAC;IACrE,CAAC;IACD,OAAO,OAAO,CAAC;AACjB,CAAC,CAAC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 2583, "column": 0}, "map": {"version":3,"file":"AuthStatusContext.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/shared/providers/AuthStatusContext.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { createContext, useContext, useState } from \"react\";\nimport { AuthStatus } from \"@/types.js\";\n\ninterface AuthStatusContextType {\n  authStatus: AuthStatus;\n  setAuthStatus: React.Dispatch<React.SetStateAction<AuthStatus>>;\n}\n\nconst AuthStatusContext = createContext<AuthStatusContextType | undefined>(\n  undefined,\n);\n\nexport const AuthStatusProvider: React.FC<{ children: React.ReactNode }> = ({\n  children,\n}) => {\n  const [authStatus, setAuthStatus] = useState<AuthStatus>(\n    AuthStatus.UNAUTHENTICATED,\n  );\n\n  return (\n    <AuthStatusContext.Provider value={{ authStatus, setAuthStatus }}>\n      {children}\n    </AuthStatusContext.Provider>\n  );\n};\n\nexport const useAuthStatus = (): AuthStatusContextType => {\n  const context = useContext(AuthStatusContext);\n  if (context === undefined) {\n    throw new Error(\"useAuthStatus must be used within an AuthStatusProvider\");\n  }\n  return context;\n};\n"],"names":[],"mappings":";;;;;AAEA,OAAO,KAAK,EAAE,EAAE,aAAa,EAAE,UAAU,EAAE,QAAQ,EAAE,MAAM,OAAO,CAAC;AACnE,OAAO,EAAE,UAAU,EAAE,MAAM,YAAY,CAAC;AAHxC,YAAY,CAAC;;;;AAUb,MAAM,iBAAiB,qKAAG,gBAAA,AAAa,EACrC,SAAS,CACV,CAAC;AAEK,MAAM,kBAAkB,GAA4C,CAAC,EAC1E,QAAQ,EACT,EAAE,EAAE;IACH,MAAM,CAAC,UAAU,EAAE,aAAa,CAAC,qKAAG,WAAA,AAAQ,iMAC1C,aAAU,CAAC,eAAe,CAC3B,CAAC;IAEF,OAAO,CACL,gPAAA,EAAC,iBAAiB,CAAC,QAAQ,EAAA;QAAC,KAAK,EAAE;YAAE,UAAU;YAAE,aAAa;QAAA,CAAE;QAAA,UAC7D,QAAQ;IAAA,EACkB,CAC9B,CAAC;AACJ,CAAC,CAAC;AAEK,MAAM,aAAa,GAAG,GAA0B,EAAE;IACvD,MAAM,OAAO,qKAAG,aAAU,AAAV,EAAW,iBAAiB,CAAC,CAAC;IAC9C,IAAI,OAAO,KAAK,SAAS,EAAE,CAAC;QAC1B,MAAM,IAAI,KAAK,CAAC,yDAAyD,CAAC,CAAC;IAC7E,CAAC;IACD,OAAO,OAAO,CAAC;AACjB,CAAC,CAAC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 2618, "column": 0}, "map": {"version":3,"file":"useSignIn.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/shared/hooks/useSignIn.ts"],"sourcesContent":["import { BrowserAuthenticationInitiator } from \"@/services/AuthenticationService.js\";\nimport { BrowserPublicClientPKCEProducer } from \"@/services/PKCE.js\";\nimport { useCivicAuthConfig } from \"@/shared/hooks/useCivicAuthConfig.js\";\nimport {\n  AuthStatus,\n  type DisplayMode,\n  type LoginAppDesignOptions,\n} from \"@/types.js\";\nimport { useIframe } from \"@/shared/hooks/useIframe.js\";\nimport { useCallback, useEffect, useMemo, useRef } from \"react\";\nimport { PopupError, type PKCEConsumer } from \"@/services/types.js\";\nimport { useSession } from \"./useSession.js\";\nimport { LocalStorageAdapter } from \"@/browser/storage.js\";\nimport { clearTokens, clearUser } from \"../lib/util.js\";\nimport { useLocalStorage } from \"usehooks-ts\";\nimport { LOGOUT_STATE } from \"@/constants.js\";\nimport { useAuthStatus } from \"@/shared/providers/AuthStatusContext.js\";\n\ntype SignInProps = {\n  pkceConsumer?: PKCEConsumer;\n  preSignOut?: () => Promise<void>;\n  postSignOut?: () => Promise<void>;\n  displayMode: DisplayMode;\n};\nconst SIGN_IN_TIMEOUT_MS = 9 * 60 * 1000; // 9 minutes in milliseconds\n\nconst useSignIn = (\n  { pkceConsumer, preSignOut, postSignOut, displayMode }: SignInProps = {\n    displayMode: \"iframe\",\n  },\n) => {\n  const civicAuthConfig = useCivicAuthConfig();\n  const {\n    iframeRef,\n    logoutIframeRef,\n    setIframeIsVisible,\n    iframeIsVisible,\n    setLogoutIframeIsVisible,\n    iframeAborted,\n    setIframeAborted,\n  } = useIframe();\n  const { data: session } = useSession();\n  // Use the shared auth status from context instead of local state\n  const { authStatus, setAuthStatus } = useAuthStatus();\n  const [, setDesignOption] = useLocalStorage<LoginAppDesignOptions>(\n    `loginAppDesign`,\n    { colorMode: \"auto\" },\n  );\n  const timeoutRef = useRef<number | null>(null);\n  const authStatusRef = useRef<AuthStatus>(AuthStatus.UNAUTHENTICATED);\n\n  const authInitiator = useMemo(() => {\n    if (!civicAuthConfig) {\n      return null;\n    }\n    const {\n      clientId,\n      redirectUrl,\n      logoutUrl,\n      logoutRedirectUrl,\n      nonce,\n      oauthServer,\n      endpoints,\n      scopes,\n    } = civicAuthConfig;\n    return new BrowserAuthenticationInitiator(\n      {\n        pkceConsumer: pkceConsumer || new BrowserPublicClientPKCEProducer(), // generate and retrieve the challenge client-side\n        clientId,\n        redirectUrl,\n        logoutUrl,\n        logoutRedirectUrl,\n        scopes,\n        displayMode,\n        oauthServer,\n        endpointOverrides: endpoints,\n        nonce,\n      },\n      setDesignOption,\n    );\n  }, [civicAuthConfig, displayMode, pkceConsumer, setDesignOption]);\n\n  useEffect(() => {\n    return () => {\n      // Clean up on unmount\n      if (authInitiator) {\n        authInitiator.cleanup();\n      }\n\n      // Clear any existing timeout\n      if (timeoutRef.current !== null) {\n        window.clearTimeout(timeoutRef.current);\n        timeoutRef.current = null;\n      }\n    };\n  }, [authInitiator]);\n\n  // This effect is used to clear the tokens and user when the user signs out after a redirect\n  useEffect(() => {\n    const params = new URLSearchParams(window.location.search);\n    const state = params.get(\"state\");\n    const localStorage = new LocalStorageAdapter();\n    localStorage.get(LOGOUT_STATE).then((storedLogoutState) => {\n      if (state && state === storedLogoutState) {\n        // Clear storage\n        clearTokens(localStorage);\n        clearUser(localStorage);\n        LocalStorageAdapter.emitter.emit(\"signOut\");\n\n        // Clean up storage and URL\n        sessionStorage.removeItem(LOGOUT_STATE);\n        const cleanUrl = window.location.href.split(\"?\")[0];\n        window.history.replaceState({}, document.title, cleanUrl);\n      }\n    });\n  }, []);\n\n  const startSignIn = useCallback(async () => {\n    if (!authInitiator) return;\n\n    if (![AuthStatus.UNAUTHENTICATED, AuthStatus.ERROR].includes(authStatus)) {\n      return;\n    }\n\n    // Clear any existing timeout\n    if (timeoutRef.current !== null) {\n      window.clearTimeout(timeoutRef.current);\n      timeoutRef.current = null;\n    }\n\n    setAuthStatus(AuthStatus.AUTHENTICATING);\n    authInitiator.setDisplayMode(displayMode);\n\n    // Set a timeout to reset authentication state and retry if still authenticating\n    timeoutRef.current = window.setTimeout(() => {\n      // Check the current auth status via ref when the timeout fires\n      if (authStatusRef.current === AuthStatus.AUTHENTICATING) {\n        console.log(\"Sign-in timeout reached. Resetting authentication state.\");\n        setAuthStatus(AuthStatus.UNAUTHENTICATED);\n        // Call startSignIn again to restart with fresh state\n        startSignIn();\n      }\n    }, SIGN_IN_TIMEOUT_MS);\n\n    const useIframeRef = iframeRef?.current || null;\n    await authInitiator.signIn(useIframeRef).catch((error) => {\n      setAuthStatus(AuthStatus.ERROR);\n      console.error(\"signIn error\", {\n        error,\n        isPopupError: error instanceof PopupError,\n      });\n      // if we've tried to open a popup and it has failed, then fallback to redirect mode\n      if (error instanceof PopupError) {\n        setIframeIsVisible(false); // hide the iframe\n        authInitiator.cleanup(); // clear any event listeners from before\n        authInitiator.setDisplayMode(\"redirect\"); // switch to redirect mode\n        authInitiator.signIn(useIframeRef); // retry the sign in\n      }\n    });\n  }, [\n    authInitiator,\n    displayMode,\n    iframeRef,\n    setIframeIsVisible,\n    authStatus,\n    setAuthStatus,\n  ]);\n\n  const signIn = useCallback(async (): Promise<void> => {\n    if (displayMode === \"iframe\") {\n      setIframeIsVisible(true);\n    }\n    return startSignIn();\n  }, [startSignIn, displayMode, setIframeIsVisible]);\n\n  const signOut = useCallback(async () => {\n    const idToken = session?.idToken;\n    if (!authInitiator) return;\n\n    setAuthStatus(AuthStatus.SIGNING_OUT);\n    if (displayMode === \"iframe\") {\n      setIframeIsVisible(false);\n      setLogoutIframeIsVisible(true);\n    }\n\n    try {\n      await preSignOut?.();\n\n      const useIframeRef = logoutIframeRef?.current || null;\n      await authInitiator.signOut(idToken, useIframeRef).catch((error) => {\n        setAuthStatus(AuthStatus.ERROR);\n        console.error(\"signOut error\", {\n          error,\n          isPopupError: error instanceof PopupError,\n        });\n\n        // Same popup fallback as signIn\n        if (error instanceof PopupError) {\n          setLogoutIframeIsVisible(false);\n          authInitiator.cleanup();\n          authInitiator.setDisplayMode(\"redirect\");\n          authInitiator.signOut(idToken, useIframeRef);\n        }\n      });\n    } catch (error) {\n      console.error(\"Signout error:\", error);\n    }\n  }, [\n    session?.idToken,\n    authInitiator,\n    displayMode,\n    setLogoutIframeIsVisible,\n    setIframeIsVisible,\n    preSignOut,\n    logoutIframeRef,\n    setAuthStatus,\n  ]);\n\n  // Keep the authStatusRef in sync with authStatus\n  useEffect(() => {\n    authStatusRef.current = authStatus;\n    if (\n      authStatus !== AuthStatus.AUTHENTICATING &&\n      timeoutRef.current !== null\n    ) {\n      window.clearTimeout(timeoutRef.current);\n      timeoutRef.current = null;\n    }\n  }, [authStatus]);\n\n  useEffect(() => {\n    if (session?.authenticated) {\n      setAuthStatus(AuthStatus.AUTHENTICATED);\n\n      // Clear timeout when authentication is successful\n      if (timeoutRef.current !== null) {\n        window.clearTimeout(timeoutRef.current);\n        timeoutRef.current = null;\n      }\n    }\n    if (displayMode === \"iframe\" && iframeAborted) {\n      setIframeAborted(false);\n\n      // Clear timeout when iframe is aborted\n      if (timeoutRef.current !== null) {\n        window.clearTimeout(timeoutRef.current);\n        timeoutRef.current = null;\n      }\n    }\n    if (!session?.authenticated) {\n      setAuthStatus(AuthStatus.UNAUTHENTICATED);\n    }\n  }, [\n    displayMode,\n    iframeAborted,\n    session?.authenticated,\n    setIframeAborted,\n    setAuthStatus,\n  ]);\n\n  // handle logout finished\n  useEffect(() => {\n    if (authStatus === AuthStatus.SIGNING_OUT && !session?.authenticated) {\n      setAuthStatus(AuthStatus.UNAUTHENTICATED);\n      postSignOut?.().then(() => {\n        setLogoutIframeIsVisible(false);\n      });\n      return;\n    }\n  }, [\n    session,\n    postSignOut,\n    setLogoutIframeIsVisible,\n    displayMode,\n    iframeIsVisible,\n    authStatus,\n    setAuthStatus,\n  ]);\n\n  return {\n    signIn,\n    signOut,\n    startSignIn,\n    authStatus,\n    displayMode,\n  };\n};\nexport { useSignIn };\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 2914, "column": 0}, "map": {"version":3,"file":"LoadingIcon.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/shared/components/LoadingIcon.tsx"],"sourcesContent":["import React from \"react\";\n\ntype LoadingIconProps = {\n  width?: string;\n  height?: string;\n  style?: React.CSSProperties;\n};\n\nconst LoadingIcon = ({\n  width = \"2em\",\n  height = \"2em\",\n  style = {},\n}: LoadingIconProps) => (\n  <div id=\"civic-auth-loading-icon\" role=\"status\">\n    <style>\n      {`\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n      `}\n    </style>\n    <svg\n      aria-hidden=\"true\"\n      style={{\n        display: \"inline\",\n        width,\n        height,\n        animation: \"spin 1s linear infinite\",\n        fill: \"#4b5563\",\n        color: \"#e5e7eb\",\n        ...style,\n      }}\n      viewBox=\"0 0 100 101\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <path\n        d=\"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z\"\n        fill=\"currentColor\"\n      />\n      <path\n        d=\"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z\"\n        fill=\"currentFill\"\n        opacity=\"0.7\"\n      />\n    </svg>\n    <span\n      style={{\n        position: \"absolute\",\n        width: \"1px\",\n        height: \"1px\",\n        padding: 0,\n        margin: \"-1px\",\n        overflow: \"hidden\",\n        clip: \"rect(0, 0, 0, 0)\",\n        border: 0,\n      }}\n    >\n      Loading...\n    </span>\n  </div>\n);\n\nexport { LoadingIcon };\n"],"names":[],"mappings":";;;;AAAA,OAAO,KAAK,MAAM,OAAO,CAAC;;;AAQ1B,MAAM,WAAW,GAAG,CAAC,EACnB,KAAK,GAAG,KAAK,EACb,MAAM,GAAG,KAAK,EACd,KAAK,GAAG,CAAA,CAAE,EACO,EAAE,EAAE,CAAC,yOACtB,OAAA,EAAA,OAAA;QAAK,EAAE,EAAC,yBAAyB;QAAC,IAAI,EAAC,QAAQ;QAAA,UAAA;uPAC7C,MAAA,EAAA,SAAA;gBAAA,UACG,CAAA;;;;;OAKA;YAAA,EACK;YACR,kPAAA,EAAA,OAAA;gBAAA,eACc,MAAM;gBAClB,KAAK,EAAE;oBACL,OAAO,EAAE,QAAQ;oBACjB,KAAK;oBACL,MAAM;oBACN,SAAS,EAAE,yBAAyB;oBACpC,IAAI,EAAE,SAAS;oBACf,KAAK,EAAE,SAAS;oBAChB,GAAG,KAAK;iBACT;gBACD,OAAO,EAAC,aAAa;gBACrB,IAAI,EAAC,MAAM;gBACX,KAAK,EAAC,4BAA4B;gBAAA,UAAA;oBAElC,iPAAA,EAAA,QAAA;wBACE,CAAC,EAAC,8WAA8W;wBAChX,IAAI,EAAC,cAAc;oBAAA,EACnB;qBACF,gPAAA,EAAA,QAAA;wBACE,CAAC,EAAC,+kBAA+kB;wBACjlB,IAAI,EAAC,aAAa;wBAClB,OAAO,EAAC,KAAK;oBAAA,EACb;iBAAA;YAAA,EACE;aACN,gPAAA,EAAA,QAAA;gBACE,KAAK,EAAE;oBACL,QAAQ,EAAE,UAAU;oBACpB,KAAK,EAAE,KAAK;oBACZ,MAAM,EAAE,KAAK;oBACb,OAAO,EAAE,CAAC;oBACV,MAAM,EAAE,MAAM;oBACd,QAAQ,EAAE,QAAQ;oBAClB,IAAI,EAAE,kBAAkB;oBACxB,MAAM,EAAE,CAAC;iBACV;gBAAA,UAAA;YAAA,EAGI;SAAA;IAAA,EACH,CACP,CAAC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 2982, "column": 0}, "map": {"version":3,"file":"CloseIcon.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/shared/components/CloseIcon.tsx"],"sourcesContent":["import React from \"react\";\n\nconst CloseIcon = () => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"24\"\n    height=\"24\"\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth=\"2\"\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"lucide lucide-x\"\n  >\n    <path d=\"M18 6 6 18\" />\n    <path d=\"m6 6 12 12\" />\n  </svg>\n);\n\nexport { CloseIcon };\n"],"names":[],"mappings":";;;;AAAA,OAAO,KAAK,MAAM,OAAO,CAAC;;;AAE1B,MAAM,SAAS,GAAG,GAAG,EAAE,CAAC,yOACtB,OAAA,EAAA,OAAA;QACE,KAAK,EAAC,4BAA4B;QAClC,KAAK,EAAC,IAAI;QACV,MAAM,EAAC,IAAI;QACX,OAAO,EAAC,WAAW;QACnB,IAAI,EAAC,MAAM;QACX,MAAM,EAAC,cAAc;QACrB,WAAW,EAAC,GAAG;QACf,aAAa,EAAC,OAAO;QACrB,cAAc,EAAC,OAAO;QACtB,SAAS,EAAC,iBAAiB;QAAA,UAAA;uPAE3B,MAAA,EAAA,QAAA;gBAAM,CAAC,EAAC,YAAY;YAAA,EAAG;uPACvB,MAAA,EAAA,QAAA;gBAAM,CAAC,EAAC,YAAY;YAAA,EAAG;SAAA;IAAA,EACnB,CACP,CAAC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 3017, "column": 0}, "map": {"version":3,"file":"SVGLoading.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/shared/components/SVGLoading.tsx"],"sourcesContent":["import React from \"react\";\n\nconst shimmerKeyframes = `\n  @keyframes shimmer {\n    0% {\n      transform: translate(-328px, 0);\n    }\n    to {\n      transform: translate(328px, 0);\n    }\n  }\n`;\n\nconst shimmerStyle = {\n  animation: \"1s linear infinite both shimmer\",\n};\n\nexport default function SVGLoading(\n  { backgroundColor = \"#ffffff\" } = { backgroundColor: \"#ffffff\" },\n): JSX.Element {\n  return (\n    <>\n      <style>{shimmerKeyframes}</style>\n      <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        shapeRendering=\"geometricPrecision\"\n        textRendering=\"geometricPrecision\"\n        viewBox=\"0 0 324 28\" // Adjusted viewBox height\n        height=\"40\" // Adjusted height\n        width=\"100%\"\n        style={{\n          position: \"absolute\",\n          top: -6,\n          left: 0,\n          borderRadius: \"0.5rem\", // Added borderRadius\n          backgroundColor,\n        }}\n        className=\"svg-loading\"\n      >\n        <defs>\n          <linearGradient\n            id=\"Gradient-0\"\n            x2=\"320\"\n            y1=\"15\"\n            y2=\"15\"\n            gradientUnits=\"userSpaceOnUse\"\n          >\n            <stop offset=\"0\" stopColor={backgroundColor} />\n            <stop offset=\".511\" stopColor=\"#9A9DA6\" />\n            <stop offset=\"1\" stopColor={backgroundColor} />\n          </linearGradient>\n        </defs>\n        <path id=\"rect\" fill={backgroundColor} d=\"M0 0h328v28H0z\" />{\" \"}\n        {/* Adjusted height */}\n        <path\n          id=\"shimmer\"\n          fill=\"url(#Gradient-0)\"\n          d=\"M0 -2h328v34H0z\"\n          transform=\"translate(-328)\"\n          style={shimmerStyle}\n        />\n      </svg>\n    </>\n  );\n}\n"],"names":[],"mappings":";;;;AAAA,OAAO,KAAK,MAAM,OAAO,CAAC;;;AAE1B,MAAM,gBAAgB,GAAG,CAAA;;;;;;;;;CASxB,CAAC;AAEF,MAAM,YAAY,GAAG;IACnB,SAAS,EAAE,iCAAiC;CAC7C,CAAC;AAEY,SAAU,UAAU,CAChC,EAAE,eAAe,GAAG,SAAS,EAAE,GAAG;IAAE,eAAe,EAAE,SAAS;AAAA,CAAE;IAEhE,OAAO,IACL,8OAAA,EAAA,sOAAA,CAAA,WAAA,EAAA;QAAA,UAAA;uPACE,MAAA,EAAA,SAAA;gBAAA,UAAQ,gBAAgB;YAAA,EAAS;uPACjC,OAAA,EAAA,OAAA;gBACE,KAAK,EAAC,4BAA4B;gBAClC,cAAc,EAAC,oBAAoB;gBACnC,aAAa,EAAC,oBAAoB;gBAClC,OAAO,EAAC,YAAY,CAAC,0BAA0B;;gBAC/C,MAAM,EAAC,IAAI,CAAC,kBAAkB;;gBAC9B,KAAK,EAAC,MAAM;gBACZ,KAAK,EAAE;oBACL,QAAQ,EAAE,UAAU;oBACpB,GAAG,EAAE,CAAC,CAAC;oBACP,IAAI,EAAE,CAAC;oBACP,YAAY,EAAE,QAAQ,EAAE,qBAAqB;oBAC7C,eAAe;iBAChB;gBACD,SAAS,EAAC,aAAa;gBAAA,UAAA;+PAEvB,MAAA,EAAA,QAAA;wBAAA,qPACE,OAAA,EAAA,kBAAA;4BACE,EAAE,EAAC,YAAY;4BACf,EAAE,EAAC,KAAK;4BACR,EAAE,EAAC,IAAI;4BACP,EAAE,EAAC,IAAI;4BACP,aAAa,EAAC,gBAAgB;4BAAA,UAAA;2QAE9B,MAAA,EAAA,QAAA;oCAAM,MAAM,EAAC,GAAG;oCAAC,SAAS,EAAE,eAAe;gCAAA,EAAI;iCAC/C,gPAAA,EAAA,QAAA;oCAAM,MAAM,EAAC,MAAM;oCAAC,SAAS,EAAC,SAAS;gCAAA,EAAG;2QAC1C,MAAA,EAAA,QAAA;oCAAM,MAAM,EAAC,GAAG;oCAAC,SAAS,EAAE,eAAe;gCAAA,EAAI;6BAAA;wBAAA,EAChC;oBAAA,EACZ;+PACP,MAAA,EAAA,QAAA;wBAAM,EAAE,EAAC,MAAM;wBAAC,IAAI,EAAE,eAAe;wBAAE,CAAC,EAAC,gBAAgB;oBAAA,EAAG;oBAAC,GAAG;+PAEhE,MAAA,EAAA,QAAA;wBACE,EAAE,EAAC,SAAS;wBACZ,IAAI,EAAC,kBAAkB;wBACvB,CAAC,EAAC,iBAAiB;wBACnB,SAAS,EAAC,iBAAiB;wBAC3B,KAAK,EAAE,YAAY;oBAAA,EACnB;iBAAA;YAAA,EACE;SAAA;IAAA,EACL,CACJ,CAAC;AACJ,CAAC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 3110, "column": 0}, "map": {"version":3,"file":"CivicAuthIframe.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/shared/components/CivicAuthIframe.tsx"],"sourcesContent":["\"use client\";\nimport React, { forwardRef } from \"react\";\nimport { IframeResizer } from \"@civic/iframe-resizer\";\nimport SVGLoading from \"./SVGLoading.js\";\nimport { useIframe } from \"../hooks/useIframe.js\";\nimport { useIsClient } from \"usehooks-ts\";\n\ntype CivicAuthIframeProps = {\n  onLoad?: () => void;\n  id: string;\n};\n\nconst CivicAuthIframe = forwardRef<HTMLIFrameElement, CivicAuthIframeProps>(\n  ({ onLoad, id }, ref) => {\n    const [isLoaded, setIsLoaded] = React.useState(false);\n    const { iframeMode, backgroundColor } = useIframe();\n    const iframeRef = ref;\n    const isClient = useIsClient();\n\n    // don't render on the server as the appearance changes when the iframe is loaded from login-app post-messages\n    return !isClient ? null : (\n      <div\n        style={{\n          position: \"relative\",\n          borderRadius: isLoaded ? \"24px\" : 0,\n          overflow: \"hidden\",\n          transition: \"all 250ms ease\",\n          backgroundColor: isLoaded ? backgroundColor : \"transparent\",\n          minHeight: iframeMode !== \"embedded\" ? \"26px\" : \"auto\",\n        }}\n      >\n        {!isLoaded ? (\n          <div\n            data-testid=\"iframe-shimmer-loader\"\n            style={{\n              width: \"100%\",\n              height: \"26px\",\n              display: \"flex\",\n              alignItems: \"center\",\n              justifyContent: \"center\",\n              position: \"absolute\",\n              top: \"50%\",\n              left: \"50%\",\n              transform: \"translate(-50%, -50%)\",\n              borderRadius: \"13px\",\n              overflow: \"hidden\",\n            }}\n          >\n            {iframeMode !== \"embedded\" && (\n              <SVGLoading backgroundColor={backgroundColor} />\n            )}\n          </div>\n        ) : null}\n        <div\n          style={{\n            opacity: isLoaded ? 1 : 0,\n            transition: \"opacity 250ms ease\",\n          }}\n        >\n          <IframeResizer\n            ref={iframeRef}\n            id={id}\n            data-testid={\"civic-auth-iframe-with-resizer\"}\n            initialHeight={iframeMode !== \"embedded\" ? \"26px\" : \"max-content\"}\n            animate={true}\n            animationDuration={250}\n            checkOrigin={false}\n            style={{\n              width: \"100%\",\n              border: \"none\",\n              minWidth: \"100%\",\n              backgroundColor: isLoaded ? backgroundColor : \"transparent\",\n              pointerEvents: \"auto\",\n            }}\n            onLoad={() => {\n              setIsLoaded(true);\n              onLoad?.();\n            }}\n            allow=\"camera; screen-wake-lock\"\n            allowFullScreen\n          />\n        </div>\n      </div>\n    );\n  },\n);\n\nCivicAuthIframe.displayName = \"CivicAuthIframe\";\n\nexport type { CivicAuthIframeProps };\n\nexport { CivicAuthIframe };\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 3201, "column": 0}, "map": {"version":3,"file":"AuthContext.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/shared/providers/AuthContext.tsx"],"sourcesContent":["\"use client\";\nimport { createContext } from \"react\";\nimport type { AuthStatus, DisplayMode } from \"@/types.js\";\n\nexport type AuthContextType = {\n  signIn: (displayMode?: DisplayMode) => Promise<void>;\n  isAuthenticated: boolean;\n  isLoading: boolean;\n  error: Error | null;\n  signOut: () => Promise<void>;\n  authStatus: AuthStatus;\n  displayMode: DisplayMode;\n};\nexport const AuthContext = createContext<AuthContextType | null>(null);\n"],"names":[],"mappings":";;;AACA,OAAO,EAAE,aAAa,EAAE,MAAM,OAAO,CAAC;AADtC,YAAY,CAAC;;AAaN,MAAM,WAAW,qKAAG,gBAAA,AAAa,EAAyB,IAAI,CAAC,CAAC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 3214, "column": 0}, "map": {"version":3,"file":"useAuth.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/shared/hooks/useAuth.ts"],"sourcesContent":["\"use client\";\nimport { useContext } from \"react\";\nimport { AuthContext } from \"@/shared/providers/AuthContext.js\";\n\nconst useAuth = () => {\n  const context = useContext(AuthContext);\n\n  if (!context) {\n    throw new Error(\"useAuth must be used within an AuthProvider\");\n  }\n\n  return context;\n};\n\nexport { useAuth };\n"],"names":[],"mappings":";;;AACA,OAAO,EAAE,UAAU,EAAE,MAAM,OAAO,CAAC;AACnC,OAAO,EAAE,WAAW,EAAE,MAAM,mCAAmC,CAAC;AAFhE,YAAY,CAAC;;;AAIb,MAAM,OAAO,GAAG,GAAG,EAAE;IACnB,MAAM,OAAO,qKAAG,aAAA,AAAU,8NAAC,cAAW,CAAC,CAAC;IAExC,IAAI,CAAC,OAAO,EAAE,CAAC;QACb,MAAM,IAAI,KAAK,CAAC,6CAA6C,CAAC,CAAC;IACjE,CAAC;IAED,OAAO,OAAO,CAAC;AACjB,CAAC,CAAC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 3237, "column": 0}, "map": {"version":3,"file":"ClientTokenExchangeSessionProvider.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/reactjs/providers/ClientTokenExchangeSessionProvider.tsx"],"sourcesContent":["\"use client\";\nimport type { ReactNode } from \"react\";\nimport React, {\n  createContext,\n  useCallback,\n  useEffect,\n  useMemo,\n  useState,\n  useRef,\n} from \"react\";\nimport { BrowserAuthenticationService } from \"@/services/AuthenticationService.js\";\nimport type { AuthenticationResolver } from \"@/services/types.js\";\nimport { isWindowInIframe } from \"@/lib/windowUtil.js\";\nimport { AuthStatus, type SessionData } from \"@/types.js\";\nimport {\n  useCurrentUrl,\n  useCivicAuthConfig,\n  useSignIn,\n  useIframe,\n} from \"@/shared/hooks/index.js\";\nimport { LocalStorageAdapter } from \"@/browser/storage.js\";\nimport { getIframeRef } from \"@/shared/lib/iframeUtils.js\";\n\nexport type ClientTokenExchangeSessionProviderOutput = {\n  data: SessionData | null;\n  error: Error | null;\n  isLoading: boolean;\n  doTokenExchange: null | ((url: string) => Promise<void>);\n};\nconst defaultSession: ClientTokenExchangeSessionProviderOutput = {\n  data: {\n    authenticated: false,\n    idToken: undefined,\n    accessToken: undefined,\n    displayMode: \"iframe\",\n  },\n  error: null,\n  isLoading: false,\n  doTokenExchange: null,\n};\n\n// Context for exposing session specifically to the TokenProvider\nconst ClientTokenExchangeSessionContext =\n  createContext<ClientTokenExchangeSessionProviderOutput>(defaultSession);\n\ntype ClientTokenExchangeSessionContextType = {\n  children: ReactNode;\n};\n\nconst ClientTokenExchangeSessionProvider = ({\n  children,\n}: ClientTokenExchangeSessionContextType) => {\n  const authConfig = useCivicAuthConfig();\n  const [authService, setAuthService] = useState<AuthenticationResolver>();\n  const [error, setError] = useState<Error | null>(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [session, setSession] = useState<SessionData | null>(null);\n  const { iframeRef } = useIframe();\n  const currentUrl = useCurrentUrl();\n  // Use the signIn hook with iframe displayMode\n  const { startSignIn, authStatus } = useSignIn({\n    displayMode: authConfig?.displayMode || \"iframe\",\n  });\n\n  // Add a ref to track processed codes\n  const processedCodes = useRef(new Set<string>());\n\n  useEffect(() => {\n    if (!currentUrl || !authConfig) return;\n\n    const {\n      redirectUrl,\n      clientId,\n      oauthServer,\n      scopes,\n      logoutRedirectUrl,\n      logoutUrl,\n    } = authConfig;\n    BrowserAuthenticationService.build({\n      clientId,\n      redirectUrl,\n      logoutRedirectUrl,\n      logoutUrl,\n      oauthServer,\n      scopes,\n      displayMode: \"iframe\",\n    }).then(setAuthService);\n  }, [currentUrl, authConfig]);\n\n  const isInIframe = isWindowInIframe(globalThis.window);\n\n  const doTokenExchange = useCallback(\n    async (inUrl: string) => {\n      if (!authService) return;\n      const url = new URL(inUrl);\n      const code = url.searchParams.get(\"code\");\n      const state = url.searchParams.get(\"state\");\n\n      // Create a unique key for this code/state combination\n      const exchangeKey = `${code}:${state}`;\n\n      // If we've already processed this code, skip it\n      if (processedCodes.current.has(exchangeKey)) {\n        console.log(\"Token exchange already processed for this code\");\n        return;\n      }\n\n      if (code && state) {\n        try {\n          // Mark this code as processed before starting the exchange\n          processedCodes.current.add(exchangeKey);\n          setIsLoading(true);\n          await authService.tokenExchange(code, state);\n        } catch (error) {\n          setError(error as Error);\n          setSession({ authenticated: false });\n        }\n        setIsLoading(false);\n      }\n    },\n    [authService],\n  );\n\n  const onSignIn = useCallback(async () => {\n    if (!authService) return;\n    const session = await authService.getSessionData();\n    setSession(session);\n  }, [authService]);\n\n  const onSignOut = useCallback(() => {\n    setSession(null);\n  }, []);\n\n  useEffect(() => {\n    LocalStorageAdapter.emitter.on(\"signIn\", onSignIn);\n    LocalStorageAdapter.emitter.on(\"signOut\", onSignOut);\n    return () => {\n      LocalStorageAdapter.emitter.off(\"signIn\", onSignIn);\n      LocalStorageAdapter.emitter.off(\"signOut\", onSignOut);\n    };\n  }, [onSignIn, onSignOut]);\n\n  useEffect(() => {\n    if (!authConfig) {\n      setIsLoading(true);\n    } else {\n      setIsLoading(false);\n    }\n  }, [authConfig]);\n\n  const [validationInProgress, setValidationInProgress] = useState(false);\n  // Handle page load or refocus\n  useEffect(() => {\n    if (\n      !authConfig?.redirectUrl ||\n      !authService ||\n      !currentUrl ||\n      isInIframe ||\n      isLoading\n    ) {\n      return;\n    }\n\n    // We specifically don't want to abort token refresh operations\n    // The AbortController is mainly used to prevent token exchange after unmount\n    const abortController = new AbortController();\n\n    const onPageLoad = async () => {\n      if (validationInProgress || authStatus === AuthStatus.SIGNING_OUT) return;\n\n      // if we have existing tokens, then validate them and return the session data\n      // otherwise check if we have a code in the url and exchange it for tokens\n      // if we have neither, initiate sign-in flow\n      setValidationInProgress(true);\n\n      try {\n        const existingSessionData = await authService.validateExistingSession();\n\n        if (existingSessionData.authenticated) {\n          setSession(existingSessionData);\n          return;\n        }\n        // If we have a code in the URL, attempt token exchange\n        if (new URL(currentUrl).searchParams.get(\"code\")) {\n          await doTokenExchange(currentUrl);\n          return;\n        }\n        // No valid session and no code in URL - initiate sign-in\n        // But only if we're not in an iframe (to prevent infinite loops in embedded scenarios)\n        if (!isInIframe && authConfig) {\n          const ref = getIframeRef(iframeRef?.current, true);\n          if (ref && authConfig?.displayMode === \"iframe\") {\n            startSignIn();\n          }\n        }\n      } catch (error) {\n        console.error(\"Error during session validation:\", error);\n      } finally {\n        setValidationInProgress(false);\n      }\n    };\n\n    onPageLoad();\n\n    return () => {\n      abortController.abort();\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [\n    authConfig,\n    authService,\n    currentUrl,\n    doTokenExchange,\n    isInIframe,\n    isLoading,\n    startSignIn,\n  ]);\n\n  const value = useMemo(\n    () => ({\n      data: session,\n      error,\n      isLoading,\n      doTokenExchange: authService ? doTokenExchange : null,\n    }),\n    [session, error, isLoading, authService, doTokenExchange],\n  );\n\n  return (\n    <ClientTokenExchangeSessionContext.Provider value={value}>\n      {children}\n    </ClientTokenExchangeSessionContext.Provider>\n  );\n};\n\nexport type { ClientTokenExchangeSessionContextType as SessionContextType };\nexport {\n  ClientTokenExchangeSessionProvider,\n  ClientTokenExchangeSessionContext,\n};\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 3466, "column": 0}, "map": {"version":3,"file":"useClientTokenExchangeSession.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/reactjs/hooks/useClientTokenExchangeSession.ts"],"sourcesContent":["\"use client\";\nimport { useContext } from \"react\";\nimport { ClientTokenExchangeSessionContext } from \"@/reactjs/providers/ClientTokenExchangeSessionProvider.js\";\n\n// TokenProvider will use this internal context to access session\nconst useClientTokenExchangeSession = () => {\n  const context = useContext(ClientTokenExchangeSessionContext);\n  if (!context) {\n    throw new Error(\"useSession must be used within an SessionProvider\");\n  }\n  return context;\n};\n\nexport { useClientTokenExchangeSession };\n"],"names":[],"mappings":";;;AACA,OAAO,EAAE,UAAU,EAAE,MAAM,OAAO,CAAC;AACnC,OAAO,EAAE,iCAAiC,EAAE,MAAM,2DAA2D,CAAC;AAF9G,YAAY,CAAC;;;AAIb,iEAAiE;AACjE,MAAM,6BAA6B,GAAG,GAAG,EAAE;IACzC,MAAM,OAAO,qKAAG,aAAA,AAAU,sPAAC,oCAAiC,CAAC,CAAC;IAC9D,IAAI,CAAC,OAAO,EAAE,CAAC;QACb,MAAM,IAAI,KAAK,CAAC,mDAAmD,CAAC,CAAC;IACvE,CAAC;IACD,OAAO,OAAO,CAAC;AACjB,CAAC,CAAC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 3490, "column": 0}, "map": {"version":3,"file":"useWindowFocused.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/shared/hooks/useWindowFocused.ts"],"sourcesContent":["import { useEffect, useState } from \"react\";\n\nconst useWindowFocused = () => {\n  const [isWindowFocused, setIsWindowFocused] = useState(true);\n  useEffect(() => {\n    const handleFocus = () => {\n      setIsWindowFocused(true);\n    };\n\n    const handleBlur = () => {\n      setIsWindowFocused(false);\n    };\n    window.addEventListener(\"focus\", handleFocus);\n    window.addEventListener(\"blur\", handleBlur);\n\n    return () => {\n      window.removeEventListener(\"focus\", handleFocus);\n      window.removeEventListener(\"blur\", handleBlur);\n    };\n  }, []);\n  return { isWindowFocused };\n};\nexport { useWindowFocused };\n"],"names":[],"mappings":";;;AAAA,OAAO,EAAE,SAAS,EAAE,QAAQ,EAAE,MAAM,OAAO,CAAC;;AAE5C,MAAM,gBAAgB,GAAG,GAAG,EAAE;IAC5B,MAAM,CAAC,eAAe,EAAE,kBAAkB,CAAC,qKAAG,WAAA,AAAQ,EAAC,IAAI,CAAC,CAAC;KAC7D,6KAAA,AAAS;sCAAC,GAAG,EAAE;YACb,MAAM,WAAW;0DAAG,GAAG,EAAE;oBACvB,kBAAkB,CAAC,IAAI,CAAC,CAAC;gBAC3B,CAAC,CAAC;;YAEF,MAAM,UAAU;yDAAG,GAAG,EAAE;oBACtB,kBAAkB,CAAC,KAAK,CAAC,CAAC;gBAC5B,CAAC,CAAC;;YACF,MAAM,CAAC,gBAAgB,CAAC,OAAO,EAAE,WAAW,CAAC,CAAC;YAC9C,MAAM,CAAC,gBAAgB,CAAC,MAAM,EAAE,UAAU,CAAC,CAAC;YAE5C;8CAAO,GAAG,EAAE;oBACV,MAAM,CAAC,mBAAmB,CAAC,OAAO,EAAE,WAAW,CAAC,CAAC;oBACjD,MAAM,CAAC,mBAAmB,CAAC,MAAM,EAAE,UAAU,CAAC,CAAC;gBACjD,CAAC,CAAC;;QACJ,CAAC;qCAAE,EAAE,CAAC,CAAC;IACP,OAAO;QAAE,eAAe;IAAA,CAAE,CAAC;AAC7B,CAAC,CAAC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 3531, "column": 0}, "map": {"version":3,"file":"useRefresh.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/shared/hooks/useRefresh.ts"],"sourcesContent":["import { useEffect, useMemo, useState } from \"react\";\nimport { useCivicAuthConfig } from \"./useCivicAuthConfig.js\";\nimport type { SessionData } from \"@/types.js\";\nimport { LocalStorageAdapter } from \"@/browser/storage.js\";\nimport { BrowserAuthenticationRefresher } from \"../lib/BrowserAuthenticationRefresher.js\";\n\nconst useRefresh = (session: SessionData | null) => {\n  const authConfig = useCivicAuthConfig();\n  const storage = useMemo(() => new LocalStorageAdapter(), []);\n  const [error, setError] = useState<Error>();\n  // setup token autorefresh\n  const [refresher, setRefresher] = useState<\n    BrowserAuthenticationRefresher | undefined\n  >(undefined);\n\n  useEffect(() => {\n    if (!authConfig) return;\n    const abortController = new AbortController();\n    const currentRefresher = refresher;\n\n    const onError = async (error: Error) => {\n      console.error(\"Error refreshing token\", error);\n      refresher?.clearAutorefresh();\n      setError(error);\n    };\n    BrowserAuthenticationRefresher.build(\n      { ...authConfig },\n      storage,\n      onError,\n    ).then((newRefresher) => {\n      if (abortController.signal.aborted) return;\n\n      currentRefresher?.clearAutorefresh();\n      setRefresher(newRefresher);\n    });\n\n    return () => {\n      abortController.abort();\n      currentRefresher?.clearAutorefresh();\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [authConfig, storage]); // Only depend on what actually changes\n\n  useEffect(() => {\n    if (session?.authenticated) {\n      refresher?.setupAutorefresh();\n    } else {\n      refresher?.clearAutorefresh();\n    }\n\n    return () => refresher?.clearAutorefresh();\n  }, [refresher, session?.authenticated]);\n  return {\n    error,\n  };\n};\n\nexport { useRefresh };\n"],"names":[],"mappings":";;;AAAA,OAAO,EAAE,SAAS,EAAE,OAAO,EAAE,QAAQ,EAAE,MAAM,OAAO,CAAC;AACrD,OAAO,EAAE,kBAAkB,EAAE,MAAM,yBAAyB,CAAC;AAE7D,OAAO,EAAE,mBAAmB,EAAE,MAAM,sBAAsB,CAAC;AAC3D,OAAO,EAAE,8BAA8B,EAAE,MAAM,0CAA0C,CAAC;;;;;AAE1F,MAAM,UAAU,GAAG,CAAC,OAA2B,EAAE,EAAE;IACjD,MAAM,UAAU,sOAAG,qBAAA,AAAkB,EAAE,CAAC;IACxC,MAAM,OAAO,qKAAG,UAAA,AAAO;uCAAC,GAAG,CAAG,CAAD,GAAK,kOAAmB,EAAE;sCAAE,EAAE,CAAC,CAAC;IAC7D,MAAM,CAAC,KAAK,EAAE,QAAQ,CAAC,qKAAG,WAAA,AAAQ,EAAS,CAAC;IAC5C,0BAA0B;IAC1B,MAAM,CAAC,SAAS,EAAE,YAAY,CAAC,qKAAG,WAAQ,AAAR,EAEhC,SAAS,CAAC,CAAC;sKAEb,YAAA,AAAS;gCAAC,GAAG,EAAE;YACb,IAAI,CAAC,UAAU,EAAE,OAAO;YACxB,MAAM,eAAe,GAAG,IAAI,eAAe,EAAE,CAAC;YAC9C,MAAM,gBAAgB,GAAG,SAAS,CAAC;YAEnC,MAAM,OAAO;gDAAG,KAAK,EAAE,KAAY,EAAE,EAAE;oBACrC,OAAO,CAAC,KAAK,CAAC,wBAAwB,EAAE,KAAK,CAAC,CAAC;oBAC/C,SAAS,EAAE,gBAAgB,EAAE,CAAC;oBAC9B,QAAQ,CAAC,KAAK,CAAC,CAAC;gBAClB,CAAC,CAAC;;oPACF,kCAA8B,CAAC,KAAK,CAClC;gBAAE,GAAG,UAAU;YAAA,CAAE,EACjB,OAAO,EACP,OAAO,CACR,CAAC,IAAI;wCAAC,CAAC,YAAY,EAAE,EAAE;oBACtB,IAAI,eAAe,CAAC,MAAM,CAAC,OAAO,EAAE,OAAO;oBAE3C,gBAAgB,EAAE,gBAAgB,EAAE,CAAC;oBACrC,YAAY,CAAC,YAAY,CAAC,CAAC;gBAC7B,CAAC,CAAC,CAAC;;YAEH;wCAAO,GAAG,EAAE;oBACV,eAAe,CAAC,KAAK,EAAE,CAAC;oBACxB,gBAAgB,EAAE,gBAAgB,EAAE,CAAC;gBACvC,CAAC,CAAC;;QACF,uDAAuD;QACzD,CAAC;+BAAE;QAAC,UAAU;QAAE,OAAO;KAAC,CAAC,CAAC,CAAC,uCAAuC;IAElE,8KAAS,AAAT;gCAAU,GAAG,EAAE;YACb,IAAI,OAAO,EAAE,aAAa,EAAE,CAAC;gBAC3B,SAAS,EAAE,gBAAgB,EAAE,CAAC;YAChC,CAAC,MAAM,CAAC;gBACN,SAAS,EAAE,gBAAgB,EAAE,CAAC;YAChC,CAAC;YAED;wCAAO,GAAG,CAAG,CAAD,QAAU,EAAE,gBAAgB,EAAE,CAAC;;QAC7C,CAAC;+BAAE;QAAC,SAAS;QAAE,OAAO,EAAE,aAAa;KAAC,CAAC,CAAC;IACxC,OAAO;QACL,KAAK;KACN,CAAC;AACJ,CAAC,CAAC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 3610, "column": 0}, "map": {"version":3,"file":"index.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/shared/hooks/index.ts"],"sourcesContent":["export { useToken } from \"@/shared/hooks/useToken.js\";\nexport { useAuth } from \"@/shared/hooks/useAuth.js\";\nexport { useIframe } from \"@/shared/hooks/useIframe.js\";\nexport { useSession } from \"@/shared/hooks/useSession.js\";\nexport { useCivicAuthConfig } from \"@/shared/hooks/useCivicAuthConfig.js\";\nexport { useOAuthEndpoints } from \"@/shared/hooks/useOAuthEndpoints.js\";\nexport { useCurrentUrl } from \"@/shared/hooks/useCurrentUrl.js\";\nexport { useClientTokenExchangeSession } from \"@/reactjs/hooks/useClientTokenExchangeSession.js\";\nexport { useWindowFocused } from \"@/shared/hooks/useWindowFocused.js\";\nexport { useRefresh } from \"@/shared/hooks/useRefresh.js\";\nexport { useSignIn } from \"@/shared/hooks/useSignIn.js\";\nexport { useAuthStatus } from \"@/shared/providers/AuthStatusContext.js\";\n"],"names":[],"mappings":";AAAA,OAAO,EAAE,QAAQ,EAAE,MAAM,4BAA4B,CAAC;AACtD,OAAO,EAAE,OAAO,EAAE,MAAM,2BAA2B,CAAC;AACpD,OAAO,EAAE,SAAS,EAAE,MAAM,6BAA6B,CAAC;AACxD,OAAO,EAAE,UAAU,EAAE,MAAM,8BAA8B,CAAC;AAC1D,OAAO,EAAE,kBAAkB,EAAE,MAAM,sCAAsC,CAAC;AAC1E,OAAO,EAAE,iBAAiB,EAAE,MAAM,qCAAqC,CAAC;AACxE,OAAO,EAAE,aAAa,EAAE,MAAM,iCAAiC,CAAC;AAChE,OAAO,EAAE,6BAA6B,EAAE,MAAM,kDAAkD,CAAC;AACjG,OAAO,EAAE,gBAAgB,EAAE,MAAM,oCAAoC,CAAC;AACtE,OAAO,EAAE,UAAU,EAAE,MAAM,8BAA8B,CAAC;AAC1D,OAAO,EAAE,SAAS,EAAE,MAAM,6BAA6B,CAAC;AACxD,OAAO,EAAE,aAAa,EAAE,MAAM,yCAAyC,CAAC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 3661, "column": 0}, "map": {"version":3,"file":"CivicAuthIframeContainer.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/shared/components/CivicAuthIframeContainer.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useCallback, useEffect, useRef, useState } from \"react\";\nimport { LoadingIcon } from \"@/shared/components/LoadingIcon.js\";\nimport { CloseIcon } from \"@/shared/components/CloseIcon.js\";\nimport { CivicAuthIframe } from \"@/shared/components/CivicAuthIframe.js\";\nimport { useIframe } from \"@/shared/hooks/index.js\";\nimport { TOKEN_EXCHANGE_TRIGGER_TEXT } from \"@/constants.js\";\nimport { useCivicAuthConfig } from \"@/shared/hooks/index.js\";\nimport { useClientTokenExchangeSession } from \"@/shared/hooks/index.js\";\nimport { getIframeRef } from \"../lib/iframeUtils.js\";\nimport { useIsClient } from \"usehooks-ts\";\n\ntype CivicAuthIframeContainerProps = {\n  onClose?: () => void;\n  closeOnRedirect?: boolean;\n};\n\nfunction NoChrome({\n  children,\n}: {\n  children: React.ReactNode;\n  onClose?: () => void;\n}) {\n  return (\n    <div data-testid=\"civic-iframe-no-chrome\" style={{ position: \"relative\" }}>\n      {children}\n    </div>\n  );\n}\n\nexport function IframeChrome({\n  children,\n  onClose,\n  isFrameLoaded,\n}: {\n  children: React.ReactNode;\n  onClose?: () => void;\n  isFrameLoaded: boolean;\n}) {\n  const { setIframeAborted } = useIframe();\n\n  return (\n    <div\n      style={{\n        position: \"absolute\",\n        left: 0,\n        top: 0,\n        zIndex: 50,\n        display: \"flex\",\n        height: \"100vh\",\n        width: \"100vw\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        backgroundColor: \"rgba(17, 24, 39, 0.5)\",\n        backdropFilter: \"blur(4px)\",\n      }}\n      onClick={() => {\n        setIframeAborted(true);\n        onClose?.();\n      }}\n    >\n      <div\n        data-testid=\"iframe-chrome\"\n        style={{\n          position: \"relative\",\n          overflow: \"hidden\",\n          paddingLeft: \"0\",\n          paddingRight: \"0\",\n          paddingBottom: \"0\",\n          width: \"20rem\",\n        }}\n        onClick={(e) => e.stopPropagation()}\n      >\n        {isFrameLoaded && (\n          <button\n            style={{\n              position: \"absolute\",\n              right: \"0.6rem\",\n              top: \"0.6rem\",\n              cursor: \"pointer\",\n              alignItems: \"center\",\n              justifyContent: \"center\",\n              border: \"none\",\n              backgroundColor: \"transparent\",\n              padding: \"0.25rem\",\n              color: \"#9ca3af\",\n              zIndex: 100,\n            }}\n            onClick={() => {\n              setIframeAborted(true);\n              onClose?.();\n            }}\n          >\n            <CloseIcon />\n          </button>\n        )}\n\n        {children}\n      </div>\n    </div>\n  );\n}\n\nconst CivicAuthIframeContainer = ({\n  onClose,\n  closeOnRedirect = true,\n}: CivicAuthIframeContainerProps) => {\n  const config = useCivicAuthConfig();\n  const [tokenExchangeUrl, setTokenExchangeUrl] = useState<string | null>(null);\n  const { doTokenExchange } = useClientTokenExchangeSession();\n  const { iframeRef, iframeMode, backgroundColor, setIframeMounted } =\n    useIframe();\n  const [isIframeContentLoaded, setIsIframeContentLoaded] = useState(false);\n\n  useEffect(() => {\n    setIframeMounted(true);\n  }, [setIframeMounted]);\n\n  useEffect(() => {\n    if (tokenExchangeUrl) {\n      doTokenExchange?.(tokenExchangeUrl);\n    }\n  }, [doTokenExchange, tokenExchangeUrl]);\n\n  const processIframeUrl = useCallback(() => {\n    if (!config) return;\n    if (iframeRef && iframeRef.current) {\n      const ref = getIframeRef(iframeRef.current)!;\n      if (ref.contentWindow) {\n        try {\n          const iframeUrl = ref.contentWindow.location.href;\n          // we know that oauth has finished when the iframe redirects to our redirectUrl\n          if (iframeUrl.startsWith(config.redirectUrl)) {\n            const iframeBody = ref.contentWindow.document.body.innerHTML;\n\n            // If we're doing a server token exchange, we need to call the server a second time\n            // using a fetch so that we're on the same domain and cookies can be sent and read\n            // The server will use the presence of the code_verifier cookie to determine whether to do a token exchange or not.\n            // On the initial (3rd party) redirect from the auth server, the cookie won't be sent, so the server-side callback route will just render a blank page,\n            // and we'll do the exchange request from here, which will include the cookies.\n            if (iframeBody.includes(TOKEN_EXCHANGE_TRIGGER_TEXT)) {\n              const params = new URL(iframeUrl).searchParams;\n              const appUrl = globalThis.window?.location?.origin;\n              fetch(\n                `${config.redirectUrl}?${params.toString()}&appUrl=${appUrl}`,\n              );\n            } else {\n              // if we're doing token-exchange in the client, we can just set the authResponseUrl\n              // to be handled by the auth provider\n              // iframeRef.current.setAttribute(\"src\", \"\");\n              setTokenExchangeUrl(iframeUrl);\n            }\n\n            if (closeOnRedirect) onClose?.();\n            return true; // Successfully processed the URL\n          }\n        } catch {\n          // ignore errors while waiting for redirect\n        }\n      }\n    }\n    return false; // Haven't processed the URL yet\n  }, [closeOnRedirect, config, iframeRef, onClose]);\n\n  const intervalId = useRef<NodeJS.Timeout>();\n\n  const handleEscape = useCallback(\n    (event: KeyboardEvent) => {\n      if (event.key === \"Escape\") {\n        onClose?.();\n      }\n    },\n    [onClose],\n  );\n\n  // handle Escape\n  useEffect(() => {\n    window.addEventListener(\"keydown\", handleEscape);\n\n    return () => window.removeEventListener(\"keydown\", handleEscape);\n  });\n\n  const handleIframeLoad = useCallback(() => {\n    setIsIframeContentLoaded(true);\n\n    const iframeHasUrl = processIframeUrl();\n    if (iframeHasUrl && intervalId.current) {\n      clearInterval(intervalId.current);\n    }\n  }, [processIframeUrl, intervalId]);\n\n  const WrapperComponent = iframeMode === \"embedded\" ? NoChrome : IframeChrome;\n  const isClient = useIsClient();\n  // if the iframe is embedded, we need to handle the loading state differently\n  if (iframeMode === \"embedded\") {\n    return (\n      <WrapperComponent onClose={onClose} isFrameLoaded={isIframeContentLoaded}>\n        <div\n          style={{\n            minHeight: isIframeContentLoaded ? \"auto\" : \"225px\",\n            backgroundColor: isClient ? backgroundColor : \"#8E949D\",\n            borderRadius: \"24px\",\n            position: \"relative\",\n            transition: \"all 0.5s ease-in-out\",\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyContent: \"center\",\n            overflow: \"hidden\",\n          }}\n        >\n          {/* always load the loading spinner in the center of the iframe */}\n          {!isIframeContentLoaded && (\n            <div\n              style={{\n                position: \"absolute\",\n                top: 0,\n                left: 0,\n                right: 0,\n                bottom: 0,\n                display: \"flex\",\n                alignItems: \"center\",\n                justifyContent: \"center\",\n              }}\n            >\n              <LoadingIcon />\n            </div>\n          )}\n          <div\n            style={{\n              width: \"100%\",\n              minWidth: \"100%\",\n              alignItems: \"center\",\n              justifyContent: \"center\",\n              borderRadius: \"24px\",\n              overflow: \"hidden\",\n              opacity: isIframeContentLoaded ? 1 : 0,\n              transition: \"opacity 0.5s ease-in-out\",\n            }}\n          >\n            <CivicAuthIframe\n              ref={iframeRef}\n              id={\"civic-auth-iframe\"}\n              onLoad={handleIframeLoad}\n            />\n          </div>\n        </div>\n      </WrapperComponent>\n    );\n  }\n\n  // if the iframe is not embedded, we can just render the iframe directly\n  return (\n    <WrapperComponent onClose={onClose} isFrameLoaded={isIframeContentLoaded}>\n      <CivicAuthIframe\n        ref={iframeRef}\n        id={\"civic-auth-iframe\"}\n        onLoad={handleIframeLoad}\n      />\n    </WrapperComponent>\n  );\n};\n\nexport type { CivicAuthIframeContainerProps };\n\nexport { CivicAuthIframeContainer };\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 3924, "column": 0}, "map": {"version":3,"file":"BlockDisplay.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/shared/components/BlockDisplay.tsx"],"sourcesContent":["import { type ReactNode } from \"react\";\nimport { useIframe } from \"../hooks/useIframe.js\";\nimport { useIsClient } from \"usehooks-ts\";\n\nconst BlockDisplay = ({ children }: { children: ReactNode }) => {\n  const { backgroundColor } = useIframe();\n  const isClient = useIsClient();\n  // don't render in server-mode as the appearance changes after load\n  return !isClient ? null : (\n    <div\n      id=\"iframe-block-display-wrapper\"\n      style={{\n        position: \"absolute\",\n        left: 0,\n        top: 0,\n        zIndex: 200,\n        display: \"flex\",\n        height: \"100vh\",\n        width: \"100vw\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        backgroundColor,\n      }}\n    >\n      <div\n        id=\"iframe-block-display\"\n        style={{\n          position: \"relative\",\n          inset: 0,\n          display: \"flex\",\n          alignItems: \"center\",\n          justifyContent: \"center\",\n          backgroundColor,\n        }}\n      >\n        {children}\n      </div>\n    </div>\n  );\n};\nexport { BlockDisplay };\n"],"names":[],"mappings":";;;;AAAA,OAAO,EAAkB,MAAM,OAAO,CAAC;AACvC,OAAO,EAAE,SAAS,EAAE,MAAM,uBAAuB,CAAC;AAClD,OAAO,EAAE,WAAW,EAAE,MAAM,aAAa,CAAC;;;;;AAE1C,MAAM,YAAY,GAAG,CAAC,EAAE,QAAQ,EAA2B,EAAE,EAAE;IAC7D,MAAM,EAAE,eAAe,EAAE,6NAAG,YAAA,AAAS,EAAE,CAAC;IACxC,MAAM,QAAQ,IAAG,oKAAA,AAAW,EAAE,CAAC;IAC/B,mEAAmE;IACnE,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,2OACxB,MAAA,EAAA,OAAA;QACE,EAAE,EAAC,8BAA8B;QACjC,KAAK,EAAE;YACL,QAAQ,EAAE,UAAU;YACpB,IAAI,EAAE,CAAC;YACP,GAAG,EAAE,CAAC;YACN,MAAM,EAAE,GAAG;YACX,OAAO,EAAE,MAAM;YACf,MAAM,EAAE,OAAO;YACf,KAAK,EAAE,OAAO;YACd,UAAU,EAAE,QAAQ;YACpB,cAAc,EAAE,QAAQ;YACxB,eAAe;SAChB;QAAA,qPAED,MAAA,EAAA,OAAA;YACE,EAAE,EAAC,sBAAsB;YACzB,KAAK,EAAE;gBACL,QAAQ,EAAE,UAAU;gBACpB,KAAK,EAAE,CAAC;gBACR,OAAO,EAAE,MAAM;gBACf,UAAU,EAAE,QAAQ;gBACpB,cAAc,EAAE,QAAQ;gBACxB,eAAe;aAChB;YAAA,UAEA,QAAQ;QAAA,EACL;IAAA,EACF,CACP,CAAC;AACJ,CAAC,CAAC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 3975, "column": 0}, "map": {"version":3,"file":"CivicAuthLogoutIframeContainer.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/shared/components/CivicAuthLogoutIframeContainer.tsx"],"sourcesContent":["\"use client\";\n\nimport { CivicAuthIframe } from \"@/shared/components/CivicAuthIframe.js\";\nimport { useIframe } from \"@/shared/hooks/index.js\";\nimport { LoadingIcon } from \"./LoadingIcon.js\";\nimport { IframeChrome } from \"./CivicAuthIframeContainer.js\";\nimport { useIsClient } from \"usehooks-ts\";\n\ntype CivicAuthLogoutIframeContainerProps = {\n  isLoading?: boolean;\n};\n\nconst CivicAuthLogoutIframeContainer = ({\n  isLoading = false,\n}: CivicAuthLogoutIframeContainerProps) => {\n  const { logoutIframeRef } = useIframe();\n  const isClient = useIsClient();\n  // don't render the in server-mode as the appearance changes after load\n  return !isClient ? null : (\n    <IframeChrome isFrameLoaded={true}>\n      {isLoading ? (\n        <div\n          id=\"civic-auth-loading-icon-wrapper\"\n          style={{\n            position: \"absolute\",\n            inset: 0,\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyContent: \"center\",\n          }}\n        >\n          <LoadingIcon />\n        </div>\n      ) : null}\n      <CivicAuthIframe\n        ref={logoutIframeRef}\n        id={\"civic-auth-logout-iframe\"}\n        onLoad={() => {}}\n      />\n    </IframeChrome>\n  );\n};\n\nexport { CivicAuthLogoutIframeContainer };\n"],"names":[],"mappings":";;;;AAEA,OAAO,EAAE,eAAe,EAAE,MAAM,wCAAwC,CAAC;;AACzE,OAAO,EAAE,SAAS,EAAE,MAAM,yBAAyB,CAAC;AACpD,OAAO,EAAE,WAAW,EAAE,MAAM,kBAAkB,CAAC;AAC/C,OAAO,EAAE,YAAY,EAAE,MAAM,+BAA+B,CAAC;AAC7D,OAAO,EAAE,WAAW,EAAE,MAAM,aAAa,CAAC;AAN1C,YAAY,CAAC;;;;;;;AAYb,MAAM,8BAA8B,GAAG,CAAC,EACtC,SAAS,GAAG,KAAK,EACmB,EAAE,EAAE;IACxC,MAAM,EAAE,eAAe,EAAE,6NAAG,YAAA,AAAS,EAAE,CAAC;IACxC,MAAM,QAAQ,GAAG,qKAAA,AAAW,EAAE,CAAC;IAC/B,uEAAuE;IACvE,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,2OACxB,OAAA,4OAAC,eAAY,EAAA;QAAC,aAAa,EAAE,IAAI;QAAA,UAAA;YAC9B,SAAS,CAAC,CAAC,CAAC,CACX,gPAAA,EAAA,OAAA;gBACE,EAAE,EAAC,iCAAiC;gBACpC,KAAK,EAAE;oBACL,QAAQ,EAAE,UAAU;oBACpB,KAAK,EAAE,CAAC;oBACR,OAAO,EAAE,MAAM;oBACf,UAAU,EAAE,QAAQ;oBACpB,cAAc,EAAE,QAAQ;iBACzB;gBAAA,qPAED,MAAA,+NAAC,cAAW,EAAA,CAAA,EAAG;YAAA,EACX,CACP,CAAC,CAAC,AAAC,IAAI;uPACR,MAAA,mOAAC,kBAAe,EAAA;gBACd,GAAG,EAAE,eAAe;gBACpB,EAAE,EAAE,0BAA0B;gBAC9B,MAAM,EAAE,GAAG,EAAE,AAAE,CAAC;YAAA,EAChB;SAAA;IAAA,EACW,CAChB,CAAC;AACJ,CAAC,CAAC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 4026, "column": 0}, "map": {"version":3,"file":"IFrameAndLoading.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/shared/components/IFrameAndLoading.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useIframe } from \"../hooks/useIframe.js\";\nimport { useIsInIframe } from \"../hooks/useIsInIframe.js\";\nimport { CivicAuthIframeContainer } from \"./CivicAuthIframeContainer.js\";\nimport { BlockDisplay } from \"./BlockDisplay.js\";\nimport { LoadingIcon } from \"./LoadingIcon.js\";\nimport { CivicAuthLogoutIframeContainer } from \"./CivicAuthLogoutIframeContainer.js\";\nimport { useSession } from \"../hooks/useSession.js\";\n\nconst IFrameAndLoading = ({\n  error,\n  showIframeOnLogout = false,\n}: {\n  error: Error | null;\n  isLoading: boolean;\n  showIframeOnLogout?: boolean;\n}) => {\n  const isInIframe = useIsInIframe();\n  const [logoutIframeLoading, setLogoutIframeLoading] = useState(true);\n  const {\n    renderIframe,\n    iframeIsVisible,\n    setIframeIsVisible,\n    logoutIframeIsVisible,\n  } = useIframe();\n  const session = useSession();\n  // we show a loading overlay to block the display for the user\n  // as the page that loads within the iframe will be the actual customer\n  // login page just after authenticatino, which shouldn't be shown to the user during login\n  // there's a small period where we're resolving the session and the iframe is showing\n  const showLoadingOverlay = isInIframe;\n\n  useEffect(() => {\n    const handleErrorMessage = (event: MessageEvent) => {\n      const thisURL = new URL(window.location.href);\n      if (\n        !(\n          event.origin.endsWith(\"civic.com\") || thisURL.hostname === \"localhost\"\n        )\n      ) {\n        return;\n      }\n\n      // The login app has thrown an error, so we need to show the logout iframe\n      if (\n        event.data?.source === \"civicloginApp\" &&\n        event.data?.type === \"auth_error\"\n      ) {\n        setLogoutIframeLoading(false);\n        return;\n      }\n\n      setLogoutIframeLoading(true);\n    };\n\n    window.addEventListener(\"message\", handleErrorMessage);\n    return () => window.removeEventListener(\"message\", handleErrorMessage);\n  }, []);\n\n  return (\n    <>\n      {/* when the user is authenticated we shouldn't render the iframe anymore\n      so that we clear the session for the next time */}\n      {renderIframe && !session.data?.authenticated && (\n        <div\n          style={iframeIsVisible ? { display: \"block\" } : { display: \"none\" }}\n        >\n          <CivicAuthIframeContainer onClose={() => setIframeIsVisible(false)} />\n        </div>\n      )}\n\n      <div\n        style={\n          showIframeOnLogout && logoutIframeIsVisible\n            ? { display: \"block\" }\n            : { display: \"none\" }\n        }\n      >\n        <CivicAuthLogoutIframeContainer isLoading={logoutIframeLoading} />\n      </div>\n\n      {error && (\n        <BlockDisplay>\n          <div>Error: {error?.message}</div>\n        </BlockDisplay>\n      )}\n\n      {showLoadingOverlay && !error && (\n        <BlockDisplay>\n          <LoadingIcon />\n        </BlockDisplay>\n      )}\n    </>\n  );\n};\nexport { IFrameAndLoading };\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 4123, "column": 0}, "map": {"version":3,"file":"NextClientAuthenticationRefresher.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/nextjs/NextClientAuthenticationRefresher.ts"],"sourcesContent":["import type { AuthConfig } from \"@/server/config.js\";\nimport type { AuthStorage, OIDCTokenResponseBody } from \"@/types.js\";\nimport { BrowserAuthenticationRefresher } from \"@/shared/lib/BrowserAuthenticationRefresher.js\";\n\nexport class NextClientAuthenticationRefresher extends BrowserAuthenticationRefresher {\n  static override async build(\n    authConfig: AuthConfig,\n    storage: AuthStorage,\n    onError: (error: Error) => Promise<void>,\n  ): Promise<NextClientAuthenticationRefresher> {\n    const refresher = new NextClientAuthenticationRefresher(\n      authConfig,\n      storage,\n      onError,\n    );\n    return refresher;\n  }\n\n  override async refreshAccessToken(): Promise<OIDCTokenResponseBody> {\n    if (!this.authConfig) throw new Error(\"No auth config available\");\n    if (!this.authConfig.refreshUrl)\n      throw new Error(\"No refresh URL available\");\n\n    try {\n      const res = await fetch(this.authConfig.refreshUrl);\n      const json = await res.json();\n      return json.tokens as OIDCTokenResponseBody;\n    } catch (error) {\n      console.error(\n        \"NextClientAuthenticationRefresher refreshAccessToken: Failed to refresh tokens:\",\n        error,\n      );\n      this.onError(error as Error);\n      throw error;\n    }\n  }\n}\n"],"names":[],"mappings":";;;AAEA,OAAO,EAAE,8BAA8B,EAAE,MAAM,gDAAgD,CAAC;;AAE1F,MAAO,iCAAkC,kPAAQ,iCAA8B;IACnF,MAAM,CAAU,KAAK,CAAC,KAAK,CACzB,UAAsB,EACtB,OAAoB,EACpB,OAAwC,EAAA;QAExC,MAAM,SAAS,GAAG,IAAI,iCAAiC,CACrD,UAAU,EACV,OAAO,EACP,OAAO,CACR,CAAC;QACF,OAAO,SAAS,CAAC;IACnB,CAAC;IAEQ,KAAK,CAAC,kBAAkB,GAAA;QAC/B,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE,MAAM,IAAI,KAAK,CAAC,0BAA0B,CAAC,CAAC;QAClE,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,UAAU,EAC7B,MAAM,IAAI,KAAK,CAAC,0BAA0B,CAAC,CAAC;QAE9C,IAAI,CAAC;YACH,MAAM,GAAG,GAAG,MAAM,KAAK,CAAC,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;YACpD,MAAM,IAAI,GAAG,MAAM,GAAG,CAAC,IAAI,EAAE,CAAC;YAC9B,OAAO,IAAI,CAAC,MAA+B,CAAC;QAC9C,CAAC,CAAC,OAAO,KAAK,EAAE,CAAC;YACf,OAAO,CAAC,KAAK,CACX,iFAAiF,EACjF,KAAK,CACN,CAAC;YACF,IAAI,CAAC,OAAO,CAAC,KAAc,CAAC,CAAC;YAC7B,MAAM,KAAK,CAAC;QACd,CAAC;IACH,CAAC;CACF","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 4153, "column": 0}, "map": {"version":3,"file":"useRefresh.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/nextjs/hooks/useRefresh.ts"],"sourcesContent":["import { useCivicAuthConfig } from \"@/shared/hooks/useCivicAuthConfig.js\";\nimport { useEffect, useState } from \"react\";\nimport { BrowserCookieStorage } from \"@/shared/index.js\";\nimport { resolveAuthConfig } from \"../config.js\";\nimport { NextClientAuthenticationRefresher } from \"../NextClientAuthenticationRefresher.js\";\nimport { useSession } from \"@/shared/hooks/useSession.js\";\n\nconst useRefresh = () => {\n  const [error, setError] = useState<Error>();\n  const { data: session } = useSession();\n  const authConfig = useCivicAuthConfig();\n\n  // setup token autorefresh\n  const [refresher, setRefresher] = useState<\n    NextClientAuthenticationRefresher | undefined\n  >(undefined);\n\n  useEffect(() => {\n    if (!authConfig) return;\n    const abortController = new AbortController();\n    const currentRefresher = refresher;\n    const config = resolveAuthConfig(authConfig ?? {});\n    const storage = new BrowserCookieStorage(\n      config.cookies.tokens.access_token,\n    );\n    const onError = async (error: Error) => {\n      console.error(\"Error refreshing token\", error);\n      refresher?.clearAutorefresh();\n      setError(error);\n    };\n    NextClientAuthenticationRefresher.build(\n      { ...authConfig },\n      storage,\n      onError,\n    ).then((newRefresher) => {\n      if (abortController.signal.aborted) return;\n\n      currentRefresher?.clearAutorefresh();\n      setRefresher(newRefresher);\n    });\n\n    return () => {\n      abortController.abort();\n      currentRefresher?.clearAutorefresh();\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [authConfig]); // Only depend on what actually changes\n\n  useEffect(() => {\n    if (session?.authenticated) {\n      refresher?.setupAutorefresh();\n    } else {\n      refresher?.clearAutorefresh();\n    }\n\n    return () => refresher?.clearAutorefresh();\n  }, [refresher, session?.authenticated]);\n\n  return {\n    error,\n  };\n};\n\nexport { useRefresh };\n"],"names":[],"mappings":";;;AAAA,OAAO,EAAE,kBAAkB,EAAE,MAAM,sCAAsC,CAAC;AAC1E,OAAO,EAAE,SAAS,EAAE,QAAQ,EAAE,MAAM,OAAO,CAAC;AAC5C,OAAO,EAAE,oBAAoB,EAAE,MAAM,mBAAmB,CAAC;;AACzD,OAAO,EAAE,iBAAiB,EAAE,MAAM,cAAc,CAAC;AACjD,OAAO,EAAE,iCAAiC,EAAE,MAAM,yCAAyC,CAAC;AAC5F,OAAO,EAAE,UAAU,EAAE,MAAM,8BAA8B,CAAC;;;;;;;AAE1D,MAAM,UAAU,GAAG,GAAG,EAAE;IACtB,MAAM,CAAC,KAAK,EAAE,QAAQ,CAAC,qKAAG,WAAA,AAAQ,EAAS,CAAC;IAC5C,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,GAAG,wOAAU,AAAV,EAAY,CAAC;IACvC,MAAM,UAAU,sOAAG,qBAAA,AAAkB,EAAE,CAAC;IAExC,0BAA0B;IAC1B,MAAM,CAAC,SAAS,EAAE,YAAY,CAAC,qKAAG,WAAA,AAAQ,EAExC,SAAS,CAAC,CAAC;sKAEb,YAAA,AAAS;gCAAC,GAAG,EAAE;YACb,IAAI,CAAC,UAAU,EAAE,OAAO;YACxB,MAAM,eAAe,GAAG,IAAI,eAAe,EAAE,CAAC;YAC9C,MAAM,gBAAgB,GAAG,SAAS,CAAC;YACnC,MAAM,MAAM,IAAG,iOAAA,AAAiB,EAAC,UAAU,IAAI,CAAA,CAAE,CAAC,CAAC;YACnD,MAAM,OAAO,GAAG,mOAAI,uBAAoB,CACtC,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,YAAY,CACnC,CAAC;YACF,MAAM,OAAO;gDAAG,KAAK,EAAE,KAAY,EAAE,EAAE;oBACrC,OAAO,CAAC,KAAK,CAAC,wBAAwB,EAAE,KAAK,CAAC,CAAC;oBAC/C,SAAS,EAAE,gBAAgB,EAAE,CAAC;oBAC9B,QAAQ,CAAC,KAAK,CAAC,CAAC;gBAClB,CAAC,CAAC;;iPACF,oCAAiC,CAAC,KAAK,CACrC;gBAAE,GAAG,UAAU;YAAA,CAAE,EACjB,OAAO,EACP,OAAO,CACR,CAAC,IAAI;wCAAC,CAAC,YAAY,EAAE,EAAE;oBACtB,IAAI,eAAe,CAAC,MAAM,CAAC,OAAO,EAAE,OAAO;oBAE3C,gBAAgB,EAAE,gBAAgB,EAAE,CAAC;oBACrC,YAAY,CAAC,YAAY,CAAC,CAAC;gBAC7B,CAAC,CAAC,CAAC;;YAEH;wCAAO,GAAG,EAAE;oBACV,eAAe,CAAC,KAAK,EAAE,CAAC;oBACxB,gBAAgB,EAAE,gBAAgB,EAAE,CAAC;gBACvC,CAAC,CAAC;;QACF,uDAAuD;QACzD,CAAC;+BAAE;QAAC,UAAU;KAAC,CAAC,CAAC,CAAC,uCAAuC;sKAEzD,YAAA,AAAS;gCAAC,GAAG,EAAE;YACb,IAAI,OAAO,EAAE,aAAa,EAAE,CAAC;gBAC3B,SAAS,EAAE,gBAAgB,EAAE,CAAC;YAChC,CAAC,MAAM,CAAC;gBACN,SAAS,EAAE,gBAAgB,EAAE,CAAC;YAChC,CAAC;YAED;wCAAO,GAAG,CAAG,CAAD,QAAU,EAAE,gBAAgB,EAAE,CAAC;;QAC7C,CAAC;+BAAE;QAAC,SAAS;QAAE,OAAO,EAAE,aAAa;KAAC,CAAC,CAAC;IAExC,OAAO;QACL,KAAK;KACN,CAAC;AACJ,CAAC,CAAC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 4236, "column": 0}, "map": {"version":3,"file":"NextAuthProvider.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/nextjs/providers/NextAuthProvider.tsx"],"sourcesContent":["\"use client\";\n/**\n * A very small context provider for the user object - it takes the user object from the cookie and provides it to the app.\n */\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport {\n  resolveAuthConfig,\n  type AuthConfigWithDefaults,\n} from \"@/nextjs/config.js\";\nimport { resolveCallbackUrl } from \"@/nextjs/utils.js\";\nimport { ConfidentialClientPKCEConsumer } from \"@/services/PKCE.js\";\nimport { UserProvider } from \"@/shared/providers/UserProvider.js\";\nimport { useUserCookie } from \"@/nextjs/hooks/useUserCookie.js\";\nimport { CivicAuthConfigProvider } from \"@/shared/providers/CivicAuthConfigContext.js\";\nimport { SessionProvider } from \"@/shared/providers/SessionProvider.js\";\nimport { IframeProvider } from \"@/shared/providers/IframeProvider.js\";\nimport { TokenProvider } from \"@/shared/providers/TokenProvider.js\";\nimport { useSignIn } from \"@/shared/hooks/useSignIn.js\";\nimport { useCivicAuthConfig } from \"@/shared/hooks/useCivicAuthConfig.js\";\nimport { IFrameAndLoading } from \"@/shared/components/IFrameAndLoading.js\";\nimport { BlockDisplay } from \"@/shared/components/BlockDisplay.js\";\nimport { LoadingIcon } from \"@/shared/components/LoadingIcon.js\";\nimport { useIframe } from \"@/shared/hooks/useIframe.js\";\nimport type { AuthProviderProps } from \"@/shared/providers/types.js\";\nimport { useIsInIframe } from \"@/shared/hooks/useIsInIframe.js\";\nimport { AuthStatus, type UnknownObject, type User } from \"@/types.js\";\nimport { useRefresh } from \"@/nextjs/hooks/useRefresh.js\";\nimport { useCurrentUrl, useSession } from \"@/shared/hooks/index.js\";\nimport { BrowserCookieStorage } from \"@/shared/index.js\";\nimport { getIframeRef } from \"@/shared/lib/iframeUtils.js\";\nimport { AuthStatusProvider } from \"@/shared/providers/AuthStatusContext.js\";\nimport { useIsClient } from \"usehooks-ts\";\n\ntype CivicNextAuthTokenProviderInternalProps<TUser extends UnknownObject> =\n  NextCivicAuthProviderInternalProps & {\n    isLoading: boolean;\n    idToken?: string;\n    user: User<TUser> | null;\n    fetchUser: () => void;\n  };\ntype NextCivicAuthProviderInternalProps = Omit<\n  AuthProviderProps,\n  \"clientId\"\n> & {\n  resolvedConfig: AuthConfigWithDefaults;\n};\ntype NextCivicAuthProviderProps = Omit<\n  NextCivicAuthProviderInternalProps,\n  \"clientId\" | \"resolvedConfig\" | \"redirectUrl\"\n>;\n\nconst CivicNextAuthTokenProviderInternal = <\n  TUser extends UnknownObject = UnknownObject,\n>({\n  children,\n  displayMode = \"iframe\",\n  user,\n  fetchUser,\n  ...props\n}: CivicNextAuthTokenProviderInternalProps<TUser>) => {\n  const { iframeMode, resolvedConfig } = props;\n  const { iframeRef, setIframeIsVisible, isIframeMounted, setIframeMounted } =\n    useIframe();\n  const civicAuthConfig = useCivicAuthConfig();\n  const { challengeUrl } = resolvedConfig;\n  const pkceConsumer = new ConfidentialClientPKCEConsumer(\n    challengeUrl,\n    resolvedConfig.basePath,\n  );\n  const { data: session } = useSession();\n  const currentUrl = useCurrentUrl();\n\n  useEffect(() => {\n    if (session?.authenticated) {\n      setIframeMounted(false);\n      // the session is authenticated, so don't show the login iframe\n      setIframeIsVisible(false);\n      return;\n    }\n  }, [session?.authenticated, setIframeIsVisible, setIframeMounted]);\n\n  const postSignOut = useCallback(async () => {\n    // user is signed out, manually update the user from cookies to not wait for polling\n    fetchUser();\n    await props?.onSignOut?.();\n  }, [fetchUser, props]);\n\n  const { signIn, startSignIn, signOut, authStatus } = useSignIn({\n    postSignOut,\n    pkceConsumer,\n    displayMode,\n  });\n\n  const { error: refreshError } = useRefresh();\n\n  useEffect(() => {\n    const ref = getIframeRef(iframeRef?.current, true);\n    if (\n      isIframeMounted &&\n      civicAuthConfig &&\n      !session?.authenticated &&\n      ref &&\n      authStatus === AuthStatus.UNAUTHENTICATED &&\n      displayMode === \"iframe\" &&\n      !currentUrl?.includes(\"code=\")\n    ) {\n      startSignIn();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [\n    isIframeMounted,\n    currentUrl,\n    iframeMode,\n    iframeRef,\n    civicAuthConfig,\n    session?.authenticated,\n    authStatus,\n    startSignIn,\n    displayMode,\n  ]);\n\n  useEffect(() => {\n    if (refreshError) {\n      console.error(\"Error refreshing token, signing out...\", refreshError);\n      signOut();\n    }\n  }, [refreshError, signOut]);\n\n  // if the SDK loads in an iframe, we show the loading spinner as the iframe\n  // will be waiting to be minimized\n  const isInIframe = useIsInIframe();\n  const isClient = useIsClient();\n  return !isClient ? null : (\n    <TokenProvider>\n      <UserProvider\n        storage={new BrowserCookieStorage()}\n        user={user}\n        signOut={signOut}\n        signIn={signIn}\n        displayMode={displayMode}\n        authStatus={authStatus}\n      >\n        <IFrameAndLoading error={null} isLoading={isInIframe} />\n        {isInIframe && (\n          <BlockDisplay>\n            <LoadingIcon />\n          </BlockDisplay>\n        )}\n        {children}\n      </UserProvider>\n    </TokenProvider>\n  );\n};\n\nconst CivicNextAuthProviderInternal = ({\n  children,\n  ...props\n}: NextCivicAuthProviderInternalProps) => {\n  const { user, idToken, fetchUser, isLoading } = useUserCookie();\n\n  const session = {\n    authenticated: !!user,\n    idToken,\n  };\n\n  return (\n    <SessionProvider data={session} isLoading={isLoading}>\n      <CivicNextAuthTokenProviderInternal\n        {...props}\n        user={user}\n        idToken={idToken}\n        fetchUser={fetchUser}\n        isLoading={isLoading}\n      >\n        {children}\n      </CivicNextAuthTokenProviderInternal>\n    </SessionProvider>\n  );\n};\n\nconst CivicNextAuthProvider = ({\n  children,\n  ...props\n}: NextCivicAuthProviderProps) => {\n  const resolvedConfig = resolveAuthConfig();\n  const {\n    clientId,\n    oauthServer,\n    callbackUrl,\n    challengeUrl,\n    logoutUrl,\n    refreshUrl,\n    logoutCallbackUrl,\n  } = resolvedConfig;\n  const [redirectUrl, setRedirectUrl] = useState<string>(\"\");\n\n  useEffect(() => {\n    if (typeof globalThis.window !== \"undefined\") {\n      const appUrl = globalThis.window.location.origin;\n      setRedirectUrl(resolveCallbackUrl(resolvedConfig, appUrl));\n    }\n  }, [callbackUrl, resolvedConfig]);\n\n  return (\n    <CivicAuthConfigProvider\n      oauthServer={oauthServer}\n      clientId={clientId}\n      redirectUrl={redirectUrl}\n      logoutRedirectUrl={logoutCallbackUrl}\n      nonce={props?.nonce}\n      challengeUrl={challengeUrl}\n      refreshUrl={refreshUrl}\n      logoutUrl={logoutUrl}\n      logoutCallbackUrl={logoutCallbackUrl}\n    >\n      <AuthStatusProvider>\n        <IframeProvider iframeMode={props.iframeMode}>\n          <CivicNextAuthProviderInternal\n            {...props}\n            resolvedConfig={resolvedConfig}\n          >\n            {children}\n          </CivicNextAuthProviderInternal>\n        </IframeProvider>\n      </AuthStatusProvider>\n    </CivicAuthConfigProvider>\n  );\n};\n\nexport { CivicNextAuthProvider, type NextCivicAuthProviderProps };\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 4452, "column": 0}, "map": {"version":3,"file":"cookies.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/nextjs/cookies.ts"],"sourcesContent":["import { cookies } from \"next/headers.js\";\n\nimport type { KeySetter } from \"@/shared/lib/types.js\";\nimport { type CookieConfig } from \"@/shared/lib/types.js\";\nimport { CookieStorage } from \"@/shared/lib/storage.js\";\nimport * as session from \"@/shared/lib/session.js\";\n/**\n * Clears all authentication cookies on server. Note, this can only be called by the server\n */\nconst clearAuthCookies = async () => {\n  const cookieStorage = new NextjsCookieStorage(); // no cookie storage needed to simply clear it\n  await session.clearAuthCookies(cookieStorage);\n};\n\nclass NextjsCookieStorage extends CookieStorage {\n  constructor(public config: Partial<Record<KeySetter, CookieConfig>> = {}) {\n    super({\n      secure: true,\n      httpOnly: true,\n    });\n  }\n\n  async get(key: string): Promise<string | null> {\n    const cookieStore = await cookies();\n    return cookieStore.get(key)?.value || null;\n  }\n\n  async set(\n    key: KeySetter,\n    value: string,\n    cookieConfigOverride: Partial<CookieConfig> = {},\n  ): Promise<void> {\n    const cookieStore = await cookies();\n    const cookieSettings = this.config?.[key as KeySetter] || {\n      ...this.settings,\n    };\n    const useCookieSettings = { ...cookieSettings, ...cookieConfigOverride };\n    cookieStore.set(key, value, useCookieSettings);\n  }\n\n  async delete(key: KeySetter): Promise<void> {\n    const cookieStore = await cookies();\n    cookieStore.delete(key);\n  }\n}\n\nexport { clearAuthCookies, NextjsCookieStorage };\n"],"names":[],"mappings":";;;;AAAA,OAAO,EAAE,OAAO,EAAE,MAAM,iBAAiB,CAAC;AAG1C,OAAO,EAAqB,MAAM,uBAAuB,CAAC;AAC1D,OAAO,EAAE,aAAa,EAAE,MAAM,yBAAyB,CAAC;AACxD,OAAO,KAAK,OAAO,MAAM,yBAAyB,CAAC;;;;;AACnD;;GAEG,CACH,MAAM,gBAAgB,GAAG,KAAK,IAAI,EAAE;IAClC,MAAM,aAAa,GAAG,IAAI,mBAAmB,EAAE,CAAC,CAAC,8CAA8C;IAC/F,4NAAM,OAAO,CAAC,WAAA,AAAgB,EAAC,aAAa,CAAC,CAAC;AAChD,CAAC,CAAC;AAEF,MAAM,mBAAoB,2NAAQ,gBAAa;IAC1B,OAAA;IAAnB,YAAmB,SAAmD,CAAA,CAAE,CAAA;QACtE,KAAK,CAAC;YACJ,MAAM,EAAE,IAAI;YACZ,QAAQ,EAAE,IAAI;SACf,CAAC,CAAC;QAJc,IAAA,CAAA,MAAM,GAAN,MAAM,CAA+C;IAKxE,CAAC;IAED,KAAK,CAAC,GAAG,CAAC,GAAW,EAAA;QACnB,MAAM,WAAW,GAAG,OAAM,gJAAA,AAAO,EAAE,CAAC;QACpC,OAAO,WAAW,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,KAAK,IAAI,IAAI,CAAC;IAC7C,CAAC;IAED,KAAK,CAAC,GAAG,CACP,GAAc,EACd,KAAa,EACb,uBAA8C,CAAA,CAAE,EAAA;QAEhD,MAAM,WAAW,GAAG,6IAAM,UAAA,AAAO,EAAE,CAAC;QACpC,MAAM,cAAc,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,GAAgB,CAAC,IAAI;YACxD,GAAG,IAAI,CAAC,QAAQ;SACjB,CAAC;QACF,MAAM,iBAAiB,GAAG;YAAE,GAAG,cAAc;YAAE,GAAG,oBAAoB;QAAA,CAAE,CAAC;QACzE,WAAW,CAAC,GAAG,CAAC,GAAG,EAAE,KAAK,EAAE,iBAAiB,CAAC,CAAC;IACjD,CAAC;IAED,KAAK,CAAC,MAAM,CAAC,GAAc,EAAA;QACzB,MAAM,WAAW,GAAG,6IAAM,UAAA,AAAO,EAAE,CAAC;QACpC,WAAW,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;IAC1B,CAAC;CACF","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 4507, "column": 0}, "map": {"version":3,"file":"ServerAuthenticationResolver.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/server/ServerAuthenticationResolver.ts"],"sourcesContent":["import { GenericPublicClientPKCEProducer } from \"@/services/PKCE.js\";\nimport { OAuth2Client } from \"oslo/oauth2\";\nimport type {\n  AuthStorage,\n  Endpoints,\n  OIDCTokenResponseBody,\n  SessionData,\n} from \"@/types.js\";\nimport type { AuthConfig } from \"@/server/config.js\";\nimport {\n  clearTokens,\n  clearUser,\n  exchangeTokens,\n  getEndpointsWithOverrides,\n  retrieveTokens,\n  storeServerTokens,\n  validateOauth2Tokens,\n} from \"@/shared/lib/util.js\";\nimport type { AuthenticationResolver, PKCEProducer } from \"@/services/types.ts\";\nimport { DEFAULT_AUTH_SERVER } from \"@/constants.js\";\nimport { CodeVerifier } from \"@/shared/lib/types.js\";\nimport { loggers } from \"@/lib/logger.js\";\n\nconst logger = loggers.services.validation;\n\nexport class ServerAuthenticationResolver implements AuthenticationResolver {\n  private pkceProducer: PKCEProducer;\n  private oauth2client: OAuth2Client | undefined;\n  private endpoints: Endpoints | undefined;\n\n  private constructor(\n    readonly authConfig: AuthConfig,\n    readonly storage: AuthStorage,\n    readonly endpointOverrides?: Partial<Endpoints>,\n  ) {\n    this.pkceProducer = new GenericPublicClientPKCEProducer(storage);\n  }\n\n  /**\n   * Attempts to refresh tokens if a refresh token is available\n   * @param sessionData Current session data\n   * @returns Updated session data\n   */\n  async tryRefreshTokens(\n    sessionData: SessionData | null,\n  ): Promise<SessionData> {\n    logger.debug(\"tryRefreshTokens\", { sessionData });\n    // If there's a refresh token, attempt to refresh tokens\n    if (sessionData?.refreshToken) {\n      try {\n        // Only attempt refresh if we have necessary components\n        if (!this.oauth2client || !this.endpoints?.jwks) {\n          await this.init();\n        }\n\n        if (!this.oauth2client || !this.endpoints?.jwks) {\n          throw new Error(\n            \"Failed to initialize OAuth client for token refresh\",\n          );\n        }\n\n        // Use the oauth2client to refresh the access token\n        const tokenResponseBody =\n          await this.oauth2client.refreshAccessToken<OIDCTokenResponseBody>(\n            sessionData.refreshToken,\n          );\n\n        if (!tokenResponseBody) {\n          throw new Error(\"Failed to get token response from refresh\");\n        }\n\n        // Validate the refreshed tokens\n        await validateOauth2Tokens(\n          tokenResponseBody,\n          this.endpoints.jwks,\n          this.oauth2client,\n          this.oauthServer,\n        );\n\n        // Store the refreshed tokens\n        await storeServerTokens(this.storage, tokenResponseBody);\n\n        // Construct a refreshed session with the new tokens\n        return {\n          authenticated: true,\n          idToken: tokenResponseBody.id_token,\n          accessToken: tokenResponseBody.access_token,\n          refreshToken: tokenResponseBody.refresh_token,\n          accessTokenExpiresAt: tokenResponseBody.access_token_expires_at,\n        };\n      } catch (error) {\n        logger.warn(\"Failed to refresh tokens\", error);\n        await clearTokens(this.storage);\n        await clearUser(this.storage);\n        return { ...sessionData, authenticated: false };\n      }\n    }\n\n    // No refresh token available\n    return { ...sessionData, authenticated: false };\n  }\n\n  /**\n   * returns The session data if the session is valid, otherwise an unauthenticated session\n   * @returns {Promise<SessionData>}\n   */\n  async validateExistingSession(autoRefresh = true): Promise<SessionData> {\n    // TODO: investigate a more peformant way to validate a server session\n    // other than using JWKS and JWT verification which is what validateOauth2Tokens uses\n    const sessionData = await this.getSessionData();\n\n    // If we don't have tokens, try to refresh if we have a refresh token\n    if (!sessionData?.idToken || !sessionData.accessToken) {\n      if (autoRefresh) {\n        const refreshedSessionData = await this.tryRefreshTokens(sessionData);\n        if (refreshedSessionData.authenticated) {\n          return refreshedSessionData;\n        }\n      }\n      return { ...sessionData, authenticated: false };\n    }\n\n    // Initialize if needed\n    if (!this.endpoints?.jwks || !this.oauth2client) await this.init();\n\n    if (!this.endpoints?.jwks) {\n      throw new Error(\"JWKS endpoint not found\");\n    }\n\n    try {\n      // Validate existing tokens\n      await validateOauth2Tokens(\n        {\n          access_token: sessionData.accessToken,\n          id_token: sessionData.idToken,\n          refresh_token: sessionData.refreshToken,\n          access_token_expires_at: sessionData.accessTokenExpiresAt,\n        },\n        this.endpoints.jwks,\n        this.oauth2client!,\n        this.oauthServer,\n      );\n      return sessionData;\n    } catch (error) {\n      logger.warn(\"Error validating tokens\", { error, autoRefresh });\n      if (autoRefresh) {\n        // If token validation fails, try to refresh tokens\n        const refreshedSessionData = await this.tryRefreshTokens(sessionData);\n        if (refreshedSessionData.authenticated) {\n          return refreshedSessionData;\n        }\n      }\n      return { ...sessionData, authenticated: false };\n    }\n  }\n\n  get oauthServer(): string {\n    return this.authConfig.oauthServer || DEFAULT_AUTH_SERVER;\n  }\n\n  async init(): Promise<this> {\n    // resolve oauth config\n    this.endpoints = await getEndpointsWithOverrides(\n      this.oauthServer,\n      this.endpointOverrides,\n    );\n    this.oauth2client = new OAuth2Client(\n      this.authConfig.clientId,\n      this.endpoints.auth,\n      this.endpoints.token,\n      {\n        redirectURI: this.authConfig.redirectUrl,\n      },\n    );\n\n    return this;\n  }\n\n  async tokenExchange(\n    code: string,\n    state: string,\n  ): Promise<OIDCTokenResponseBody> {\n    if (!this.oauth2client) await this.init();\n    const codeVerifier = await this.pkceProducer.getCodeVerifier();\n    if (!codeVerifier) throw new Error(\"Code verifier not found in storage\");\n\n    // exchange auth code for tokens\n    const tokens = await exchangeTokens(\n      code,\n      state,\n      this.pkceProducer,\n      this.oauth2client!, // clean up types here to avoid the ! operator\n      this.oauthServer,\n      this.endpoints!, // clean up types here to avoid the ! operator\n    );\n\n    await storeServerTokens(this.storage, tokens);\n    // the code verifier should be single-use, so we delete it\n    await this.storage.delete(CodeVerifier.COOKIE_NAME);\n    return tokens;\n  }\n\n  async getSessionData(): Promise<SessionData | null> {\n    const storageData = await retrieveTokens(this.storage);\n\n    if (!storageData) return null;\n\n    return {\n      authenticated: !!storageData.id_token,\n      idToken: storageData.id_token,\n      accessToken: storageData.access_token,\n      refreshToken: storageData.refresh_token,\n    };\n  }\n\n  async getEndSessionEndpoint(): Promise<string | null> {\n    if (!this.endpoints) {\n      return null;\n    }\n    return this.endpoints.endsession;\n  }\n\n  static async build(\n    authConfig: AuthConfig,\n    storage: AuthStorage,\n    endpointOverrides?: Partial<Endpoints>,\n  ): Promise<AuthenticationResolver> {\n    const resolver = new ServerAuthenticationResolver(\n      authConfig,\n      storage,\n      endpointOverrides,\n    );\n    await resolver.init();\n\n    return resolver;\n  }\n}\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 4689, "column": 0}, "map": {"version":3,"file":"index.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/nextjs/index.ts"],"sourcesContent":["import { resolveAuthConfig } from \"@/nextjs/config.js\";\nimport { NextjsCookieStorage } from \"@/nextjs/cookies.js\";\nimport { ServerAuthenticationResolver } from \"@/server/ServerAuthenticationResolver.js\";\nimport type { AuthenticationResolver } from \"@/services/types.js\";\nimport { printVersion } from \"@/shared/index.js\";\nprintVersion();\nimport {\n  getTokens as getSessionTokens,\n  getUser as getSessionUser,\n} from \"@/shared/lib/session.js\";\nimport type { EmptyObject, OAuthTokens, UnknownObject, User } from \"@/types.js\";\nexport { resolveAuthConfig };\n\nexport { createCivicAuthPlugin, defaultAuthConfig } from \"@/nextjs/config.js\";\n\nconst getAuthResolver = async (): Promise<AuthenticationResolver> => {\n  const config = resolveAuthConfig();\n  const clientStorage = new NextjsCookieStorage();\n  return ServerAuthenticationResolver.build(\n    { ...config, redirectUrl: config.callbackUrl },\n    clientStorage,\n  );\n};\n\nexport const isLoggedIn = async (): Promise<boolean> => {\n  const authResolver = await getAuthResolver();\n  const existingSession = await authResolver.validateExistingSession(false);\n  return existingSession.authenticated;\n};\n\nexport const getUser = async <\n  T extends UnknownObject = EmptyObject,\n>(): Promise<User<T> | null> => {\n  const hasValidSession = await isLoggedIn();\n  if (!hasValidSession) return null;\n  const clientStorage = new NextjsCookieStorage();\n  return getSessionUser<T>(clientStorage);\n};\n\nexport const getTokens = async (): Promise<OAuthTokens | null> => {\n  const hasValidSession = await isLoggedIn();\n  if (!hasValidSession) return null;\n  const clientStorage = new NextjsCookieStorage();\n  return getSessionTokens(clientStorage);\n};\n\nexport { handler } from \"@/nextjs/routeHandler.js\";\nexport { NextjsCookieStorage } from \"@/nextjs/cookies.js\";\nexport type {\n  AuthConfig,\n  CookiesConfigObject,\n  AuthConfigWithDefaults,\n} from \"@/nextjs/config.js\";\nexport {\n  CivicNextAuthProvider as CivicAuthProvider,\n  type NextCivicAuthProviderProps as AuthProviderProps,\n} from \"@/nextjs/providers/NextAuthProvider.js\";\n"],"names":[],"mappings":";;;;;AAAA,OAAO,EAAE,iBAAiB,EAAE,MAAM,oBAAoB,CAAC;AACvD,OAAO,EAAE,mBAAmB,EAAE,MAAM,qBAAqB,CAAC;AAC1D,OAAO,EAAE,4BAA4B,EAAE,MAAM,0CAA0C,CAAC;;AAExF,OAAO,EAAE,YAAY,EAAE,MAAM,mBAAmB,CAAC;AAEjD,OAAO,EACL,SAAS,IAAI,gBAAgB,EAC7B,OAAO,IAAI,cAAc,GAC1B,MAAM,yBAAyB,CAAC;AAqCjC,OAAO,EAAE,OAAO,EAAE,MAAM,0BAA0B,CAAC;AAOnD,OAAO,EACL,qBAAqB,IAAI,iBAAiB,GAE3C,MAAM,wCAAwC,CAAC;;;;;6NAnDhD,eAAA,AAAY,EAAE,CAAC;;;;AAUf,MAAM,eAAe,GAAG,KAAK,IAAqC,EAAE;IAClE,MAAM,MAAM,OAAG,8NAAA,AAAiB,EAAE,CAAC;IACnC,MAAM,aAAa,GAAG,+MAAI,sBAAmB,EAAE,CAAC;IAChD,uOAAO,+BAA4B,CAAC,KAAK,CACvC;QAAE,GAAG,MAAM;QAAE,WAAW,EAAE,MAAM,CAAC,WAAW;IAAA,CAAE,EAC9C,aAAa,CACd,CAAC;AACJ,CAAC,CAAC;AAEK,MAAM,UAAU,GAAG,KAAK,IAAsB,EAAE;IACrD,MAAM,YAAY,GAAG,MAAM,eAAe,EAAE,CAAC;IAC7C,MAAM,eAAe,GAAG,MAAM,YAAY,CAAC,uBAAuB,CAAC,KAAK,CAAC,CAAC;IAC1E,OAAO,eAAe,CAAC,aAAa,CAAC;AACvC,CAAC,CAAC;AAEK,MAAM,OAAO,GAAG,KAAK,IAEC,EAAE;IAC7B,MAAM,eAAe,GAAG,MAAM,UAAU,EAAE,CAAC;IAC3C,IAAI,CAAC,eAAe,EAAE,OAAO,IAAI,CAAC;IAClC,MAAM,aAAa,GAAG,+MAAI,sBAAmB,EAAE,CAAC;IAChD,6NAAO,UAAA,AAAc,EAAI,aAAa,CAAC,CAAC;AAC1C,CAAC,CAAC;AAEK,MAAM,SAAS,GAAG,KAAK,IAAiC,EAAE;IAC/D,MAAM,eAAe,GAAG,MAAM,UAAU,EAAE,CAAC;IAC3C,IAAI,CAAC,eAAe,EAAE,OAAO,IAAI,CAAC;IAClC,MAAM,aAAa,GAAG,+MAAI,sBAAmB,EAAE,CAAC;IAChD,6NAAO,YAAA,AAAgB,EAAC,aAAa,CAAC,CAAC;AACzC,CAAC,CAAC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 4744, "column": 0}, "map": {"version":3,"file":"login.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/server/login.ts"],"sourcesContent":["import type { AuthStorage, OIDCTokenResponseBody } from \"@/types.js\";\nimport { DEFAULT_AUTH_SERVER, DEFAULT_SCOPES } from \"@/constants.js\";\nimport { GenericAuthenticationInitiator } from \"@/services/AuthenticationService.js\";\nimport { GenericPublicClientPKCEProducer } from \"@/services/PKCE.js\";\nimport { ServerAuthenticationResolver } from \"@/server/ServerAuthenticationResolver.js\";\nimport type { AuthConfig } from \"@/server/config.ts\";\n\n/**\n * Resolve an OAuth access code to a set of OIDC tokens\n * @param code The access code, typically from a query parameter in the redirect url\n * @param state The oauth random state string, used to distinguish between requests. Typically also passed in the redirect url\n * @param storage The place that this server uses to store session data (e.g. a cookie store)\n * @param config Oauth Server configuration\n */\nexport async function resolveOAuthAccessCode(\n  code: string,\n  state: string,\n  storage: AuthStorage,\n  config: AuthConfig,\n): Promise<OIDCTokenResponseBody> {\n  const authSessionService = await ServerAuthenticationResolver.build(\n    {\n      ...config,\n      oauthServer: config.oauthServer ?? DEFAULT_AUTH_SERVER,\n    },\n    storage,\n    config.endpointOverrides,\n  );\n\n  return authSessionService.tokenExchange(code, state);\n}\n\nexport async function isLoggedIn(storage: AuthStorage): Promise<boolean> {\n  return !!(await storage.get(\"id_token\"));\n}\n\nexport async function buildLoginUrl(\n  config: Pick<AuthConfig, \"clientId\" | \"redirectUrl\"> &\n    Partial<Pick<AuthConfig, \"oauthServer\">> & {\n      scopes?: string[];\n      state?: string;\n      nonce?: string;\n    },\n  storage: AuthStorage,\n): Promise<URL> {\n  // generate a random state if not provided\n  const state = config.state ?? Math.random().toString(36).substring(2);\n  const scopes = config.scopes ?? DEFAULT_SCOPES;\n  const pkceProducer = new GenericPublicClientPKCEProducer(storage);\n  const authInitiator = new GenericAuthenticationInitiator({\n    ...config,\n    state,\n    scopes,\n    oauthServer: config.oauthServer ?? DEFAULT_AUTH_SERVER,\n    // When retrieving the PKCE challenge on the server-side, we produce it and store it in the session\n    pkceConsumer: pkceProducer,\n  });\n\n  return authInitiator.signIn();\n}\n"],"names":[],"mappings":";;;;;AACA,OAAO,EAAE,mBAAmB,EAAE,cAAc,EAAE,MAAM,gBAAgB,CAAC;AACrE,OAAO,EAAE,8BAA8B,EAAE,MAAM,qCAAqC,CAAC;AACrF,OAAO,EAAE,+BAA+B,EAAE,MAAM,oBAAoB,CAAC;AACrE,OAAO,EAAE,4BAA4B,EAAE,MAAM,0CAA0C,CAAC;;;;;AAUjF,KAAK,UAAU,sBAAsB,CAC1C,IAAY,EACZ,KAAa,EACb,OAAoB,EACpB,MAAkB;IAElB,MAAM,kBAAkB,GAAG,sOAAM,+BAA4B,CAAC,KAAK,CACjE;QACE,GAAG,MAAM;QACT,WAAW,EAAE,MAAM,CAAC,WAAW,uMAAI,sBAAmB;KACvD,EACD,OAAO,EACP,MAAM,CAAC,iBAAiB,CACzB,CAAC;IAEF,OAAO,kBAAkB,CAAC,aAAa,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;AACvD,CAAC;AAEM,KAAK,UAAU,UAAU,CAAC,OAAoB;IACnD,OAAO,CAAC,CAAC,AAAC,MAAM,OAAO,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC;AAC3C,CAAC;AAEM,KAAK,UAAU,aAAa,CACjC,MAKG,EACH,OAAoB;IAEpB,0CAA0C;IAC1C,MAAM,KAAK,GAAG,MAAM,CAAC,KAAK,IAAI,IAAI,CAAC,MAAM,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;IACtE,MAAM,MAAM,GAAG,MAAM,CAAC,MAAM,uMAAI,iBAAc,CAAC;IAC/C,MAAM,YAAY,GAAG,8MAAI,kCAA+B,CAAC,OAAO,CAAC,CAAC;IAClE,MAAM,aAAa,GAAG,+NAAI,iCAA8B,CAAC;QACvD,GAAG,MAAM;QACT,KAAK;QACL,MAAM;QACN,WAAW,EAAE,MAAM,CAAC,WAAW,uMAAI,sBAAmB;QACtD,mGAAmG;QACnG,YAAY,EAAE,YAAY;KAC3B,CAAC,CAAC;IAEH,OAAO,aAAa,CAAC,MAAM,EAAE,CAAC;AAChC,CAAC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 4788, "column": 0}, "map": {"version":3,"file":"NextServerAuthenticationRefresherImpl.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/nextjs/NextServerAuthenticationRefresherImpl.ts"],"sourcesContent":["import { AuthenticationRefresherImpl } from \"@/shared/lib/AuthenticationRefresherImpl.js\";\nimport type { Endpoints, OIDCTokenResponseBody } from \"@/types.js\";\nimport type { AuthConfig } from \"@/server/config.js\";\nimport { storeServerTokens } from \"@/shared/lib/util.js\";\nimport type { CookieStorage } from \"@/server/index.js\";\n\nexport class NextServerAuthenticationRefresherImpl extends AuthenticationRefresherImpl {\n  override storage: CookieStorage | undefined;\n  constructor(\n    authConfig: AuthConfig,\n    storage: CookieStorage,\n    onError: (error: Error) => Promise<void>,\n    override endpointOverrides?: Partial<Endpoints>,\n  ) {\n    super(authConfig, storage, onError, endpointOverrides);\n    this.storage = storage;\n  }\n\n  override async storeTokens(\n    tokenResponseBody: OIDCTokenResponseBody,\n  ): Promise<void> {\n    if (!this.storage) throw new Error(\"No storage available\");\n    await storeServerTokens(this.storage, tokenResponseBody);\n  }\n\n  static override async build(\n    authConfig: AuthConfig,\n    storage: CookieStorage,\n    onError: (error: Error) => Promise<void>,\n    endpointOverrides?: Partial<Endpoints>,\n  ): Promise<NextServerAuthenticationRefresherImpl> {\n    const refresher = new NextServerAuthenticationRefresherImpl(\n      authConfig,\n      storage,\n      onError,\n      endpointOverrides,\n    );\n    await refresher.init();\n\n    return refresher;\n  }\n}\n"],"names":[],"mappings":";;;AAAA,OAAO,EAAE,2BAA2B,EAAE,MAAM,6CAA6C,CAAC;AAG1F,OAAO,EAAE,iBAAiB,EAAE,MAAM,sBAAsB,CAAC;;;AAGnD,MAAO,qCAAsC,+OAAQ,8BAA2B;IAMzE,kBAAA;IALF,OAAO,CAA4B;IAC5C,YACE,UAAsB,EACtB,OAAsB,EACtB,OAAwC,EAC/B,iBAAsC,CAAA;QAE/C,KAAK,CAAC,UAAU,EAAE,OAAO,EAAE,OAAO,EAAE,iBAAiB,CAAC,CAAC;QAF9C,IAAA,CAAA,iBAAiB,GAAjB,iBAAiB,CAAqB;QAG/C,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;IACzB,CAAC;IAEQ,KAAK,CAAC,WAAW,CACxB,iBAAwC,EAAA;QAExC,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,MAAM,IAAI,KAAK,CAAC,sBAAsB,CAAC,CAAC;QAC3D,yNAAM,oBAAA,AAAiB,EAAC,IAAI,CAAC,OAAO,EAAE,iBAAiB,CAAC,CAAC;IAC3D,CAAC;IAED,MAAM,CAAU,KAAK,CAAC,KAAK,CACzB,UAAsB,EACtB,OAAsB,EACtB,OAAwC,EACxC,iBAAsC,EAAA;QAEtC,MAAM,SAAS,GAAG,IAAI,qCAAqC,CACzD,UAAU,EACV,OAAO,EACP,OAAO,EACP,iBAAiB,CAClB,CAAC;QACF,MAAM,SAAS,CAAC,IAAI,EAAE,CAAC;QAEvB,OAAO,SAAS,CAAC;IACnB,CAAC;CACF","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 4819, "column": 0}, "map": {"version":3,"file":"routeHandler.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/nextjs/routeHandler.ts"],"sourcesContent":["import {\n  TOKEN_EXCHANGE_SUCCESS_TEXT,\n  TOKEN_EXCHANGE_TRIGGER_TEXT,\n} from \"@/constants.js\";\nimport { loggers } from \"@/lib/logger.js\";\nimport {\n  displayModeFromState,\n  serverTokenExchangeFromState,\n} from \"@/lib/oauth.js\";\nimport type { AuthConfig } from \"@/nextjs/config.js\";\nimport { resolveAuthConfig } from \"@/nextjs/config.js\";\nimport { clearAuthCookies, NextjsCookieStorage } from \"@/nextjs/cookies.js\";\nimport { getUser } from \"@/nextjs/index.js\";\nimport { resolveCallbackUrl } from \"@/nextjs/utils.js\";\nimport { resolveOAuthAccessCode } from \"@/server/login.js\";\nimport { GenericPublicClientPKCEProducer } from \"@/services/PKCE.js\";\nimport { CodeVerifier, OAuthTokenTypes } from \"@/shared/lib/types.js\";\nimport { GenericUserSession } from \"@/shared/lib/UserSession.js\";\nimport { clearTokens, generateOauthLogoutUrl } from \"@/shared/lib/util.js\";\nimport { revalidatePath } from \"next/cache.js\";\nimport type { NextRequest } from \"next/server.js\";\nimport { NextResponse } from \"next/server.js\";\nimport { NextServerAuthenticationRefresherImpl } from \"./NextServerAuthenticationRefresherImpl.js\";\n\nconst logger = loggers.nextjs.handlers.auth;\n\nclass AuthError extends Error {\n  constructor(\n    message: string,\n    public readonly status: number = 401,\n  ) {\n    super(message);\n    this.name = \"AuthError\";\n  }\n}\n\nconst getAppUrl = (request: NextRequest): string | null => {\n  // First check the cookie as it might have the full path with base directory\n  const cookieValue = request.cookies.get(CodeVerifier.APP_URL)?.value;\n  if (cookieValue) {\n    // The cookie might contain URL-encoded values\n    try {\n      return decodeURIComponent(cookieValue);\n    } catch (e) {\n      logger.error(\"Error decoding appUrl cookie:\", e);\n      return cookieValue;\n    }\n  }\n\n  // Fallback to query parameter\n  const queryParam = request.nextUrl.searchParams.get(\"appUrl\");\n  if (queryParam) {\n    try {\n      return decodeURIComponent(queryParam);\n    } catch (e) {\n      logger.error(\"Error decoding appUrl query param:\", e);\n      return queryParam;\n    }\n  }\n\n  return null;\n};\n\nconst getIdToken = async (config: AuthConfig): Promise<string | null> => {\n  const cookieStorage = new NextjsCookieStorage(config.cookies?.tokens ?? {});\n  return cookieStorage.get(OAuthTokenTypes.ID_TOKEN);\n};\n\n/**\n * create a code verifier and challenge for PKCE\n * saving the verifier in a cookie for later use\n * @returns {Promise<NextResponse>}\n */\nasync function handleChallenge(\n  request: NextRequest,\n  config: AuthConfig,\n): Promise<NextResponse> {\n  const cookieStorage = new NextjsCookieStorage(config.cookies?.tokens ?? {});\n  const pkceProducer = new GenericPublicClientPKCEProducer(cookieStorage);\n\n  const challenge = await pkceProducer.getCodeChallenge();\n  const appUrl = request.nextUrl.searchParams.get(\"appUrl\");\n  if (appUrl) {\n    await cookieStorage.set(CodeVerifier.APP_URL, appUrl);\n  }\n  return NextResponse.json({ status: \"success\", challenge });\n}\n\nconst getCookieStorageWithUserOverrides = (config: AuthConfig) => {\n  const resolvedConfigs = resolveAuthConfig(config);\n  return new NextjsCookieStorage({\n    ...resolvedConfigs.cookies.tokens,\n    user: resolvedConfigs.cookies.user,\n  });\n};\nasync function performTokenExchangeAndSetCookies(\n  config: AuthConfig,\n  code: string,\n  state: string,\n  appUrl: string,\n) {\n  const resolvedConfigs = resolveAuthConfig(config);\n  // TODO This is messy, better would be to fix the config.cookies type to always be <name: settings>\n  // rather than nesting the tokens-related ones *and* code-verifier inside \"tokens\"\n  // (despite code-verifier not relating directly to tokens)\n  const cookieStorage = getCookieStorageWithUserOverrides(config);\n\n  const callbackUrl = resolveCallbackUrl(resolvedConfigs, appUrl);\n  try {\n    await resolveOAuthAccessCode(code, state, cookieStorage, {\n      ...resolvedConfigs,\n      redirectUrl: callbackUrl,\n    });\n  } catch (error) {\n    logger.error(\"Token exchange failed:\", error);\n    throw new AuthError(\"Failed to authenticate user\", 401);\n  }\n\n  const user = await getUser();\n  if (!user) {\n    throw new AuthError(\"Failed to get user info\", 401);\n  }\n  const userSession = new GenericUserSession(cookieStorage);\n  await userSession.set(user);\n}\nasync function handleRefresh(\n  request: NextRequest,\n  config: AuthConfig,\n): Promise<NextResponse> {\n  const resolvedConfigs = resolveAuthConfig(config);\n  const cookieStorage = getCookieStorageWithUserOverrides(config);\n  const userSession = new GenericUserSession(cookieStorage);\n  try {\n    const onError = (error: Error) => {\n      logger.error(\"handleRefresh: Token refresh failed:\", error);\n      throw new AuthError(\"Failed to refresh tokens\", 500);\n    };\n    const refresher = await NextServerAuthenticationRefresherImpl.build(\n      {\n        clientId: resolvedConfigs.clientId,\n        oauthServer: resolvedConfigs.oauthServer,\n        redirectUrl: resolvedConfigs.callbackUrl,\n        refreshUrl: resolvedConfigs.refreshUrl,\n      },\n      cookieStorage,\n      onError,\n    );\n\n    const tokens = await refresher.refreshAccessToken();\n    const user = await getUser();\n    if (!user) {\n      throw new AuthError(\"Failed to get user info\", 401);\n    }\n    await userSession.set(user);\n    const targetUrl = request.nextUrl.searchParams.get(\"targetUrl\");\n    if (targetUrl) {\n      return NextResponse.redirect(targetUrl);\n    }\n    return NextResponse.json({ status: \"success\", tokens });\n  } catch (error) {\n    logger.error(\"handleRefresh: Token refresh failed:\", error);\n    const targetUrl = request.nextUrl.searchParams.get(\"targetUrl\");\n    if (targetUrl) {\n      logger.warn(\"clearing tokens and redirecting to targetUrl\", targetUrl);\n      await clearTokens(cookieStorage);\n      await userSession.clear();\n      return NextResponse.redirect(targetUrl);\n    }\n    return NextResponse.json({ status: \"failed\" });\n  }\n}\n\nconst generateHtmlResponseWithCallback = (\n  request: NextRequest,\n  callbackUrl: string,\n) => {\n  // we need to replace the URL with resolved config in case the server is hosted\n  // behind a reverse proxy or load balancer\n  const requestUrl = new URL(request.url);\n  const fetchUrl = `${callbackUrl}?${requestUrl.searchParams.toString()}&sameDomainCallback=true`;\n  return new NextResponse(\n    `<html lang=\"en\">\n         <body>\n             <span style=\"display:none\">\n                 <script>\n                     window.onload = function () {\n                         // Get the complete URL including origin and path\n                         // This ensures we capture any base path like /directory\n                         const appUrl = window.location.href.substring(\n                           0, \n                           window.location.href.indexOf(\"/api/auth\")\n                         );\n                         fetch('${fetchUrl}&appUrl=' + encodeURIComponent(appUrl)).then((response) => {\n                             response.json().then((jsonResponse) => {\n                                 if (jsonResponse.redirectUrl) {\n                                     window.location.href = jsonResponse.redirectUrl;\n                                 }\n                             });\n                         });\n                     };\n                 </script>\n             </span>\n         </body>\n     </html>\n    `,\n  );\n};\n\nasync function handleCallback(\n  request: NextRequest,\n  config: AuthConfig,\n): Promise<NextResponse> {\n  const resolvedConfigs = resolveAuthConfig(config);\n  const code = request.nextUrl.searchParams.get(\"code\");\n  const state = request.nextUrl.searchParams.get(\"state\");\n  if (!code || !state) throw new AuthError(\"Bad parameters\", 400);\n\n  // appUrl is passed from the client to the server in the query string\n  // this is necessary because the server does not have access to the client's window.location.origin\n  // and can not accurately determine the appUrl (specially if the app is behind a reverse proxy)\n  const appUrl = getAppUrl(request);\n\n  // If we have a code_verifier cookie and the appUrl, we can do a token exchange.\n  // Otherwise, just render an empty page.\n  // The initial redirect back from the auth server does not send cookies, because the redirect is from a 3rd-party domain.\n  // The client will make an additional call to this route with cookies included, at which point we do the token exchange.\n  const codeVerifier = request.cookies.get(CodeVerifier.COOKIE_NAME);\n\n  if (!codeVerifier || !appUrl) {\n    logger.debug(\"handleCallback no code_verifier found\", {\n      state,\n      serverTokenExchange: serverTokenExchangeFromState(`${state}`),\n    });\n    let response = new NextResponse(\n      `<html lang=\"en\"><body><span style=\"display:none\">${TOKEN_EXCHANGE_TRIGGER_TEXT}</span></body></html>`,\n    );\n\n    // in server-side token exchange mode we need to launch a page that will trigger the token exchange\n    // from the same domain, allowing it access to the code_verifier cookie\n    // we only need to do this in redirect mode, as the iframe already triggers a client-side token exchange\n    // if no code-verifier cookie is found\n    if (state && serverTokenExchangeFromState(state)) {\n      logger.debug(\n        \"handleCallback serverTokenExchangeFromState, launching redirect page...\",\n        {\n          requestUrl: request.url,\n          configCallbackUrl: resolvedConfigs.callbackUrl,\n        },\n      );\n      // generate a page that will callback to the same domain, allowing access\n      // to the code_verifier cookie and passing the appUrl.\n      response = generateHtmlResponseWithCallback(\n        request,\n        resolvedConfigs.callbackUrl,\n      );\n    }\n\n    response.headers.set(\"Content-Type\", \"text/html; charset=utf-8\");\n    logger.debug(\n      `handleCallback no code_verifier found, returning ${TOKEN_EXCHANGE_TRIGGER_TEXT}`,\n    );\n    return response;\n  }\n\n  await performTokenExchangeAndSetCookies(resolvedConfigs, code, state, appUrl);\n\n  if (request.url.includes(\"sameDomainCallback=true\")) {\n    logger.debug(\n      \"handleCallback sameDomainCallback = true, returning redirectUrl\",\n      appUrl,\n    );\n    return NextResponse.json({\n      status: \"success\",\n      redirectUrl: appUrl,\n    });\n  }\n\n  // this is the case where a 'normal' redirect is happening\n  if (serverTokenExchangeFromState(state)) {\n    logger.debug(\n      \"handleCallback serverTokenExchangeFromState, redirect to appUrl\",\n      appUrl,\n    );\n    if (!appUrl) {\n      throw new Error(\"appUrl undefined. Cannot redirect.\");\n    }\n    return NextResponse.redirect(`${appUrl}`);\n  }\n  // return an empty HTML response so the iframe doesn't show any response\n  // in the short moment between the redirect and the parent window\n  // acknowledging the redirect and closing the iframe\n  const response = new NextResponse(\n    `<html lang=\"en\"><span style=\"display:none\">${TOKEN_EXCHANGE_SUCCESS_TEXT}</span></html>`,\n  );\n  response.headers.set(\"Content-Type\", \"text/html; charset=utf-8\");\n  return response;\n}\n\n/**\n * If redirectPath is an absolute path, return it as-is.\n * Otherwise for relative paths, append it to the current domain.\n * @param redirectPath\n * @param currentBasePath\n * @returns\n */\nconst getAbsoluteRedirectPath = (\n  redirectPath: string,\n  currentBasePath: string,\n) => new URL(redirectPath, currentBasePath).href;\n\nconst getPostLogoutRedirectUrl = (\n  request: NextRequest,\n  config: AuthConfig,\n): string | null => {\n  const { loginUrl } = resolveAuthConfig(config);\n  const redirectTarget = loginUrl ?? \"/\";\n\n  // if the optional loginUrl is provided and it is an absolute URL,\n  // use it as the redirect target\n  const isAbsoluteRedirect = /^(https?:\\/\\/|www\\.).+/i.test(redirectTarget);\n  if (isAbsoluteRedirect) {\n    return redirectTarget;\n  }\n\n  // if loginUrl is not defined, the appUrl is passed from the client to the server\n  // in the query string or cookies. This is necessary because the server does not\n  // have access to the client's window.location and can not accurately determine\n  // the appUrl (specially if the app is behind a reverse proxy).\n  const appUrl = getAppUrl(request);\n  if (appUrl) return getAbsoluteRedirectPath(redirectTarget, appUrl);\n\n  return null;\n};\n\nconst revalidateUrlPath = async (url: string) => {\n  try {\n    const path = new URL(url).pathname;\n    revalidatePath(path);\n  } catch (error) {\n    logger.warn(\"Failed to revalidate path after logout:\", error);\n  }\n};\n\nexport async function handleLogout(\n  request: NextRequest,\n  config: AuthConfig,\n): Promise<NextResponse> {\n  const resolvedConfigs = resolveAuthConfig(config);\n\n  // Ensure we have the proper app URL including any base path\n  const appBaseUrl = getAppUrl(request) || request.url;\n\n  // Construct the post-logout URL with the base path included\n  const postLogoutUrl = new URL(resolvedConfigs.logoutCallbackUrl, appBaseUrl);\n\n  // read the id_token from the cookies\n  const idToken = await getIdToken(resolvedConfigs);\n\n  // read the state from the query parameters\n  const state = request.nextUrl.searchParams.get(\"state\");\n\n  if (!state || !idToken) {\n    logger.error(\"handleLogout: missing state or idToken\", { state, idToken });\n    // if token or state is missing, the logout call to the server will fail,\n    // (token has potentially expired already) so go straight to the postLogoutUrl\n    //  so the user can be signed out.\n    return NextResponse.redirect(\n      `${postLogoutUrl}${state ? \"?state=\" + state : \"\"}`,\n    );\n  }\n\n  const logoutUrl = await generateOauthLogoutUrl({\n    clientId: resolvedConfigs.clientId,\n    idToken,\n    state,\n    redirectUrl: postLogoutUrl.href,\n    oauthServer: resolvedConfigs.oauthServer,\n  });\n\n  return NextResponse.redirect(`${logoutUrl.href}`);\n}\n\nexport async function handleLogoutCallback(\n  request: NextRequest,\n  config: AuthConfig,\n): Promise<NextResponse> {\n  const resolvedConfigs = resolveAuthConfig(config);\n\n  const state = request.nextUrl.searchParams.get(\"state\") || \"\";\n  const displayMode = displayModeFromState(state, \"iframe\");\n\n  const canAccessCookies = !!(await getIdToken(resolvedConfigs));\n  const isSameDomainCallback = request.url.includes(\"sameDomainCallback=true\");\n\n  if (canAccessCookies || isSameDomainCallback) {\n    await clearAuthCookies();\n  }\n\n  let response;\n\n  // handle logout for iframe display mode\n  if (displayMode === \"iframe\") {\n    // try to read the token from cookies. If cookies cant be read/written\n    // because the request cames from a cross-origin redirect,\n    // we need to show a page that will trigger the logout from the same domain\n    if (canAccessCookies || isSameDomainCallback) {\n      // just return success\n      return NextResponse.json({ status: \"success\" });\n    }\n\n    // return a page that will trigger the logout from the same domain\n    response = generateHtmlResponseWithCallback(\n      request,\n      resolvedConfigs.logoutCallbackUrl,\n    );\n    response.headers.set(\"Content-Type\", \"text/html; charset=utf-8\");\n    return response;\n  }\n\n  // handle logout for non-iframe display mode\n  const redirectUrl = getPostLogoutRedirectUrl(request, resolvedConfigs);\n\n  if (redirectUrl && (canAccessCookies || isSameDomainCallback)) {\n    // just redirect to the app url\n    response = NextResponse.redirect(`${redirectUrl}`);\n    revalidateUrlPath(redirectUrl);\n  } else {\n    logger.debug(\"handleLogout no redirectUrl found\", { state });\n    response = generateHtmlResponseWithCallback(\n      request,\n      resolvedConfigs.logoutCallbackUrl,\n    );\n    response.headers.set(\"Content-Type\", \"text/html; charset=utf-8\");\n  }\n\n  return response;\n}\n\n/**\n * Creates an authentication handler for Next.js API routes\n *\n * Usage:\n * ```ts\n * // app/api/auth/[...civicauth]/route.ts\n * import { handler } from '@civic/auth/nextjs'\n * export const GET = handler({\n *   // optional config overrides\n * })\n * ```\n */\nexport const handler =\n  (authConfig = {}) =>\n  async (request: NextRequest): Promise<NextResponse> => {\n    const config = resolveAuthConfig(authConfig);\n\n    try {\n      const pathname = request.nextUrl.pathname;\n      const pathSegments = pathname.split(\"/\");\n      const lastSegment = pathSegments[pathSegments.length - 1];\n\n      switch (lastSegment) {\n        case \"challenge\":\n          return await handleChallenge(request, config);\n        case \"callback\":\n          return await handleCallback(request, config);\n        case \"refresh\":\n          return await handleRefresh(request, config);\n        case \"logout\":\n          return await handleLogout(request, config);\n        case \"logoutcallback\":\n          return await handleLogoutCallback(request, config);\n        default:\n          throw new AuthError(`Invalid auth route: ${pathname}`, 404);\n      }\n    } catch (error) {\n      logger.error(\"Auth handler error:\", error);\n\n      const status = error instanceof AuthError ? error.status : 500;\n      const message =\n        error instanceof Error ? error.message : \"Authentication failed\";\n\n      const response = NextResponse.json({ error: message }, { status });\n\n      await clearAuthCookies();\n      return response;\n    }\n  };\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 5238, "column": 0}, "map": {"version":3,"file":"useUser.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/reactjs/hooks/useUser.ts"],"sourcesContent":["\"use client\";\nimport { useContext } from \"react\";\nimport {\n  UserContext,\n  type UserContextType,\n} from \"@/shared/providers/UserProvider.js\";\n\nconst useUser = <\n  T extends Record<string, unknown> = Record<string, never>,\n>(): UserContextType<T> => {\n  const context = useContext(UserContext);\n\n  if (!context) {\n    throw new Error(\"useUser must be used within a UserProvider\");\n  }\n\n  return context as UserContextType<T>;\n};\n\nexport { useUser };\n"],"names":[],"mappings":";;;AACA,OAAO,EAAE,UAAU,EAAE,MAAM,OAAO,CAAC;AACnC,OAAO,EACL,WAAW,GAEZ,MAAM,oCAAoC,CAAC;AAL5C,YAAY,CAAC;;;AAOb,MAAM,OAAO,GAAG,GAEQ,EAAE;IACxB,MAAM,OAAO,qKAAG,aAAA,AAAU,+NAAC,cAAW,CAAC,CAAC;IAExC,IAAI,CAAC,OAAO,EAAE,CAAC;QACb,MAAM,IAAI,KAAK,CAAC,4CAA4C,CAAC,CAAC;IAChE,CAAC;IAED,OAAO,OAA6B,CAAC;AACvC,CAAC,CAAC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 5261, "column": 0}, "map": {"version":3,"file":"index.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/reactjs/hooks/index.ts"],"sourcesContent":["export { useUser } from \"@/reactjs/hooks/useUser.js\";\nexport { useToken } from \"@/shared/hooks/useToken.js\";\n"],"names":[],"mappings":";AAAA,OAAO,EAAE,OAAO,EAAE,MAAM,4BAA4B,CAAC;AACrD,OAAO,EAAE,QAAQ,EAAE,MAAM,4BAA4B,CAAC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 5282, "column": 0}, "map": {"version":3,"file":"AuthProvider.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/reactjs/providers/AuthProvider.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport { type SessionData } from \"@/types.js\";\nimport { AuthContext } from \"@/shared/providers/AuthContext.js\";\nimport type { PKCEConsumer } from \"@/services/types.js\";\nimport { useSignIn } from \"@/shared/hooks/useSignIn.js\";\nimport { useCivicAuthConfig } from \"@/shared/hooks/useCivicAuthConfig.js\";\nimport { useSession } from \"@/shared/hooks/useSession.js\";\nimport { IFrameAndLoading } from \"@/shared/components/IFrameAndLoading.js\";\nimport type { AuthProviderProps } from \"@/shared/providers/types.js\";\nimport { useIsInIframe } from \"@/shared/hooks/useIsInIframe.js\";\nimport { useRefresh } from \"@/shared/hooks/useRefresh.js\";\n\n// Global this object setup\nlet globalThisObject;\nif (typeof window !== \"undefined\") {\n  globalThisObject = window;\n} else if (typeof global !== \"undefined\") {\n  globalThisObject = global;\n} else {\n  globalThisObject = Function(\"return this\")();\n}\nglobalThisObject.globalThis = globalThisObject;\n\nexport type InternalAuthProviderProps = AuthProviderProps & {\n  sessionData?: SessionData;\n  pkceConsumer?: PKCEConsumer;\n};\n\nconst AuthProvider = ({\n  children,\n  onSignIn,\n  onSignOut,\n  pkceConsumer,\n  displayMode = \"iframe\",\n}: InternalAuthProviderProps) => {\n  const authConfig = useCivicAuthConfig();\n  const { signIn, signOut, authStatus } = useSignIn({\n    preSignOut: onSignOut,\n    pkceConsumer,\n    displayMode,\n  });\n\n  const [localSessionData, setLocalSessionData] =\n    useState<SessionData | null>();\n\n  const {\n    data: session,\n    error: tokenExchangeError,\n    isLoading: tokenExchangeInProgress,\n  } = useSession();\n\n  useEffect(() => {\n    if (session) {\n      setLocalSessionData(session);\n      if (session.authenticated) {\n        onSignIn?.();\n      }\n    }\n  }, [onSignIn, session]);\n\n  const isAuthenticated = useMemo(() => {\n    return !!localSessionData?.idToken;\n  }, [localSessionData]);\n\n  // The startSignIn functionality has been moved to ClientTokenExchangeSessionProvider\n  // to prevent race conditions with validateExistingSession\n\n  const isInIframe = useIsInIframe();\n  // if the SDK loads in an iframe, we show the loading spinner until we know the auth state\n  // but don't keep showing it indefinitely if it's just the isInIframe status\n  const isLoading =\n    tokenExchangeInProgress ||\n    !authConfig ||\n    (isInIframe && !localSessionData?.authenticated);\n\n  const { error: refreshError } = useRefresh(session);\n\n  useEffect(() => {\n    if (refreshError) {\n      console.error(\"Error refreshing token, signingOut...\", refreshError);\n      signOut();\n    }\n  }, [refreshError, signOut]);\n\n  const value = useMemo(\n    () => ({\n      isLoading,\n      error: tokenExchangeError as Error | null,\n      signOut,\n      authStatus,\n      isAuthenticated,\n      signIn,\n      displayMode,\n    }),\n    [\n      isLoading,\n      tokenExchangeError,\n      signOut,\n      authStatus,\n      isAuthenticated,\n      signIn,\n      displayMode,\n    ],\n  );\n\n  return (\n    <AuthContext.Provider value={value}>\n      <IFrameAndLoading error={tokenExchangeError} isLoading={isLoading} />\n      {children}\n    </AuthContext.Provider>\n  );\n};\n\nexport { AuthProvider };\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 5401, "column": 0}, "map": {"version":3,"file":"CivicAuthProvider.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/reactjs/providers/CivicAuthProvider.tsx"],"sourcesContent":["\"use client\";\nimport React from \"react\";\nimport { AuthProvider } from \"@/reactjs/providers/AuthProvider.js\";\nimport { BrowserPublicClientPKCEProducer } from \"@/services/PKCE.js\";\nimport { UserProvider } from \"@/shared/providers/UserProvider.js\";\nimport { LocalStorageAdapter } from \"@/browser/storage.js\";\nimport { CivicAuthConfigProvider } from \"@/shared/providers/CivicAuthConfigContext.js\";\nimport { IframeProvider } from \"@/shared/providers/IframeProvider.js\";\nimport { ClientTokenExchangeSessionProvider } from \"@/reactjs/providers/ClientTokenExchangeSessionProvider.js\";\nimport { SessionProvider } from \"@/shared/providers/SessionProvider.js\";\nimport { useClientTokenExchangeSession } from \"@/reactjs/hooks/useClientTokenExchangeSession.js\";\nimport { TokenProvider } from \"@/shared/providers/TokenProvider.js\";\nimport { useAuth } from \"@/shared/hooks/useAuth.js\";\nimport type { AuthProviderProps } from \"@/shared/providers/types.js\";\nimport { AuthStatusProvider } from \"@/shared/providers/AuthStatusContext.js\";\n\ntype CivicAuthProviderProps = Omit<AuthProviderProps, \"pkceConsumer\">;\n\nconst WrapperUserProvider = ({ children }: { children: React.ReactNode }) => {\n  const { signIn, signOut, displayMode, authStatus } = useAuth();\n  return (\n    <UserProvider\n      storage={new LocalStorageAdapter()}\n      signIn={signIn}\n      signOut={signOut}\n      user={null}\n      authStatus={authStatus}\n      displayMode={displayMode}\n    >\n      {children}\n    </UserProvider>\n  );\n};\nconst WrapperSessionAuthProvider = ({\n  children,\n  ...props\n}: CivicAuthProviderProps) => {\n  const sessionData = useClientTokenExchangeSession();\n  return (\n    <SessionProvider {...sessionData}>\n      <AuthProvider\n        {...props}\n        pkceConsumer={new BrowserPublicClientPKCEProducer()}\n      >\n        <TokenProvider>\n          <WrapperUserProvider>{children}</WrapperUserProvider>\n        </TokenProvider>\n      </AuthProvider>\n    </SessionProvider>\n  );\n};\nconst CivicAuthProvider = ({ children, ...props }: CivicAuthProviderProps) => {\n  return (\n    <CivicAuthConfigProvider\n      oauthServer={props?.config?.oauthServer}\n      clientId={props?.clientId}\n      redirectUrl={props?.redirectUrl}\n      nonce={props?.nonce}\n      logoutRedirectUrl={props?.logoutRedirectUrl}\n      displayMode={props?.displayMode}\n    >\n      <AuthStatusProvider>\n        <IframeProvider iframeMode={props.iframeMode}>\n          <ClientTokenExchangeSessionProvider>\n            <WrapperSessionAuthProvider {...props}>\n              {children}\n            </WrapperSessionAuthProvider>\n          </ClientTokenExchangeSessionProvider>\n        </IframeProvider>\n      </AuthStatusProvider>\n    </CivicAuthConfigProvider>\n  );\n};\n\nexport { CivicAuthProvider, type CivicAuthProviderProps };\n"],"names":[],"mappings":";;;;AACA,OAAO,KAAK,MAAM,OAAO,CAAC;AAC1B,OAAO,EAAE,YAAY,EAAE,MAAM,qCAAqC,CAAC;AACnE,OAAO,EAAE,+BAA+B,EAAE,MAAM,oBAAoB,CAAC;AACrE,OAAO,EAAE,YAAY,EAAE,MAAM,oCAAoC,CAAC;AAClE,OAAO,EAAE,mBAAmB,EAAE,MAAM,sBAAsB,CAAC;AAC3D,OAAO,EAAE,uBAAuB,EAAE,MAAM,8CAA8C,CAAC;AACvF,OAAO,EAAE,cAAc,EAAE,MAAM,sCAAsC,CAAC;AACtE,OAAO,EAAE,kCAAkC,EAAE,MAAM,2DAA2D,CAAC;AAC/G,OAAO,EAAE,eAAe,EAAE,MAAM,uCAAuC,CAAC;AACxE,OAAO,EAAE,6BAA6B,EAAE,MAAM,kDAAkD,CAAC;AACjG,OAAO,EAAE,aAAa,EAAE,MAAM,qCAAqC,CAAC;AACpE,OAAO,EAAE,OAAO,EAAE,MAAM,2BAA2B,CAAC;AAEpD,OAAO,EAAE,kBAAkB,EAAE,MAAM,yCAAyC,CAAC;AAd7E,YAAY,CAAC;;;;;;;;;;;;;;;AAkBb,MAAM,mBAAmB,GAAG,CAAC,EAAE,QAAQ,EAAiC,EAAE,EAAE;IAC1E,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,WAAW,EAAE,UAAU,EAAE,2NAAG,UAAA,AAAO,EAAE,CAAC;IAC/D,OAAO,2OACL,MAAA,8NAAC,gBAAY,EAAA;QACX,OAAO,EAAE,gNAAI,sBAAmB,EAAE;QAClC,MAAM,EAAE,MAAM;QACd,OAAO,EAAE,OAAO;QAChB,IAAI,EAAE,IAAI;QACV,UAAU,EAAE,UAAU;QACtB,WAAW,EAAE,WAAW;QAAA,UAEvB,QAAQ;IAAA,EACI,CAChB,CAAC;AACJ,CAAC,CAAC;AACF,MAAM,0BAA0B,GAAG,CAAC,EAClC,QAAQ,EACR,GAAG,KAAK,EACe,EAAE,EAAE;IAC3B,MAAM,WAAW,GAAG,+QAAA,AAA6B,EAAE,CAAC;IACpD,OAAO,2OACL,MAAA,kOAAC,kBAAe,EAAA;QAAA,GAAK,WAAW;QAAA,qPAC9B,MAAA,gOAAC,eAAY,EAAA;YAAA,GACP,KAAK;YACT,YAAY,EAAE,8MAAI,kCAA+B,EAAE;YAAA,qPAEnD,MAAA,gOAAC,gBAAa,EAAA;gBAAA,qPACZ,MAAA,EAAC,mBAAmB,EAAA;oBAAA,UAAE,QAAQ;gBAAA,EAAuB;YAAA,EACvC;QAAA,EACH;IAAA,EACC,CACnB,CAAC;AACJ,CAAC,CAAC;AACF,MAAM,iBAAiB,GAAG,CAAC,EAAE,QAAQ,EAAE,GAAG,KAAK,EAA0B,EAAE,EAAE;IAC3E,OAAO,2OACL,MAAA,yOAAC,0BAAuB,EAAA;QACtB,WAAW,EAAE,KAAK,EAAE,MAAM,EAAE,WAAW;QACvC,QAAQ,EAAE,KAAK,EAAE,QAAQ;QACzB,WAAW,EAAE,KAAK,EAAE,WAAW;QAC/B,KAAK,EAAE,KAAK,EAAE,KAAK;QACnB,iBAAiB,EAAE,KAAK,EAAE,iBAAiB;QAC3C,WAAW,EAAE,KAAK,EAAE,WAAW;QAAA,qPAE/B,MAAA,mOAAC,sBAAkB,EAAA;YAAA,qPACjB,MAAA,iOAAC,iBAAc,EAAA;gBAAC,UAAU,EAAE,KAAK,CAAC,UAAU;gBAAA,qPAC1C,MAAA,sPAAC,qCAAkC,EAAA;oBAAA,qPACjC,MAAA,EAAC,0BAA0B,EAAA;wBAAA,GAAK,KAAK;wBAAA,UAClC,QAAQ;oBAAA,EACkB;gBAAA,EACM;YAAA,EACtB;QAAA,EACE;IAAA,EACG,CAC3B,CAAC;AACJ,CAAC,CAAC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 5489, "column": 0}, "map": {"version":3,"file":"index.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/reactjs/providers/index.ts"],"sourcesContent":["export {\n  UserProvider,\n  UserContext,\n  type UserContextType,\n} from \"@/shared/providers/UserProvider.js\";\n\nexport {\n  TokenProvider,\n  TokenContext,\n  type TokenContextType,\n} from \"@/shared/providers/TokenProvider.js\";\n\nexport { AuthProvider } from \"@/reactjs/providers/AuthProvider.js\";\n\nexport {\n  SessionProvider,\n  SessionContext,\n  type SessionContextType,\n} from \"@/shared/providers/SessionProvider.js\";\n\nexport {\n  CivicAuthProvider,\n  type CivicAuthProviderProps,\n} from \"@/reactjs/providers/CivicAuthProvider.js\";\n\nexport { AuthContext } from \"@/shared/providers/AuthContext.js\";\nexport type { AuthContextType } from \"@/shared/providers/AuthContext.js\";\n"],"names":[],"mappings":";AAAA,OAAO,EACL,YAAY,EACZ,WAAW,GAEZ,MAAM,oCAAoC,CAAC;AAE5C,OAAO,EACL,aAAa,EACb,YAAY,GAEb,MAAM,qCAAqC,CAAC;AAE7C,OAAO,EAAE,YAAY,EAAE,MAAM,qCAAqC,CAAC;AAEnE,OAAO,EACL,eAAe,EACf,cAAc,GAEf,MAAM,uCAAuC,CAAC;AAE/C,OAAO,EACL,iBAAiB,GAElB,MAAM,0CAA0C,CAAC;AAElD,OAAO,EAAE,WAAW,EAAE,MAAM,mCAAmC,CAAC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 5522, "column": 0}, "map": {"version":3,"file":"utils.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/reactjs/components/utils.ts"],"sourcesContent":["import { AuthStatus, type DisplayMode } from \"@/types.js\";\n\n/**\n * decide whether to show the loader based on the auth status and display mode\n * if the display mode is new_tab, the loader should not be shown\n * if the auth status is authenticating, the loader should be shown if the user\n * has started an action\n * @param {AuthStatus} authStatus\n * @param {DisplayMode} displayMode\n * @param {boolean} userActionStarted\n * @returns {boolean}\n */\nexport const shouldShowLoader = (\n  authStatus: AuthStatus,\n  displayMode: DisplayMode,\n  userActionStarted?: boolean,\n) => {\n  if (displayMode === \"new_tab\") {\n    return false;\n  }\n  if (authStatus === AuthStatus.AUTHENTICATING) {\n    if (displayMode === \"iframe\") {\n      return userActionStarted;\n    }\n    return true;\n  }\n  if (authStatus === AuthStatus.SIGNING_OUT) {\n    return true;\n  }\n  return false;\n};\n"],"names":[],"mappings":";;;AAAA,OAAO,EAAE,UAAU,EAAoB,MAAM,YAAY,CAAC;;AAYnD,MAAM,gBAAgB,GAAG,CAC9B,UAAsB,EACtB,WAAwB,EACxB,iBAA2B,EAC3B,EAAE;IACF,IAAI,WAAW,KAAK,SAAS,EAAE,CAAC;QAC9B,OAAO,KAAK,CAAC;IACf,CAAC;IACD,IAAI,UAAU,oMAAK,aAAU,CAAC,cAAc,EAAE,CAAC;QAC7C,IAAI,WAAW,KAAK,QAAQ,EAAE,CAAC;YAC7B,OAAO,iBAAiB,CAAC;QAC3B,CAAC;QACD,OAAO,IAAI,CAAC;IACd,CAAC;IACD,IAAI,UAAU,oMAAK,aAAU,CAAC,WAAW,EAAE,CAAC;QAC1C,OAAO,IAAI,CAAC;IACd,CAAC;IACD,OAAO,KAAK,CAAC;AACf,CAAC,CAAC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 5548, "column": 0}, "map": {"version":3,"file":"ButtonContentOrLoader.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/reactjs/components/ButtonContentOrLoader.tsx"],"sourcesContent":["\"use client\";\nimport React from \"react\";\nimport { LoadingIcon } from \"@/shared/components/LoadingIcon.js\";\nimport type { AuthStatus, DisplayMode } from \"@/types.js\";\nimport { shouldShowLoader } from \"./utils.js\";\nimport { useIframe } from \"@/shared/hooks/useIframe.js\";\n\n/**\n * show the loader if the user action has started and the iframe has not been aborted\n * @param {AuthStatus} options.authStatus\n * @param {DisplayMode} options.displayMode\n * @param {boolean} options.userActionStarted\n * @param options.children\n * @returns\n */\nexport const ButtonContentOrLoader = ({\n  authStatus,\n  displayMode,\n  userActionStarted,\n  children,\n}: {\n  authStatus: AuthStatus;\n  displayMode: DisplayMode;\n  userActionStarted?: boolean;\n  children: React.ReactNode;\n}) => {\n  const { iframeAborted } = useIframe();\n  const showLoader = shouldShowLoader(\n    authStatus,\n    displayMode,\n    userActionStarted && !iframeAborted,\n  );\n  return (\n    <div\n      css={{\n        position: \"relative\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n      }}\n    >\n      <span\n        css={{\n          visibility: showLoader ? \"hidden\" : \"visible\",\n          whiteSpace: \"nowrap\",\n        }}\n      >\n        {children}\n      </span>\n      {showLoader ? (\n        <span\n          css={{\n            position: \"absolute\",\n            display: \"flex\",\n            justifyContent: \"center\",\n            alignItems: \"center\",\n            top: 0,\n            left: 0,\n            right: 0,\n            bottom: 0,\n          }}\n        >\n          <LoadingIcon width=\"1.5em\" height=\"1.5em\" />\n        </span>\n      ) : null}\n    </div>\n  );\n};\n"],"names":[],"mappings":";;;;AACA,OAAO,KAAK,MAAM,OAAO,CAAC;AAC1B,OAAO,EAAE,WAAW,EAAE,MAAM,oCAAoC,CAAC;AAEjE,OAAO,EAAE,gBAAgB,EAAE,MAAM,YAAY,CAAC;AAC9C,OAAO,EAAE,SAAS,EAAE,MAAM,6BAA6B,CAAC;AALxD,YAAY,CAAC;;;;;;AAeN,MAAM,qBAAqB,GAAG,CAAC,EACpC,UAAU,EACV,WAAW,EACX,iBAAiB,EACjB,QAAQ,EAMT,EAAE,EAAE;IACH,MAAM,EAAE,aAAa,EAAE,GAAG,sOAAA,AAAS,EAAE,CAAC;IACtC,MAAM,UAAU,+NAAG,mBAAgB,AAAhB,EACjB,UAAU,EACV,WAAW,EACX,iBAAiB,IAAI,CAAC,aAAa,CACpC,CAAC;IACF,OAAO,2OACL,OAAA,EAAA,OAAA;QACE,GAAG,EAAE;YACH,QAAQ,EAAE,UAAU;YACpB,OAAO,EAAE,MAAM;YACf,UAAU,EAAE,QAAQ;YACpB,cAAc,EAAE,QAAQ;SACzB;QAAA,UAAA;uPAED,MAAA,EAAA,QAAA;gBACE,GAAG,EAAE;oBACH,UAAU,EAAE,UAAU,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,SAAS;oBAC7C,UAAU,EAAE,QAAQ;iBACrB;gBAAA,UAEA,QAAQ;YAAA,EACJ;YACN,UAAU,CAAC,CAAC,CAAC,CACZ,gPAAA,EAAA,QAAA;gBACE,GAAG,EAAE;oBACH,QAAQ,EAAE,UAAU;oBACpB,OAAO,EAAE,MAAM;oBACf,cAAc,EAAE,QAAQ;oBACxB,UAAU,EAAE,QAAQ;oBACpB,GAAG,EAAE,CAAC;oBACN,IAAI,EAAE,CAAC;oBACP,KAAK,EAAE,CAAC;oBACR,MAAM,EAAE,CAAC;iBACV;gBAAA,qPAED,MAAA,+NAAC,cAAW,EAAA;oBAAC,KAAK,EAAC,OAAO;oBAAC,MAAM,EAAC,OAAO;gBAAA,EAAG;YAAA,EACvC,CACR,CAAC,CAAC,AAAC,IAAI;SAAA;IAAA,EACJ,CACP,CAAC;AACJ,CAAC,CAAC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 5605, "column": 0}, "map": {"version":3,"file":"UserButton.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/reactjs/components/UserButton.tsx"],"sourcesContent":["\"use client\";\nimport { useUser } from \"@/reactjs/hooks/index.js\";\nimport React, {\n  useCallback,\n  useEffect,\n  useRef,\n  useState,\n  type CSSProperties,\n} from \"react\";\nimport { ButtonContentOrLoader } from \"./ButtonContentOrLoader.js\";\nimport { AuthStatus } from \"@/types.js\";\nimport { shouldShowLoader } from \"./utils.js\";\n\nconst ChevronDown = () => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"24\"\n    height=\"24\"\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth=\"2\"\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"lucide lucide-chevron-down\"\n  >\n    <path d=\"m6 9 6 6 6-6\" />\n  </svg>\n);\n\nconst ChevronUp = () => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"24\"\n    height=\"24\"\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth=\"2\"\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"lucide lucide-chevron-up\"\n  >\n    <path d=\"m18 15-6-6-6 6\" />\n  </svg>\n);\n\nconst UserButton = ({\n  className,\n  wrapperClassName,\n  style,\n  wrapperStyle,\n}: {\n  className?: string;\n  wrapperClassName?: string;\n  style?: CSSProperties;\n  wrapperStyle?: CSSProperties;\n}) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [buttonWidth, setButtonWidth] = useState<number | null>(null);\n  const { user, signIn, signOut, authStatus, displayMode } = useUser();\n  const buttonRef = useRef<HTMLButtonElement>(null);\n  const dropdownRef = useRef<HTMLDivElement>(null);\n  const [userActionStarted, setUserActionStarted] = useState(false);\n\n  useEffect(() => {\n    if (\n      [AuthStatus.AUTHENTICATED, AuthStatus.UNAUTHENTICATED].includes(\n        authStatus,\n      )\n    ) {\n      setUserActionStarted(false);\n    }\n  }, [authStatus]);\n\n  useEffect(() => {\n    if (buttonRef.current) {\n      setButtonWidth(buttonRef.current.offsetWidth);\n    }\n  }, [isOpen]);\n\n  const handleClickOutside = useCallback((event: MouseEvent) => {\n    const target = event.target as HTMLElement;\n\n    if (\n      buttonRef.current &&\n      dropdownRef.current &&\n      !buttonRef.current.contains(target) &&\n      !dropdownRef.current.contains(target)\n    ) {\n      setIsOpen(false);\n    }\n  }, []);\n\n  const handleSignOut = useCallback(async () => {\n    setIsOpen(false);\n    await signOut();\n  }, [signOut]);\n\n  const handleSignIn = useCallback(async () => {\n    setIsOpen(false);\n    await signIn();\n  }, [signIn]);\n\n  const handleEscape = useCallback((event: KeyboardEvent) => {\n    if (event.key === \"Escape\") {\n      setIsOpen(false);\n    }\n  }, []);\n\n  useEffect(() => {\n    if (isOpen) {\n      window.addEventListener(\"click\", handleClickOutside);\n\n      window.addEventListener(\"keydown\", handleEscape);\n    }\n\n    return () => {\n      window.removeEventListener(\"click\", handleClickOutside);\n\n      window.removeEventListener(\"keydown\", handleEscape);\n    };\n  }, [handleClickOutside, handleEscape, isOpen]);\n\n  if (user) {\n    return (\n      <div\n        css={{ position: \"relative\", width: \"auto\" }}\n        className={wrapperClassName}\n        style={wrapperStyle}\n        id=\"civic-dropdown-container\"\n      >\n        <button\n          ref={buttonRef}\n          css={{\n            cursor: \"pointer\",\n            display: \"flex\",\n            minWidth: \"10rem\",\n            alignItems: \"center\",\n            justifyContent: \"space-between\",\n            gap: \"0.5rem\",\n            borderRadius: \"9999px\",\n            border: \"1px solid #6b7280\",\n            padding: \"0.75rem 1rem\",\n            color: \"#6b7280\",\n            transition: \"background-color 0.2s\",\n            \"&:hover\": {\n              backgroundColor: \"#f3f4f6\",\n            },\n          }}\n          className={className}\n          style={style}\n          onClick={() => {\n            setUserActionStarted(true);\n            authStatus !== AuthStatus.SIGNING_OUT &&\n              setIsOpen((isOpen) => !isOpen);\n          }}\n        >\n          <>\n            {user?.picture ? (\n              <span\n                css={{\n                  position: \"relative\",\n                  display: \"flex\",\n                  height: \"1.5rem\",\n                  width: \"1.5rem\",\n                  flexShrink: 0,\n                  gap: \"0.5rem\",\n                  overflow: \"hidden\",\n                  borderRadius: \"9999px\",\n                }}\n              >\n                <img\n                  css={{\n                    height: \"100%\",\n                    width: \"100%\",\n                    objectFit: \"cover\",\n                  }}\n                  src={user.picture}\n                  alt={user?.name || user?.email}\n                />\n              </span>\n            ) : (\n              <span css={{ display: \"block\" }} />\n            )}\n\n            <ButtonContentOrLoader\n              authStatus={authStatus}\n              displayMode={displayMode}\n              userActionStarted={userActionStarted}\n            >\n              {user?.name || user?.email}\n            </ButtonContentOrLoader>\n            <span\n              css={{\n                display: \"block\",\n                pointerEvents: \"none\",\n                visibility: shouldShowLoader(authStatus, displayMode)\n                  ? \"hidden\"\n                  : \"visible\",\n              }}\n            >\n              {isOpen ? <ChevronUp /> : <ChevronDown />}\n            </span>\n          </>\n        </button>\n        <div\n          ref={dropdownRef}\n          css={\n            isOpen\n              ? {\n                  position: \"absolute\",\n                  left: 0,\n                  width: buttonWidth || \"auto\",\n                  marginTop: \"0.5rem\",\n                  borderRadius: \"0.5rem\",\n                  backgroundColor: \"white\",\n                  padding: \"0.5rem 0\",\n                  color: \"#6b7280\",\n                  boxShadow:\n                    \"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)\",\n                  zIndex: 1000,\n                }\n              : { display: \"none\" }\n          }\n        >\n          <ul css={{ listStyleType: \"none\", margin: 0, padding: 0 }}>\n            <li>\n              <button\n                css={{\n                  display: \"block\",\n                  width: \"100%\",\n                  padding: \"0.5rem 1rem\",\n                  transition: \"background-color 0.2s\",\n                  background: \"none\",\n                  border: \"none\",\n                  textAlign: \"center\",\n                  cursor: \"pointer\",\n                }}\n                onClick={() => {\n                  setUserActionStarted(true);\n                  !shouldShowLoader(authStatus, displayMode) && handleSignOut();\n                }}\n                onMouseEnter={(e) =>\n                  (e.currentTarget.style.backgroundColor = \"#f3f4f6\")\n                }\n                onMouseLeave={(e) =>\n                  (e.currentTarget.style.backgroundColor = \"transparent\")\n                }\n              >\n                Logout\n              </button>\n            </li>\n          </ul>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <button\n      ref={buttonRef}\n      data-testid=\"sign-in-button\"\n      css={{\n        cursor: \"pointer\",\n        borderRadius: \"9999px\",\n        border: \"1px solid #6b7280\",\n        padding: \"0.75rem 1rem\",\n        background: \"none\",\n        transition: \"background-color 0.2s\",\n        minWidth: \"9em\", // this stops the button from going too small when in loading mode\n        \"&:hover\": {\n          backgroundColor: \"#f3f4f6\",\n        },\n      }}\n      className={className}\n      style={style}\n      onClick={() => {\n        setUserActionStarted(true);\n        !shouldShowLoader(authStatus, displayMode) && handleSignIn();\n      }}\n    >\n      <ButtonContentOrLoader\n        authStatus={authStatus}\n        displayMode={displayMode}\n        userActionStarted={userActionStarted}\n      >\n        Sign in\n      </ButtonContentOrLoader>\n    </button>\n  );\n};\n\nexport { UserButton };\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 5892, "column": 0}, "map": {"version":3,"file":"SignInButton.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/reactjs/components/SignInButton.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState, type CSSProperties } from \"react\";\nimport { AuthStatus, type DisplayMode } from \"@/types.js\";\nimport { useUser } from \"@/reactjs/hooks/useUser.js\";\nimport { ButtonContentOrLoader } from \"./ButtonContentOrLoader.js\";\n\nconst SignInButton = ({\n  displayMode,\n  className,\n  style,\n}: {\n  displayMode?: DisplayMode;\n  className?: string;\n  style?: CSSProperties;\n}) => {\n  const { signIn, authStatus, displayMode: userDisplayMode } = useUser();\n  const [userActionStarted, setUserActionStarted] = useState(false);\n\n  // reset the userActionStarted state if the user logs out or aborts\n  useEffect(() => {\n    if (\n      [AuthStatus.AUTHENTICATED, AuthStatus.UNAUTHENTICATED].includes(\n        authStatus,\n      )\n    ) {\n      setUserActionStarted(false);\n    }\n  }, [authStatus]);\n  return (\n    <button\n      data-testid=\"sign-in-button\"\n      css={{\n        borderRadius: \"9999px\",\n        border: \"1px solid #6b7280\",\n        padding: \"0.75rem 1rem\",\n        transition: \"background-color 0.2s\",\n        minWidth: \"9em\", // this stops the button from going too small when in loading mode\n      }}\n      className={className}\n      style={style}\n      onClick={() => {\n        setUserActionStarted(true);\n        signIn(displayMode);\n      }}\n    >\n      <ButtonContentOrLoader\n        authStatus={authStatus}\n        displayMode={displayMode || userDisplayMode}\n        userActionStarted={userActionStarted}\n      >\n        Sign In\n      </ButtonContentOrLoader>\n    </button>\n  );\n};\n\nexport { SignInButton };\n"],"names":[],"mappings":";;;;AAEA,OAAO,EAAE,SAAS,EAAE,QAAQ,EAAsB,MAAM,OAAO,CAAC;AAChE,OAAO,EAAE,UAAU,EAAoB,MAAM,YAAY,CAAC;AAC1D,OAAO,EAAE,OAAO,EAAE,MAAM,4BAA4B,CAAC;AACrD,OAAO,EAAE,qBAAqB,EAAE,MAAM,4BAA4B,CAAC;AALnE,YAAY,CAAC;;;;;;AAOb,MAAM,YAAY,GAAG,CAAC,EACpB,WAAW,EACX,SAAS,EACT,KAAK,EAKN,EAAE,EAAE;IACH,MAAM,EAAE,MAAM,EAAE,UAAU,EAAE,WAAW,EAAE,eAAe,EAAE,4NAAG,UAAA,AAAO,EAAE,CAAC;IACvE,MAAM,CAAC,iBAAiB,EAAE,oBAAoB,CAAC,qKAAG,WAAA,AAAQ,EAAC,KAAK,CAAC,CAAC;IAElE,mEAAmE;sKACnE,YAAA,AAAS;kCAAC,GAAG,EAAE;YACb,IACE;+MAAC,aAAU,CAAC,aAAa;+MAAE,aAAU,CAAC,eAAe;aAAC,CAAC,QAAQ,CAC7D,UAAU,CACX,EACD,CAAC;gBACD,oBAAoB,CAAC,KAAK,CAAC,CAAC;YAC9B,CAAC;QACH,CAAC;iCAAE;QAAC,UAAU;KAAC,CAAC,CAAC;IACjB,OAAO,2OACL,MAAA,EAAA,UAAA;QAAA,eACc,gBAAgB;QAC5B,GAAG,EAAE;YACH,YAAY,EAAE,QAAQ;YACtB,MAAM,EAAE,mBAAmB;YAC3B,OAAO,EAAE,cAAc;YACvB,UAAU,EAAE,uBAAuB;YACnC,QAAQ,EAAE,KAAK,EAAE,kEAAkE;SACpF;QACD,SAAS,EAAE,SAAS;QACpB,KAAK,EAAE,KAAK;QACZ,OAAO,EAAE,GAAG,EAAE;YACZ,oBAAoB,CAAC,IAAI,CAAC,CAAC;YAC3B,MAAM,CAAC,WAAW,CAAC,CAAC;QACtB,CAAC;QAAA,qPAED,MAAA,0OAAC,wBAAqB,EAAA;YACpB,UAAU,EAAE,UAAU;YACtB,WAAW,EAAE,WAAW,IAAI,eAAe;YAC3C,iBAAiB,EAAE,iBAAiB;YAAA,UAAA;QAAA,EAGd;IAAA,EACjB,CACV,CAAC;AACJ,CAAC,CAAC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 5953, "column": 0}, "map": {"version":3,"file":"SignOutButton.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/reactjs/components/SignOutButton.tsx"],"sourcesContent":["\"use client\";\nimport { useEffect, useState, type CSSProperties } from \"react\";\nimport { useUser } from \"@/reactjs/hooks/useUser.js\";\nimport { ButtonContentOrLoader } from \"./ButtonContentOrLoader.js\";\nimport { AuthStatus } from \"@/types.js\";\n\nconst SignOutButton = ({\n  className,\n  style,\n}: {\n  className?: string;\n  style?: CSSProperties;\n}) => {\n  const { signOut, authStatus, displayMode } = useUser();\n  const [userActionStarted, setUserActionStarted] = useState(false);\n\n  // reset the userActionStarted state if the user logs out or aborts\n  useEffect(() => {\n    if (\n      [AuthStatus.AUTHENTICATED, AuthStatus.UNAUTHENTICATED].includes(\n        authStatus,\n      )\n    ) {\n      setUserActionStarted(false);\n    }\n  }, [authStatus]);\n  return (\n    <button\n      css={{\n        borderRadius: \"9999px\",\n        border: \"1px solid #6b7280\",\n        padding: \"0.75rem 1rem\",\n        transition: \"background-color 0.2s\",\n      }}\n      className={className}\n      style={style}\n      onClick={() => signOut()}\n    >\n      <ButtonContentOrLoader\n        authStatus={authStatus}\n        displayMode={displayMode}\n        userActionStarted={userActionStarted}\n      >\n        Sign Out\n      </ButtonContentOrLoader>\n    </button>\n  );\n};\n\nexport { SignOutButton };\n"],"names":[],"mappings":";;;;AACA,OAAO,EAAE,SAAS,EAAE,QAAQ,EAAsB,MAAM,OAAO,CAAC;AAChE,OAAO,EAAE,OAAO,EAAE,MAAM,4BAA4B,CAAC;AACrD,OAAO,EAAE,qBAAqB,EAAE,MAAM,4BAA4B,CAAC;AACnE,OAAO,EAAE,UAAU,EAAE,MAAM,YAAY,CAAC;AAJxC,YAAY,CAAC;;;;;;AAMb,MAAM,aAAa,GAAG,CAAC,EACrB,SAAS,EACT,KAAK,EAIN,EAAE,EAAE;IACH,MAAM,EAAE,OAAO,EAAE,UAAU,EAAE,WAAW,EAAE,GAAG,mOAAO,AAAP,EAAS,CAAC;IACvD,MAAM,CAAC,iBAAiB,EAAE,oBAAoB,CAAC,qKAAG,WAAA,AAAQ,EAAC,KAAK,CAAC,CAAC;IAElE,mEAAmE;sKACnE,YAAA,AAAS;mCAAC,GAAG,EAAE;YACb,IACE;+MAAC,aAAU,CAAC,aAAa;+MAAE,aAAU,CAAC,eAAe;aAAC,CAAC,QAAQ,CAC7D,UAAU,CACX,EACD,CAAC;gBACD,oBAAoB,CAAC,KAAK,CAAC,CAAC;YAC9B,CAAC;QACH,CAAC;kCAAE;QAAC,UAAU;KAAC,CAAC,CAAC;IACjB,OAAO,2OACL,MAAA,EAAA,UAAA;QACE,GAAG,EAAE;YACH,YAAY,EAAE,QAAQ;YACtB,MAAM,EAAE,mBAAmB;YAC3B,OAAO,EAAE,cAAc;YACvB,UAAU,EAAE,uBAAuB;SACpC;QACD,SAAS,EAAE,SAAS;QACpB,KAAK,EAAE,KAAK;QACZ,OAAO,EAAE,GAAG,CAAG,CAAD,MAAQ,EAAE;QAAA,qPAExB,MAAA,0OAAC,wBAAqB,EAAA;YACpB,UAAU,EAAE,UAAU;YACtB,WAAW,EAAE,WAAW;YACxB,iBAAiB,EAAE,iBAAiB;YAAA,UAAA;QAAA,EAGd;IAAA,EACjB,CACV,CAAC;AACJ,CAAC,CAAC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 6009, "column": 0}, "map": {"version":3,"file":"index.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/reactjs/components/index.ts"],"sourcesContent":["export { CivicAuthIframe } from \"@/shared/components/CivicAuthIframe.js\";\nexport { CivicAuthIframeContainer } from \"@/shared/components/CivicAuthIframeContainer.js\";\nexport { UserButton } from \"@/reactjs/components/UserButton.js\";\nexport { SignInButton } from \"@/reactjs/components/SignInButton.js\";\nexport { SignOutButton } from \"@/reactjs/components/SignOutButton.js\";\n"],"names":[],"mappings":";AAAA,OAAO,EAAE,eAAe,EAAE,MAAM,wCAAwC,CAAC;AACzE,OAAO,EAAE,wBAAwB,EAAE,MAAM,iDAAiD,CAAC;AAC3F,OAAO,EAAE,UAAU,EAAE,MAAM,oCAAoC,CAAC;AAChE,OAAO,EAAE,YAAY,EAAE,MAAM,sCAAsC,CAAC;AACpE,OAAO,EAAE,aAAa,EAAE,MAAM,uCAAuC,CAAC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 6039, "column": 0}, "map": {"version":3,"file":"index.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/reactjs/index.ts"],"sourcesContent":["// These are the default exports of the project.\n// They are limited by design to ensure that the public API does not expose any internal implementation details.\n// Do not change this without thinking carefully about the impact on the client-facing public API.\nimport { printVersion } from \"@/shared/index.js\";\nprintVersion();\n\nexport * from \"@/reactjs/hooks/index.js\";\nexport {\n  CivicAuthProvider,\n  type CivicAuthProviderProps,\n} from \"@/reactjs/providers/index.js\";\nexport type {\n  AuthContextType,\n  TokenContextType,\n  UserContextType,\n} from \"@/reactjs/providers/index.js\";\nexport { CivicAuthIframeContainer } from \"@/shared/components/CivicAuthIframeContainer.js\";\nexport {\n  UserButton,\n  SignInButton,\n  SignOutButton,\n} from \"@/reactjs/components/index.js\";\n"],"names":[],"mappings":"AAAA,gDAAgD;AAChD,gHAAgH;AAChH,kGAAkG;;;AAClG,OAAO,EAAE,YAAY,EAAE,MAAM,mBAAmB,CAAC;AAGjD,cAAc,0BAA0B,CAAC;AACzC,OAAO,EACL,iBAAiB,GAElB,MAAM,8BAA8B,CAAC;AAMtC,OAAO,EAAE,wBAAwB,EAAE,MAAM,iDAAiD,CAAC;AAC3F,OAAO,EACL,UAAU,EACV,YAAY,EACZ,aAAa,GACd,MAAM,+BAA+B,CAAC;;6NAjBvC,eAAA,AAAY,EAAE,CAAC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 6074, "column": 0}, "map": {"version":3,"file":"index.js","sourceRoot":"","sources":["file:///Users/macbookk/Desktop/CODES%20%F0%9F%98%8E/rug-raider/node_modules/%40civic/auth-web3/node_modules/%40civic/auth/src/index.ts"],"sourcesContent":["// These are the default exports of the project.\n// They are limited by design to ensure that the public API does not expose any internal implementation details.\n// Do not change this without thinking carefully about the impact on the client-facing public API.\nexport type {\n  Tokens,\n  Endpoints,\n  Config,\n  User,\n  DisplayMode,\n  ForwardedTokens,\n  AuthStorage,\n} from \"@/types.js\";\n\nexport { AuthStatus } from \"@/types.js\";\nexport type * from \"@/shared/lib/types.js\";\n\nexport type { UserContextType } from \"@/shared/providers/UserProvider.js\";\nimport { VERSION, printVersion } from \"@/shared/index.js\";\nexport { createLogger } from \"@/lib/logger.js\";\nprintVersion();\nexport { VERSION };\n"],"names":[],"mappings":";AAaA,OAAO,EAAE,UAAU,EAAE,MAAM,YAAY,CAAC;;AAIxC,OAAO,EAAE,OAAO,EAAE,YAAY,EAAE,MAAM,mBAAmB,CAAC;AAC1D,OAAO,EAAE,YAAY,EAAE,MAAM,iBAAiB,CAAC;;;;6NAC/C,eAAA,AAAY,EAAE,CAAC","ignoreList":[0],"debugId":null}}]
}